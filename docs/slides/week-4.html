<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Week 4 ‚Äì ESS 523c</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b6eb65566b1f8a996f1287d789c0740.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-c63d9198b28a859559c0f0cce9729cfa.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../csu-rams-logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ESS 523c</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mikejohnson51/csu-ess-523c/"> <i class="bi bi-github" role="img" aria-label="ESS 523c">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#recap-sf-and-spatial-concepts" id="toc-recap-sf-and-spatial-concepts" class="nav-link active" data-scroll-target="#recap-sf-and-spatial-concepts">Recap: sf and spatial concepts</a></li>
  <li><a href="#terra" id="toc-terra" class="nav-link" data-scroll-target="#terra"><code>terra</code></a></li>
  <li><a href="#recap-r-data-structures" id="toc-recap-r-data-structures" class="nav-link" data-scroll-target="#recap-r-data-structures">Recap: R data structures</a></li>
  <li><a href="#spatial-extent" id="toc-spatial-extent" class="nav-link" data-scroll-target="#spatial-extent">Spatial Extent</a></li>
  <li><a href="#we-can-extract-bounding-box-coordinates-with-st_bbox" id="toc-we-can-extract-bounding-box-coordinates-with-st_bbox" class="nav-link" data-scroll-target="#we-can-extract-bounding-box-coordinates-with-st_bbox">We can extract bounding box coordinates with <code>st_bbox</code></a></li>
  <li><a href="#there-is-a-method-for-creating-an-sfc-form-a-bbox-object" id="toc-there-is-a-method-for-creating-an-sfc-form-a-bbox-object" class="nav-link" data-scroll-target="#there-is-a-method-for-creating-an-sfc-form-a-bbox-object">There is a method for creating an sfc form a <code>bbox</code> object</a></li>
  <li><a href="#result" id="toc-result" class="nav-link" data-scroll-target="#result">Result:</a></li>
  <li><a href="#extents-can-be-discritized-in-a-number-of-ways" id="toc-extents-can-be-discritized-in-a-number-of-ways" class="nav-link" data-scroll-target="#extents-can-be-discritized-in-a-number-of-ways">Extents can be discritized in a number of ways:</a></li>
  <li><a href="#what-makes-of-a-regular-tesselation" id="toc-what-makes-of-a-regular-tesselation" class="nav-link" data-scroll-target="#what-makes-of-a-regular-tesselation">What makes of a regular tesselation</a></li>
  <li><a href="#alternative-representation" id="toc-alternative-representation" class="nav-link" data-scroll-target="#alternative-representation">Alternative representation</a></li>
  <li><a href="#equal-area-from-centroid" id="toc-equal-area-from-centroid" class="nav-link" data-scroll-target="#equal-area-from-centroid">Equal area from centroid</a></li>
  <li><a href="#raster-model" id="toc-raster-model" class="nav-link" data-scroll-target="#raster-model">Raster Model</a></li>
  <li><a href="#many-terms-mean-the-same-thing" id="toc-many-terms-mean-the-same-thing" class="nav-link" data-scroll-target="#many-terms-mean-the-same-thing">Many terms mean the same thing ‚Ä¶</a></li>
  <li><a href="#photos-and-computers" id="toc-photos-and-computers" class="nav-link" data-scroll-target="#photos-and-computers">Photos and Computers ‚Ä¶</a></li>
  <li><a href="#aerial-imagery-really-just-a-photo" id="toc-aerial-imagery-really-just-a-photo" class="nav-link" data-scroll-target="#aerial-imagery-really-just-a-photo">Aerial Imagery (really just a photo üòÑ)</a></li>
  <li><a href="#what-is-stored-in-these-cells" id="toc-what-is-stored-in-these-cells" class="nav-link" data-scroll-target="#what-is-stored-in-these-cells">What is stored in these cells?</a></li>
  <li><a href="#spectral-values" id="toc-spectral-values" class="nav-link" data-scroll-target="#spectral-values">Spectral Values</a></li>
  <li><a href="#any-digital-image-contains-an-rbg-channel-for-color" id="toc-any-digital-image-contains-an-rbg-channel-for-color" class="nav-link" data-scroll-target="#any-digital-image-contains-an-rbg-channel-for-color">Any digital image contains an RBG channel for color:</a></li>
  <li><a href="#pure-rbg" id="toc-pure-rbg" class="nav-link" data-scroll-target="#pure-rbg">Pure RBG</a></li>
  <li><a href="#rgb-and-bytesbits" id="toc-rgb-and-bytesbits" class="nav-link" data-scroll-target="#rgb-and-bytesbits">RGB and bytes/bits</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#why-do-we-care" id="toc-why-do-we-care" class="nav-link" data-scroll-target="#why-do-we-care">Why do we care?</a>
  <ul class="collapse">
  <li><a href="#resolution-drives-image-clarity-granulairty" id="toc-resolution-drives-image-clarity-granulairty" class="nav-link" data-scroll-target="#resolution-drives-image-clarity-granulairty">Resolution drives image clarity (granulairty)</a></li>
  <li><a href="#raster-images-seek-to-discritize-the-real-world-into-cell-based-values" id="toc-raster-images-seek-to-discritize-the-real-world-into-cell-based-values" class="nav-link" data-scroll-target="#raster-images-seek-to-discritize-the-real-world-into-cell-based-values">Raster images seek to discritize the real world into cell-based values</a></li>
  <li><a href="#all-rasters-have-an-extent" id="toc-all-rasters-have-an-extent" class="nav-link" data-scroll-target="#all-rasters-have-an-extent">All rasters have an extent!</a></li>
  <li><a href="#implicity-coordinates" id="toc-implicity-coordinates" class="nav-link" data-scroll-target="#implicity-coordinates">Implicity Coordinates</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  <li><a href="#raster-data-in-r" id="toc-raster-data-in-r" class="nav-link" data-scroll-target="#raster-data-in-r">Raster Data in R</a></li>
  <li><a href="#raster-values" id="toc-raster-values" class="nav-link" data-scroll-target="#raster-values">Raster Values</a></li>
  <li><a href="#assigning-a-values-as-a-vector" id="toc-assigning-a-values-as-a-vector" class="nav-link" data-scroll-target="#assigning-a-values-as-a-vector">Assigning a values as a vector</a></li>
  <li><a href="#raster-is-s4" id="toc-raster-is-s4" class="nav-link" data-scroll-target="#raster-is-s4">Raster is S4</a></li>
  <li><a href="#access-via-function" id="toc-access-via-function" class="nav-link" data-scroll-target="#access-via-function">Access via Function</a></li>
  <li><a href="#multi-layers" id="toc-multi-layers" class="nav-link" data-scroll-target="#multi-layers">Multi-layers</a></li>
  <li><a href="#remember-our-array-data" id="toc-remember-our-array-data" class="nav-link" data-scroll-target="#remember-our-array-data">Remember our Array data?</a></li>
  <li><a href="#an-array-is-a-single-file-so-it-can-be-rasterized" id="toc-an-array-is-a-single-file-so-it-can-be-rasterized" class="nav-link" data-scroll-target="#an-array-is-a-single-file-so-it-can-be-rasterized">An array is a single file so it can be ‚Äúrasterized‚Äù</a></li>
  </ul></li>
  <li><a href="#core-raster-principles" id="toc-core-raster-principles" class="nav-link" data-scroll-target="#core-raster-principles">Core Raster Principles</a>
  <ul class="collapse">
  <li><a href="#bounding-box-extents" id="toc-bounding-box-extents" class="nav-link" data-scroll-target="#bounding-box-extents">1. Bounding Box / Extents</a></li>
  <li><a href="#extent" id="toc-extent" class="nav-link" data-scroll-target="#extent">2. Extent</a></li>
  <li><a href="#discretization" id="toc-discretization" class="nav-link" data-scroll-target="#discretization">3. Discretization</a></li>
  <li><a href="#so" id="toc-so" class="nav-link" data-scroll-target="#so">So,</a></li>
  <li><a href="#general-process" id="toc-general-process" class="nav-link" data-scroll-target="#general-process">General Process</a></li>
  <li><a href="#find-elevation-data-for-fort-collins" id="toc-find-elevation-data-for-fort-collins" class="nav-link" data-scroll-target="#find-elevation-data-for-fort-collins">Find elevation data for Fort Collins:</a></li>
  <li><a href="#raster-values-continuity" id="toc-raster-values-continuity" class="nav-link" data-scroll-target="#raster-values-continuity">Raster Values Continuity</a></li>
  <li><a href="#raster-values-1" id="toc-raster-values-1" class="nav-link" data-scroll-target="#raster-values-1">Raster Values</a></li>
  <li><a href="#all-image-files-are-the-same" id="toc-all-image-files-are-the-same" class="nav-link" data-scroll-target="#all-image-files-are-the-same">All image files are the same!</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a></li>
  <li><a href="#raster-algebra" id="toc-raster-algebra" class="nav-link" data-scroll-target="#raster-algebra">Raster Algebra</a></li>
  <li><a href="#raster-algebra-1" id="toc-raster-algebra-1" class="nav-link" data-scroll-target="#raster-algebra-1">Raster Algebra</a>
  <ul class="collapse">
  <li><a href="#for-example" id="toc-for-example" class="nav-link" data-scroll-target="#for-example">For example:</a></li>
  </ul></li>
  <li><a href="#replacement" id="toc-replacement" class="nav-link" data-scroll-target="#replacement">Replacement</a></li>
  <li><a href="#modifying-a-raster" id="toc-modifying-a-raster" class="nav-link" data-scroll-target="#modifying-a-raster">Modifying a raster</a></li>
  <li><a href="#modifying-the-underlying-data" id="toc-modifying-the-underlying-data" class="nav-link" data-scroll-target="#modifying-the-underlying-data">Modifying the underlying data:</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a></li>
  <li><a href="#what-is-mask-doing" id="toc-what-is-mask-doing" class="nav-link" data-scroll-target="#what-is-mask-doing">What is <code>mask</code> doing?</a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"></a></li>
  <li><a href="#crop-orand-mask" id="toc-crop-orand-mask" class="nav-link" data-scroll-target="#crop-orand-mask">Crop or/and mask</a></li>
  <li><a href="#aggregate-and-disaggregate" id="toc-aggregate-and-disaggregate" class="nav-link" data-scroll-target="#aggregate-and-disaggregate">Aggregate and disaggregate</a></li>
  <li><a href="#app" id="toc-app" class="nav-link" data-scroll-target="#app"><code>app</code></a></li>
  <li><a href="#read-in-the-saved-raster-file" id="toc-read-in-the-saved-raster-file" class="nav-link" data-scroll-target="#read-in-the-saved-raster-file">Read in the saved raster file</a></li>
  <li><a href="#create-a-conditional-threshold-mask" id="toc-create-a-conditional-threshold-mask" class="nav-link" data-scroll-target="#create-a-conditional-threshold-mask">Create a conditional (threshold) mask</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#multiply-cell-wise" id="toc-multiply-cell-wise" class="nav-link" data-scroll-target="#multiply-cell-wise">Multiply cell-wise</a></li>
  <li><a href="#reclassify" id="toc-reclassify" class="nav-link" data-scroll-target="#reclassify">Reclassify</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"></a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"></a></li>
  <li><a href="#real-example-classify-rainfall-regions-of-colorado" id="toc-real-example-classify-rainfall-regions-of-colorado" class="nav-link" data-scroll-target="#real-example-classify-rainfall-regions-of-colorado">Real Example: Classify Rainfall Regions of Colorado</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"></a></li>
  <li><a href="#objectfield-interaction" id="toc-objectfield-interaction" class="nav-link" data-scroll-target="#objectfield-interaction">Object/Field Interaction</a></li>
  <li><a href="#lets-find-the-longest-river-segment-in-our-extent" id="toc-lets-find-the-longest-river-segment-in-our-extent" class="nav-link" data-scroll-target="#lets-find-the-longest-river-segment-in-our-extent">Lets find the longest river segment <em>IN</em> our extent</a></li>
  <li><a href="#value-extraction" id="toc-value-extraction" class="nav-link" data-scroll-target="#value-extraction">Value Extraction</a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"></a></li>
  <li><a href="#sinuosity" id="toc-sinuosity" class="nav-link" data-scroll-target="#sinuosity">Sinuosity</a></li>
  <li><a href="#river-slope" id="toc-river-slope" class="nav-link" data-scroll-target="#river-slope">River Slope:</a></li>
  <li><a href="#river-profile" id="toc-river-profile" class="nav-link" data-scroll-target="#river-profile">River profile</a></li>
  <li><a href="#map-algebra" id="toc-map-algebra" class="nav-link" data-scroll-target="#map-algebra">Map Algebra</a></li>
  <li><a href="#local" id="toc-local" class="nav-link" data-scroll-target="#local">Local</a></li>
  <li><a href="#focal" id="toc-focal" class="nav-link" data-scroll-target="#focal">Focal</a></li>
  <li><a href="#focal-1" id="toc-focal-1" class="nav-link" data-scroll-target="#focal-1">Focal</a></li>
  <li><a href="#example-focal" id="toc-example-focal" class="nav-link" data-scroll-target="#example-focal">Example: Focal</a></li>
  <li><a href="#results-1" id="toc-results-1" class="nav-link" data-scroll-target="#results-1">Results</a></li>
  <li><a href="#what-did-we-do" id="toc-what-did-we-do" class="nav-link" data-scroll-target="#what-did-we-do">What did we do?</a></li>
  <li><a href="#zonal" id="toc-zonal" class="nav-link" data-scroll-target="#zonal">Zonal</a></li>
  <li><a href="#zonal-statisics-more-advanced" id="toc-zonal-statisics-more-advanced" class="nav-link" data-scroll-target="#zonal-statisics-more-advanced">Zonal Statisics (More advanced)</a></li>
  <li><a href="#what-about-the-us" id="toc-what-about-the-us" class="nav-link" data-scroll-target="#what-about-the-us">What about the US?</a></li>
  <li><a href="#global" id="toc-global" class="nav-link" data-scroll-target="#global">Global</a></li>
  <li><a href="#summary-values" id="toc-summary-values" class="nav-link" data-scroll-target="#summary-values">Summary Values</a></li>
  </ul></li>
  <li><a href="#why-not-just-mean" id="toc-why-not-just-mean" class="nav-link" data-scroll-target="#why-not-just-mean">Why not just <code>mean()</code></a>
  <ul class="collapse">
  <li><a href="#mean-monthly-rainfall-for-colorado" id="toc-mean-monthly-rainfall-for-colorado" class="nav-link" data-scroll-target="#mean-monthly-rainfall-for-colorado">Mean Monthly Rainfall for Colorado</a></li>
  </ul></li>
  <li><a href="#kmeans-over-to-raster-data" id="toc-kmeans-over-to-raster-data" class="nav-link" data-scroll-target="#kmeans-over-to-raster-data">Kmeans over to Raster Data!</a>
  <ul class="collapse">
  <li><a href="#colorado-october-2018-climate" id="toc-colorado-october-2018-climate" class="nav-link" data-scroll-target="#colorado-october-2018-climate">Colorado October 2018 climate</a></li>
  <li><a href="#raster-layers-are-vectors" id="toc-raster-layers-are-vectors" class="nav-link" data-scroll-target="#raster-layers-are-vectors">Raster layers are vectors!</a></li>
  <li><a href="#data-prep" id="toc-data-prep" class="nav-link" data-scroll-target="#data-prep">Data Prep</a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10"></a></li>
  <li><a href="#copying-a-raster-structure" id="toc-copying-a-raster-structure" class="nav-link" data-scroll-target="#copying-a-raster-structure">Copying a raster structure</a></li>
  <li><a href="#assign-values" id="toc-assign-values" class="nav-link" data-scroll-target="#assign-values">Assign values</a></li>
  <li><a href="#merging-across-data-sources" id="toc-merging-across-data-sources" class="nav-link" data-scroll-target="#merging-across-data-sources">Merging across data sources</a></li>
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11"></a></li>
  <li><a href="#clustering-at-larger-scales" id="toc-clustering-at-larger-scales" class="nav-link" data-scroll-target="#clustering-at-larger-scales">Clustering at larger scales</a></li>
  <li><a href="#extra-animating-rasters" id="toc-extra-animating-rasters" class="nav-link" data-scroll-target="#extra-animating-rasters">Extra! Animating Rasters‚Ä¶</a></li>
  <li><a href="#result-1" id="toc-result-1" class="nav-link" data-scroll-target="#result-1">Result</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="week-4.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 4</h1>
<p class="subtitle lead">Raster Data</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="recap-sf-and-spatial-concepts" class="level2">
<h2 class="anchored" data-anchor-id="recap-sf-and-spatial-concepts">Recap: sf and spatial concepts</h2>
<ul>
<li><p>Spatial phenomena can be thought of discrete <strong>objects</strong> with clear boundaries or as <strong>continuous</strong> phenomenon that can be observed everywhere, with <em>no</em> natural boundaries.</p></li>
<li><p>We have described these as <strong>objects</strong> and <strong>fields</strong> (Kuhn, 2012)</p></li>
<li><p>Objects are usually represented by vector data consisting of:</p>
<ul>
<li>a geometry (simple features (<code>sfc</code>, <code>sfg</code>))</li>
<li>some attribute information (<code>data.frame</code>)</li>
</ul></li>
<li><p>In R these are unified as a <code>sf</code> object</p></li>
<li><p>Field data is typically represented by raster data</p></li>
<li><p>For this, we will begin our discussions using the <code>terra</code> package</p></li>
</ul>
</section>
<section id="terra" class="level2">
<h2 class="anchored" data-anchor-id="terra"><code>terra</code></h2>
<ul>
<li><p>Like <code>sf</code>, <code>terra</code> is an implementation of <a href="https://gistbok.ucgis.org/bok-topics/raster-data-model">standard raster data model</a></p></li>
<li><p>The model is used by all GIS platforms</p></li>
<li><p>Represented continuous data either as continuous or categorical values as a regular set of cells in a grid (matrix)</p></li>
<li><p>cells have: (1) resolution, (2) infered cell coordinate (centroid) (3) the coordinate and value apply to the entire cell area</p></li>
</ul>
</section>
<section id="recap-r-data-structures" class="level2">
<h2 class="anchored" data-anchor-id="recap-r-data-structures">Recap: R data structures</h2>
<ul>
<li><p>Vector:</p>
<ul>
<li>A vector can have dimensions
<ul>
<li>A 1D vector in a collection of values</li>
<li>A 2D vector is a matrix</li>
<li>A 3D vector is an array</li>
</ul></li>
</ul></li>
<li><p>List: a collection of objects</p></li>
<li><p>data.frame: a list with requirement of equal length column (vectors)</p></li>
<li><p>data.frames and lists (sfc) defined our vector model</p></li>
<li><p>Arrays will define our raster model</p></li>
</ul>
</section>
<section id="spatial-extent" class="level2">
<h2 class="anchored" data-anchor-id="spatial-extent">Spatial Extent</h2>
<p>One last topic with respect to vector data (that will carry us into raster) is the idea of an extent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(ny <span class="ot">&lt;-</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"NY"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">st_transform</span>(<span class="dv">5070</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(name))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 1 feature and 1 field</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 1319502 ymin: 2149150 xmax: 1997508 ymax: 2658543</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Projected CRS: NAD83 / Conus Albers</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       name                       geometry</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 New York MULTIPOLYGON (((1661335 263...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In geometry, the minimum bounding box for a point set (stored as <code>POINT</code>, <code>POLYLINE</code>, <code>POLYGON</code>) in N dimensions is ‚Äú‚Ä¶the box with the smallest measure within which all the points lie.‚Äù</p>
</section>
<section id="we-can-extract-bounding-box-coordinates-with-st_bbox" class="level2">
<h2 class="anchored" data-anchor-id="we-can-extract-bounding-box-coordinates-with-st_bbox">We can extract bounding box coordinates with <code>st_bbox</code></h2>
<ul>
<li>returns: an object of class <code>bbox</code> of length 4.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">bb =</span> <span class="fu">st_bbox</span>(ny))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xmin    ymin    xmax    ymax </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1319502 2149150 1997508 2658543</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(bb)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "bbox"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(bb)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="there-is-a-method-for-creating-an-sfc-form-a-bbox-object" class="level2">
<h2 class="anchored" data-anchor-id="there-is-a-method-for-creating-an-sfc-form-a-bbox-object">There is a method for creating an sfc form a <code>bbox</code> object</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">bb =</span> <span class="fu">st_as_sfc</span>(bb))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Geometry set for 1 feature </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: 1319502 ymin: 2149150 xmax: 1997508 ymax: 2658543</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Projected CRS: NAD83 / Conus Albers</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(bb)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "sfc_POLYGON" "sfc"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(bb)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "list"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="result" class="level2">
<h2 class="anchored" data-anchor-id="result">Result:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(bb, <span class="at">border =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, .<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-5-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="extents-can-be-discritized-in-a-number-of-ways" class="level2">
<h2 class="anchored" data-anchor-id="extents-can-be-discritized-in-a-number-of-ways">Extents can be discritized in a number of ways:</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>grid <span class="ot">=</span> <span class="fu">st_make_grid</span>(bb)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grid, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>grid1km <span class="ot">=</span> <span class="fu">st_make_grid</span>(bb, <span class="at">cellsize =</span> <span class="dv">10000</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grid1km, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="what-makes-of-a-regular-tesselation" class="level2">
<h2 class="anchored" data-anchor-id="what-makes-of-a-regular-tesselation">What makes of a regular tesselation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(grid1km) <span class="co"># how many grid tiles</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3468</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="co"># how many points?</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 17340</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">*</span> <span class="dv">2</span> <span class="co"># how many X and Y?</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 34680</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">/</span> <span class="fu">length</span>(grid) <span class="co"># how many points per tile?</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 173.4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">st_area</span>(grid1km)[<span class="dv">1</span>]) <span class="co"># length of each tile?</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10000 [m]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">st_bbox</span>(grid1km) <span class="co"># extent of grid</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    xmin    ymin    xmax    ymax </span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1319502 2149150 1999502 2659150</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="alternative-representation" class="level2">
<h2 class="anchored" data-anchor-id="alternative-representation">Alternative representation</h2>
<p>Regular grids can also be indexed by their centroids</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>cent <span class="ot">&lt;-</span> <span class="fu">st_centroid</span>(grid1km)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cent, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-14-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(cent) <span class="co"># how many grid tiles</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3468</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="co"># how many points?</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 17340</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">*</span> <span class="dv">2</span> <span class="co"># how many X and Y?</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 34680</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="equal-area-from-centroid" class="level2">
<h2 class="anchored" data-anchor-id="equal-area-from-centroid">Equal area from centroid</h2>
<p>We can use our voroni diagram the show that the area closest to a cell centroid is the cell itself.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>vor <span class="ot">=</span> <span class="fu">st_union</span>(cent) <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_voronoi</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_cast</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_intersection</span>(bb)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry); <span class="fu">plot</span>(vor, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-16-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="raster-model" class="level2">
<h2 class="anchored" data-anchor-id="raster-model">Raster Model</h2>
<ul>
<li><p>The raster model is one of the earliest and most widely used data models within geographic information systems (Tomlin, 1990; Goodchild, 1992, Maguire, 1992).</p></li>
<li><p>Typically used to record, analyze and visualize data with a continuous nature such as elevation, temperature (‚ÄúGIS‚Äù), or reflected or emitted electromagnetic radiation (‚ÄúRemote Sensing‚Äù)</p></li>
<li><p>Quotes are used because you‚Äôll find from a data perspective these differences are artificial and a product of the ESRI/ENVI/ERDAS divide</p></li>
</ul>
<p>. . .</p>
<ul>
<li><p>The term <code>raster</code> originated from the German word for screen, implying a series of orthogonality oriented parallel lines.</p></li>
<li><p>Digital raster objects most often take the form of a <em>regularly spaced</em>, <em>grid-like</em> pattern of rows and columns</p></li>
<li><p>Each element referred to as a cell, pixel, or grid point.</p></li>
</ul>
</section>
<section id="many-terms-mean-the-same-thing" class="level2">
<h2 class="anchored" data-anchor-id="many-terms-mean-the-same-thing">Many terms mean the same thing ‚Ä¶</h2>
<ul>
<li><p>The entire raster is sometimes referred to as an ‚Äúimage‚Äù, ‚Äúarray‚Äù, ‚Äúsurface‚Äù, ‚Äúmatrix‚Äù, or ‚Äúlattice‚Äù (Wise, 2000).</p></li>
<li><p>The all mean the same thing‚Ä¶</p></li>
<li><p>Cells of the raster are most often square, but may be rectangular (with differing resolutions in x and y directions) or other shapes that can be tessellated such as triangles and hexagons (Figure below from Peuquet, 1984).</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-tess.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="photos-and-computers" class="level2">
<h2 class="anchored" data-anchor-id="photos-and-computers">Photos and Computers ‚Ä¶</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-pixel-resolution.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-what-is-a-pixel.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="aerial-imagery-really-just-a-photo" class="level2">
<h2 class="anchored" data-anchor-id="aerial-imagery-really-just-a-photo">Aerial Imagery (really just a photo üòÑ)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-boat-res1.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-boat-res2.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="what-is-stored-in-these-cells" class="level2">
<h2 class="anchored" data-anchor-id="what-is-stored-in-these-cells">What is stored in these cells?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<section id="categorical-values-integerfactor" class="level3">
<h3 class="anchored" data-anchor-id="categorical-values-integerfactor">Categorical Values (integer/factor)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-lc-pixels.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="continuous-values-numeric" class="level3">
<h3 class="anchored" data-anchor-id="continuous-values-numeric">Continuous Values (numeric)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-elev.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</div>
</div>
</section>
<section id="spectral-values" class="level2">
<h2 class="anchored" data-anchor-id="spectral-values">Spectral Values</h2>
<ul>
<li>Either Color, or sensor</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-rgb.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="any-digital-image-contains-an-rbg-channel-for-color" class="level2">
<h2 class="anchored" data-anchor-id="any-digital-image-contains-an-rbg-channel-for-color">Any digital image contains an RBG channel for color:</h2>
<ul>
<li><p>Red, green, and blue are the three additive colors (primary colors of light)</p></li>
<li><p>In R, colors can be defined using the RBG channels</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># red</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "#FF0000"</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>(<span class="fu">rgb</span>(<span class="dv">0</span>,.<span class="dv">54</span>,.<span class="dv">96</span>)) <span class="co"># UCSB navy</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "#008AF5"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>(<span class="fu">rgb</span>(<span class="dv">254</span>,<span class="dv">188</span>,<span class="dv">17</span>, <span class="at">maxColorValue =</span> <span class="dv">255</span>)) <span class="co"># UCSB navy</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "#FEBC11"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pure-rbg" class="level2">
<h2 class="anchored" data-anchor-id="pure-rbg">Pure RBG</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># red</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="co"># green</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>)) <span class="co"># blue</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-26-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="rgb-and-bytesbits" class="level2">
<h2 class="anchored" data-anchor-id="rgb-and-bytesbits">RGB and bytes/bits</h2>
<ul>
<li><p>The <strong>red</strong>, <strong>green</strong> and <strong>blue</strong> use 8 bits each (1 byte), which each have integer values from 0 to 255.</p></li>
<li><p>This makes 256^3 = 16,777,216 possible colors.</p></li>
<li><p>See more <a href="https://www.rapidtables.com/web/color/RGB_Color.html">here</a></p></li>
<li><p>How does this relate to the selection of 256x256 pixel tiles in web maps?</p></li>
</ul>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
<p>The secondary colors in an RGB color wheel are cyan, magenta, and yellow because these are the three subtractive colors</p>
<p>Think of your printer and the CMYK ink cartridges! Where black, is the absence of color (0,0,0)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))  <span class="co"># cyan</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)) <span class="co"># Magenta</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="co"># Yellow</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># Key (black)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-27-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="why-do-we-care" class="level1">
<h1>Why do we care?</h1>
<ul>
<li><p>Pixels are the base unit of raster data and have a resolution</p></li>
<li><p>This is the X and the Y dimension of each cell in the units of the CRS</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<section id="resolution-drives-image-clarity-granulairty" class="level2">
<h2 class="anchored" data-anchor-id="resolution-drives-image-clarity-granulairty">Resolution drives image clarity (granulairty)</h2>
<ul>
<li>Higher resolution (smaller cells) = more detail, but bigger data!</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-res.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-res.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="raster-images-seek-to-discritize-the-real-world-into-cell-based-values" class="level2">
<h2 class="anchored" data-anchor-id="raster-images-seek-to-discritize-the-real-world-into-cell-based-values">Raster images seek to discritize the real world into cell-based values</h2>
<ul>
<li>Again either integer (categorical), continuous, or signal</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-rasterize-world.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="all-rasters-have-an-extent" class="level2">
<h2 class="anchored" data-anchor-id="all-rasters-have-an-extent">All rasters have an extent!</h2>
<ul>
<li>This is the same extent as a bounding box</li>
<li>Can be described as 4 values (xmin,ymin,xmax,ymax)</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-extent.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="implicity-coordinates" class="level2">
<h2 class="anchored" data-anchor-id="implicity-coordinates">Implicity Coordinates</h2>
<ul>
<li><p>Unlike vector data, the raster data model stores the coordinate of the grid cells indirectly</p></li>
<li><p>Coordinates are derived from the reference (Xmin,Ymin) the resolution, and the cell index (e.g.&nbsp;[100,150])</p></li>
<li><p>For example: If we want the coordinates of a value in the 3rd row and the 40th column of a raster matrix, we have to move from the origin (Xmin, Ymin) (3 x Xres) in x-direction and (40 x Yres) in y-direction</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-extent.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"></h2>
<ul>
<li><p>So, any image (.png, .tif, .gif) can be read as a raster‚Ä¶</p></li>
<li><p>The raster is defined by the extent and resolution of the cells</p></li>
<li><p>To be spatial, the extent (thus coordinates) must be grounded in an CRS</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">img =</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">'images/17-raster-extent.png'</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 788, 1067, 4  (nrow, ncol, nlyr)</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : 0, 1067, 0, 788  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. :  </span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source      : 17-raster-extent.png </span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names       : 17-rast~xtent_1, 17-rast~xtent_2, 17-rast~xtent_3, 17-rast~xtent_4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">plotRGB</span>(img, <span class="at">r =</span> <span class="dv">1</span>, <span class="at">g =</span> <span class="dv">2</span>, <span class="at">b =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-35-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="raster-data-in-r" class="level2">
<h2 class="anchored" data-anchor-id="raster-data-in-r">Raster Data in R</h2>
<p>A <code>SpatRast</code> represents single-layer (variable) raster data.</p>
<p>A <code>SpatRast</code> always stores the fundamental parameters that describe it. - The number of columns and rows, - The spatial extent - The Coordinate Reference System.</p>
<p>In addition, a <code>SpatRast</code> can store information about the file where raster values are stored (if there is such a file).</p>
<p>Here we construct an empty raster:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(r <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="at">ncol=</span><span class="dv">20</span>, <span class="at">nrow=</span><span class="dv">20</span>, <span class="at">xmax=</span><span class="sc">-</span><span class="dv">80</span>, <span class="at">xmin=</span><span class="sc">-</span><span class="dv">120</span>, <span class="at">ymin=</span><span class="dv">20</span>, <span class="at">ymax=</span><span class="dv">60</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 20, 20, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 2, 2  (x, y)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -120, -80, 20, 60  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="extract-diminisionality" class="level4">
<h4 class="anchored" data-anchor-id="extract-diminisionality">Extract Diminisionality ‚Ä¶</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(r)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(r)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ncell</span>(r)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 400</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nlyr</span>(r)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="raster-values" class="level2">
<h2 class="anchored" data-anchor-id="raster-values">Raster Values</h2>
<p>values can be extracted with <code>values()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]   NaN</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]   NaN</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]   NaN</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,]   NaN</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,]   NaN</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,]   NaN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assigning-a-values-as-a-vector" class="level2">
<h2 class="anchored" data-anchor-id="assigning-a-values-as-a-vector">Assigning a values as a vector</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(r) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncell</span>(r)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 20, 20, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 2, 2  (x, y)</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -120, -80, 20, 60  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) </span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :     1 </span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :   400</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]     1</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]     2</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]     3</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,]     4</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,]     5</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,]     6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-40-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="raster-is-s4" class="level2">
<h2 class="anchored" data-anchor-id="raster-is-s4">Raster is S4</h2>
<ul>
<li><p>Compared to S3, the S4 object system is much stricter, and much closer to other OO systems.</p></li>
<li><p>What does this mean for us?</p></li>
<li><p>Data is structured with a ‚Äúrepresentation‚Äù</p></li>
<li><p>which is a list of slot (or attributes), giving their names and classes, accessed with @</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(r, <span class="at">max.level =</span> <span class="dv">2</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; S4 class 'SpatRaster' [package "terra"]</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>r<span class="sc">@</span>pntr</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C++ object &lt;0x1097da8d0&gt; of class 'SpatRaster' &lt;0x11815cdd0&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>r<span class="sc">@</span>pntr<span class="sc">$</span>ncol</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Class method definition for method ncol()</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; function () </span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; {</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     " unsigned long ncol()  \n   docstring : ncol"</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     .External(list(name = "CppMethod__invoke_notvoid", address = &lt;pointer: 0x104ed9b80&gt;, </span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         dll = list(name = "Rcpp", path = "/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/Rcpp/libs/Rcpp.so", </span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             dynamicLookup = TRUE, handle = &lt;pointer: 0x7aab93b0&gt;, </span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             info = &lt;pointer: 0x104ec87b0&gt;, forceSymbols = FALSE), </span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         numParameters = -1L), &lt;pointer: 0x11815cdd0&gt;, &lt;pointer: 0x1090dab40&gt;, </span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         .pointer)</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; }</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;environment: 0x15fe28d70&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="access-via-function" class="level2">
<h2 class="anchored" data-anchor-id="access-via-function">Access via Function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ext</span>(r)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; SpatExtent : -120, -80, 20, 60 (xmin, xmax, ymin, ymax)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">crs</span>(r)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "GEOGCRS[\"WGS 84 (CRS84)\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"geodetic longitude (Lon)\",east,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"geodetic latitude (Lat)\",north,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    USAGE[\n        SCOPE[\"unknown\"],\n        AREA[\"World\"],\n        BBOX[-90,-180,90,180]],\n    ID[\"OGC\",\"CRS84\"]]"</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(r)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(r)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]     1</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]     2</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]     3</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,]     4</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,]     5</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,]     6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="multi-layers" class="level2">
<h2 class="anchored" data-anchor-id="multi-layers">Multi-layers</h2>
<div class="cell" data-figalign="center">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="images/17_multi-band.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>In many cases multi-variable raster data sets are used. Variables can related to time or measurements</p>
<p>A <code>SpatRaster</code> is a collection ofobjects with the same spatial <code>extent</code> and <code>resolution.</code></p>
<p>In essence it is a list of objects, or a 3D array.</p>
</section>
<section id="remember-our-array-data" class="level2">
<h2 class="anchored" data-anchor-id="remember-our-array-data">Remember our Array data?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">v =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">27</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [26] 26 27</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>(<span class="at">arr =</span> <span class="fu">array</span>(v, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>)))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; , , 1</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]    1    4    7</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]    2    5    8</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]    3    6    9</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; , , 2</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]   10   13   16</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]   11   14   17</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]   12   15   18</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; , , 3</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,]   19   22   25</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,]   20   23   26</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,]   21   24   27</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="an-array-is-a-single-file-so-it-can-be-rasterized" class="level2">
<h2 class="anchored" data-anchor-id="an-array-is-a-single-file-so-it-can-be-rasterized">An array is a single file so it can be ‚Äúrasterized‚Äù</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">rast</span>(arr)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-45-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="core-raster-principles" class="level1">
<h1>Core Raster Principles</h1>
<section id="bounding-box-extents" class="level2">
<h2 class="anchored" data-anchor-id="bounding-box-extents">1. Bounding Box / Extents</h2>
<p><strong>Geometries</strong> have extents that define the maximum and minimum coverage of the shape in a coordinate reference system</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/18-geom-extent.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Image Source: National Ecological Observatory Network (NEON)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="extent" class="level2">
<h2 class="anchored" data-anchor-id="extent">2. Extent</h2>
<ul>
<li><p>When dealing with objects, the extent (or bbox) is derived from the coordinate set</p></li>
<li><p>When dealing with raster data, the extent is a fondational component of the raster data structure</p>
<ul>
<li>That is, we need to know the area the raster is covering!</li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-extent.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Image Source: National Ecological Observatory Network (NEON)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="discretization" class="level2">
<h2 class="anchored" data-anchor-id="discretization">3. Discretization</h2>
<p>Once we know the <strong>extent</strong>, we need to know <em>how</em> that space is split up</p>
<p>Two complimentary bit of information can tell us this:</p>
<ul>
<li>Resolution (res)</li>
<li>Number of row and number of columns (nrow/ncol)</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/17-raster-res.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Image Source: National Ecological Observatory Network (NEON)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="so" class="level2">
<h2 class="anchored" data-anchor-id="so">So,</h2>
<p>A raster is made of an <strong>extent</strong>, and a <strong>resolution</strong> / row-column structure</p>
<ul>
<li><p>A vector of values fill that structure (same way a vector in R can have diminisons)</p>
<ul>
<li>These values are often scaled to integers to reduce file size</li>
</ul></li>
<li><p>Values are referenced in cartisian space, based on cell index</p></li>
<li><p>A CRS along with the extent, can provide spatial reference / coordinates</p></li>
</ul>
</section>
<section id="general-process" class="level2">
<h2 class="anchored" data-anchor-id="general-process">General Process</h2>
<p>Almost all remote sensing / image analysis begins with the same basic steps:</p>
<ol type="1">
<li><p>Identifying an area of interest (AOI)</p></li>
<li><p>Identifying and downloading the relevant images or products</p></li>
<li><p>Analyzing the raster products</p></li>
</ol>
<p>The definition of a AOI is critical because raster data in continuous, therefore we need to define the bounds of the study rather then the bounds of the objects</p>
<ul>
<li><strong>But</strong>, objects often (even typically) define our bounds</li>
</ul>
</section>
<section id="find-elevation-data-for-fort-collins" class="level2">
<h2 class="anchored" data-anchor-id="find-elevation-data-for-fort-collins">Find elevation data for Fort Collins:</h2>
<ol type="1">
<li>Define the AOI</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>bb <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../labs/data/uscities.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lng"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(city <span class="sc">==</span> <span class="st">"Fort Collins"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="dv">5070</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_buffer</span>(<span class="dv">50000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_bbox</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sfc</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Read data from elevation map tiles, for a specific zoom, and crop to the AOI</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>elev <span class="ot">=</span> elevatr<span class="sc">::</span><span class="fu">get_elev_raster</span>(bb, <span class="at">z =</span> <span class="dv">11</span>) <span class="sc">|&gt;</span> <span class="fu">crop</span>(bb)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">writeRaster</span>(elev, <span class="at">filename =</span> <span class="st">"data/foco-elev.tif"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>The resulting raster ‚Ä¶</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">elev =</span> <span class="fu">rast</span>(<span class="st">"data/foco-elev.tif"</span>))</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-52-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="raster-values-continuity" class="level2">
<h2 class="anchored" data-anchor-id="raster-values-continuity">Raster Values Continuity</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">values</span>(elev)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(v)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "matrix" "array"</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 11902500</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>elev</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="raster-values-1" class="level2">
<h2 class="anchored" data-anchor-id="raster-values-1">Raster Values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The length of the vector is equal to the rows * columns</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v) <span class="sc">==</span> <span class="fu">nrow</span>(elev) <span class="sc">*</span> <span class="fu">ncol</span>(elev)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># The span of the x extent divided by the resolution equals the raster rows</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>((<span class="fu">xmax</span>(elev) <span class="sc">-</span> <span class="fu">xmin</span>(elev)) <span class="sc">/</span> <span class="fu">res</span>(elev)[<span class="dv">1</span>]) <span class="sc">==</span> <span class="fu">ncol</span>(elev) </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The span of the x extent divided by the number of rows equals the raster resolution</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>((<span class="fu">xmax</span>(elev) <span class="sc">-</span> <span class="fu">xmin</span>(elev)) <span class="sc">/</span> <span class="fu">ncol</span>(elev)) <span class="sc">==</span> <span class="fu">res</span>(elev)[<span class="dv">1</span>] </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="all-image-files-are-the-same" class="level2">
<h2 class="anchored" data-anchor-id="all-image-files-are-the-same">All image files are the same!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://a.tile.openstreetmap.org/18/43803/104352.png"</span>,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="st">"data/104352.png"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>img <span class="ot">=</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="st">"data/104352.png"</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(img)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "array"</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(img)</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(img)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 256 256   3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>img[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.0000000 1.0000000 0.9333333</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rgb</span>(<span class="fl">1.0000000</span>, <span class="fl">0.9607843</span>, <span class="fl">0.8980392</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "#FFF5E5"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/18-color-picker.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Google Color Picker</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"></h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img src="data/104352.png" class="img-fluid"></p>
</div><div class="column" style="width:50%;">
<p><img src="images/18-color-picker.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="raster-algebra" class="level2">
<h2 class="anchored" data-anchor-id="raster-algebra">Raster Algebra</h2>
<ul>
<li><p>So our raster <strong>data</strong> is stored as a large numeric array/vector</p></li>
<li><p>Many generic functions allow for simple algebra on Raster objects,</p></li>
<li><p>These include:</p>
<ul>
<li><p>normal algebraic operators such as <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code></p></li>
<li><p>logical operators such as <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>,<code>==</code>, <code>!</code></p></li>
<li><p>functions like <code>abs</code>, <code>round</code>, <code>ceiling</code>, <code>floor</code>, <code>trunc</code>, <code>sqrt</code>, <code>log</code>, <code>log10</code>, <code>exp</code>, <code>cos</code>, <code>sin</code>, <code>atan</code>, <code>tan</code>, <code>max</code>, <code>min</code>, <code>range</code>, <code>prod</code>, <code>sum</code>, <code>any</code>, <code>all</code></p></li>
</ul></li>
</ul>
</section>
<section id="raster-algebra-1" class="level2">
<h2 class="anchored" data-anchor-id="raster-algebra-1">Raster Algebra</h2>
<ul>
<li><p>In these functions you can mix <code>SpatRast</code> objects with numbers, as long as the <em>first</em> argument is a raster object.</p></li>
<li><p>That means you can add 100 to a raster object but not a raster object to 100</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GOOD</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>raster <span class="sc">+</span> <span class="dv">100</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># BAD</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="dv">100</span> <span class="sc">+</span> raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="for-example" class="level3">
<h3 class="anchored" data-anchor-id="for-example">For example:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>elev <span class="sc">+</span> <span class="dv">100</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; varname     : foco-elev </span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :      1482 </span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :      4446</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(elev)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; varname     : foco-elev </span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :  3.140508 </span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :  3.638090</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="replacement" class="level2">
<h2 class="anchored" data-anchor-id="replacement">Replacement</h2>
<ul>
<li>Raster values can be replaced on a conditional statements</li>
<li>Doing this changes the underlying data!</li>
<li>If you want to retain the original data, you must make a copy of the base layer</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-61-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>elev2 <span class="ot">=</span> elev <span class="co">#&lt;&lt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>elev2[elev2 <span class="sc">&lt;=</span> <span class="dv">1500</span>] <span class="ot">=</span> <span class="cn">NA</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-62-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="modifying-a-raster" class="level2">
<h2 class="anchored" data-anchor-id="modifying-a-raster">Modifying a raster</h2>
<p>When we want to modify the <strong>extent</strong> of a raster we can <em>clip</em> it to a new bounds</p>
<p><code>crop</code>: lets you reduce the extent of a raster to the extent of another, overlapping object:</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("mikejohnson51/AOI")</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>fc <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">geocode</span>(<span class="st">"Fort Collins"</span>, <span class="at">bbox =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(elev))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fc, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-63-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>fc_elev <span class="ot">=</span> <span class="fu">crop</span>(elev, fc) <span class="co">#&lt;&lt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fc_elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-64-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="modifying-the-underlying-data" class="level2">
<h2 class="anchored" data-anchor-id="modifying-the-underlying-data">Modifying the underlying data:</h2>
<p><code>mask</code>: mask takes an input object (sf, sp, or raster) and set anything not undelying the input to a new value (default = NA)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>osm <span class="ot">=</span> osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="fu">st_bbox</span>(<span class="fu">st_transform</span>(fc,<span class="dv">4326</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_osm_feature</span>(<span class="st">"water"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">osmdata_sf</span>()</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>(<span class="at">poly =</span> osm<span class="sc">$</span>osm_polygons <span class="sc">|&gt;</span> </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(elev)))</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Simple feature collection with 181 features and 17 fields</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Bounding box:  xmin: -769181 ymin: 1977155 xmax: -753314.8 ymax: 2000444</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Projected CRS: PROJCRS["unknown",</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     BASEGEOGCRS["NAD83",</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         DATUM["North American Datum 1983",</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ELLIPSOID["GRS 1980",6378137,298.257222101004,</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 LENGTHUNIT["metre",1]]],</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PRIMEM["Greenwich",0,</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         ID["EPSG",4269]],</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     CONVERSION["Albers Equal Area",</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         METHOD["Albers Equal Area",</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",9822]],</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Latitude of false origin",23,</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8821]],</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Longitude of false origin",-96,</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8822]],</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Latitude of 1st standard parallel",29.5,</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8823]],</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Latitude of 2nd standard parallel",45.5,</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8824]],</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Easting at false origin",0,</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8826]],</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         PARAMETER["Northing at false origin",0,</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ID["EPSG",8827]]],</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     CS[Cartesian,2],</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         AXIS["easting",east,</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ORDER[1],</span></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             LENGTHUNIT["metre",1,</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 ID["EPSG",9001]]],</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         AXIS["northing",north,</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             ORDER[2],</span></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             LENGTHUNIT["metre",1,</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                 ID["EPSG",9001]]]]</span></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; First 10 features:</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            osm_id              name         alt_name area basin boat</span></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6051656   6051656              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598705 23598705          Lee Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598868 23598868              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598945 23598945      College Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599224 23599224       Warren Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599227 23599227 Harmony Reservoir             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599320 23599320              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599327 23599327              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 44074911 44074911     Lake Sherwood Nelson Reservoir &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47471957 47471957              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          description  ele gnis:feature_id intermittent landuse layer natural</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6051656         &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598705        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598868        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598945        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599224        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599227        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599320        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599327        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 44074911        &lt;NA&gt; 1512          201223         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47471957        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          place salt source     water                       geometry</span></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6051656   &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt; POLYGON ((-762901.7 1988981...</span></span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598705  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      lake POLYGON ((-765209.9 1991246...</span></span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598868  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt; POLYGON ((-767955.5 1985345...</span></span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23598945  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      lake POLYGON ((-766871.6 1989267...</span></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599224  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-760465.5 1983486...</span></span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599227  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-760046.6 1982348...</span></span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599320  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      pond POLYGON ((-762458.2 1991222...</span></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 23599327  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      pond POLYGON ((-763462.8 1992438...</span></span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 44074911  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-758628.3 1984729...</span></span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 47471957  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-764440.4 1992962...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4"></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fc_elev)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(poly, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">add  =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-66-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>ma <span class="ot">=</span>  <span class="fu">mask</span>(fc_elev, poly)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>ma2 <span class="ot">=</span> <span class="fu">mask</span>(fc_elev, poly, <span class="at">inverse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">c</span>(fc_elev, ma, ma2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-67-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="what-is-mask-doing" class="level2">
<h2 class="anchored" data-anchor-id="what-is-mask-doing">What is <code>mask</code> doing?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">*</span> <span class="dv">7</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>mask_r <span class="ot">=</span> <span class="fu">rasterize</span>(poly, fc_elev, <span class="at">background =</span> <span class="cn">NA</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mask_r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-69-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>base_mask <span class="ot">=</span> mask_r <span class="sc">*</span> fc_elev</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(base_mask)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-70-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="crop-orand-mask" class="level2">
<h2 class="anchored" data-anchor-id="crop-orand-mask">Crop or/and mask</h2>
<ul>
<li>Crop is more efficient then mask</li>
<li>Often you will want to mask and crop a raster</li>
<li>The correct way to do this is crop <em>then</em> mask</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>cm <span class="ot">=</span> <span class="fu">crop</span>(fc_elev, poly) <span class="sc">|&gt;</span>  </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mask</span>(poly)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-71-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="aggregate-and-disaggregate" class="level2">
<h2 class="anchored" data-anchor-id="aggregate-and-disaggregate">Aggregate and disaggregate</h2>
<ul>
<li><p><code>aggregate</code> and <code>disaggregate</code> allow for changing the <em>resolution</em> of a Raster object.</p></li>
<li><p>This is similar to the zoom scaling on a web map except the scale factor is not set to 2</p></li>
<li><p>For aggregate, you need to specify a function determining what to do with the grouped cell values (default = mean).</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fc_elev)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rpoly, <span class="at">add =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-73-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>agg <span class="ot">=</span> <span class="fu">aggregate</span>(fc_elev, <span class="dv">10</span>, <span class="at">fun =</span> max) <span class="co">#&lt;&lt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(agg)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rpoly, <span class="at">add =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-74-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="app" class="level2">
<h2 class="anchored" data-anchor-id="app"><code>app</code></h2>
<p>Just like a vector, we can apply functions over a raster with <code>app</code></p>
<p>These types of formulas are very useful for thresholding analysis</p>
<p><em>Question: separate Fort Collins into the higher and lower elevations</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>FUN <span class="ot">=</span> <span class="cf">function</span>(x){ <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> <span class="fu">mean</span>(x), <span class="dv">1</span>, <span class="dv">2</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>elev3 <span class="ot">=</span> <span class="fu">app</span>(elev, FUN) <span class="co">#&lt;&lt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev3, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-76-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="read-in-the-saved-raster-file" class="level2">
<h2 class="anchored" data-anchor-id="read-in-the-saved-raster-file">Read in the saved raster file</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">r =</span> <span class="fu">rast</span>(<span class="st">"data/foco-elev.tif"</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-conditional-threshold-mask" class="level2">
<h2 class="anchored" data-anchor-id="create-a-conditional-threshold-mask">Create a conditional (threshold) mask</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">=</span> <span class="cf">function</span>(x) {<span class="fu">ifelse</span>(x <span class="sc">&lt;=</span> <span class="dv">1520</span> , <span class="cn">NA</span>, <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">threshold</span>(<span class="dv">1600</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">threshold</span>(<span class="sc">-</span><span class="dv">100</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">m =</span> <span class="fu">app</span>(r, threshold))</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :     1 </span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-81-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-82-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="multiply-cell-wise" class="level2">
<h2 class="anchored" data-anchor-id="multiply-cell-wise">Multiply cell-wise</h2>
<ul>
<li>algebraic, logical, and functional operations act on a raster cell-wise</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>elev_cut <span class="ot">=</span> m <span class="sc">*</span> r</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev_cut, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">256</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-83-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="reclassify" class="level2">
<h2 class="anchored" data-anchor-id="reclassify">Reclassify</h2>
<ul>
<li><p>Reclassify is a function that allows you to change the values of a raster based on a set of rules</p></li>
<li><p>The rules are defined in a data frame with three columns:</p>
<ul>
<li><code>min</code> = the minimum value of the range</li>
<li><code>max</code> = the maximum value of the range</li>
<li><code>lab</code> = the new value to assign to that range</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">rcl =</span> <span class="fu">data.frame</span>(<span class="at">min =</span> <span class="fu">seq</span>(<span class="dv">1500</span>,<span class="dv">1590</span>,<span class="dv">10</span>), <span class="at">max =</span>  <span class="fu">seq</span>(<span class="dv">1510</span>,<span class="dv">1600</span>,<span class="dv">10</span>), <span class="at">lab =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>)))</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     min  max lab</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1500 1510   0</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1510 1520   1</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1520 1530   2</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1530 1540   3</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1540 1550   4</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1550 1560   5</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1560 1570   6</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1570 1580   7</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1580 1590   8</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1590 1600   9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">rc =</span> <span class="fu">classify</span>(elev_cut, rcl, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min value   :     2 </span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max value   :  4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">s =</span> <span class="fu">c</span>(r, m, elev_cut, rc) <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"elevation"</span>, <span class="st">"elev-mask"</span>, <span class="st">"terrain"</span>, <span class="st">"topography"</span>)))</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dimensions  : 3450, 3450, 4  (nrow, ncol, nlyr)</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; sources     : foco-elev.tif  </span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; names       : elevation, elev-mask, terrain, topography </span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; min values  :      1382,         1,    1521,          2 </span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; max values  :      4346,         1,    4346,       4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7"></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(s, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">256</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-87-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="real-example-classify-rainfall-regions-of-colorado" class="level2">
<h2 class="anchored" data-anchor-id="real-example-classify-rainfall-regions-of-colorado">Real Example: Classify Rainfall Regions of Colorado</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("mikejohnson51/climateR")</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(climateR)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">'CO'</span>) </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>({ prcp <span class="ot">=</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(AOI, <span class="st">"ppt"</span>, </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">startDate =</span> <span class="st">"2000-01-01"</span>, <span class="at">endDate =</span> <span class="st">'2005-12-31'</span>) })</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   0.257   0.087   5.208</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># More on global below ...</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>quarts <span class="ot">=</span> <span class="fu">global</span>(prcp<span class="sc">$</span>ppt, fivenum)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>(<span class="at">quarts =</span> <span class="fu">colMeans</span>(quarts))</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         X1         X2         X3         X4         X5 </span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   6.271233  18.434247  27.995890  41.608219 105.642466</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>(<span class="at">rcl =</span> <span class="fu">data.frame</span>(quarts[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], quarts[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    quarts.1.4. quarts.2.5. X1.4</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; X1    6.271233    18.43425    1</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; X2   18.434247    27.99589    2</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; X3   27.995890    41.60822    3</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; X4   41.608219   105.64247    4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>terra<span class="sc">::</span><span class="fu">classify</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), rcl, <span class="at">include.lowest=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">plot</span>(<span class="at">col =</span> blues9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-90-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="objectfield-interaction" class="level2">
<h2 class="anchored" data-anchor-id="objectfield-interaction">Object/Field Interaction</h2>
<p>For this example, we used OSM to extact the river data for the area of interest. We will talk more about OSM next week:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>foco_rivers <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"data/foco-rivers-osm.gpkg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lets-find-the-longest-river-segment-in-our-extent" class="level2">
<h2 class="anchored" data-anchor-id="lets-find-the-longest-river-segment-in-our-extent">Lets find the longest river segment <em>IN</em> our extent</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>river <span class="ot">=</span> foco_rivers <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(r)) <span class="sc">|&gt;</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_intersection</span>(<span class="fu">st_as_sfc</span>(<span class="fu">st_bbox</span>(r))) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length =</span> <span class="fu">st_length</span>(.)) <span class="sc">|&gt;</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(length, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(river, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-93-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="value-extraction" class="level2">
<h2 class="anchored" data-anchor-id="value-extraction">Value Extraction</h2>
<ul>
<li><p>Often, we want to know the profile and sinousity of a river</p></li>
<li><p>To do this, we need to know the inlet and outlet as well as the straight line connector</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>inlet  <span class="ot">=</span> <span class="fu">head</span>(<span class="fu">st_cast</span>(river, <span class="st">"POINT"</span>), <span class="dv">1</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>outlet <span class="ot">=</span> <span class="fu">tail</span>(<span class="fu">st_cast</span>(river, <span class="st">"POINT"</span>), <span class="dv">1</span>) </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>pts    <span class="ot">=</span> <span class="fu">bind_rows</span>(inlet, outlet) </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>line <span class="ot">=</span> <span class="fu">st_cast</span>(<span class="fu">st_union</span>(pts), <span class="st">"LINESTRING"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-9" class="level2">
<h2 class="anchored" data-anchor-id="section-9"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(river, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(line, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(outlet<span class="sc">$</span>geom, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="st">"red"</span>)</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(inlet<span class="sc">$</span>geom,  <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="st">"green"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-95-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sinuosity" class="level2">
<h2 class="anchored" data-anchor-id="sinuosity">Sinuosity</h2>
<p>Channel <strong>sinuosity</strong> is calculated by dividing the length of the stream channel by the straight line distance between the end points of the selected channel reach.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">sin =</span> <span class="fu">st_length</span>(river) <span class="sc">/</span> <span class="fu">st_length</span>(line))</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.400515 [1]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/19-sinuosity.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="river-slope" class="level2">
<h2 class="anchored" data-anchor-id="river-slope">River Slope:</h2>
<p>The change in elevation between the inlet/outlet divided by the length (rise/run) give us the slope of the river:</p>
<p>To calculate this, we must extract elevation values at the inlet and outlet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">elev =</span> <span class="fu">extract</span>(r, pts))</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ID foco-elev</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1      1813</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2      1675</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dv">100</span> <span class="sc">*</span> (elev<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span>[<span class="dv">1</span>] <span class="sc">-</span> elev<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span>[<span class="dv">2</span>]) <span class="sc">/</span> units<span class="sc">::</span><span class="fu">drop_units</span>(<span class="fu">st_length</span>(river))</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.600446</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="river-profile" class="level2">
<h2 class="anchored" data-anchor-id="river-profile">River profile</h2>
<p>What does the elevation profile of the river look like?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>profile <span class="ot">=</span> <span class="fu">extract</span>(r, river)<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(profile, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(zoo<span class="sc">::</span><span class="fu">rollmean</span>(profile,<span class="at">k =</span> <span class="dv">10</span>), </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">"darkred"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-101-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="map-algebra" class="level2">
<h2 class="anchored" data-anchor-id="map-algebra">Map Algebra</h2>
<ul>
<li><p>Dana Tomlin (Tomlin 1990) defined a framework for the analyizing field data stored as grided values.</p></li>
<li><p>He called this framework map algebra.</p></li>
<li><p>Map algebra operations and functions are broken down into four types:</p>
<ul>
<li><p>local</p></li>
<li><p>focal</p></li>
<li><p>zonal</p></li>
<li><p>global</p></li>
</ul></li>
</ul>
</section>
<section id="local" class="level2">
<h2 class="anchored" data-anchor-id="local">Local</h2>
<ul>
<li><p>Local operations and functions are applied to <strong>each</strong> individual cell and only involve those cells sharing the same location.</p></li>
<li><p>More than one raster can be involved in a local operation.</p></li>
<li><p>For example, rasters can be <strong>summed</strong> ( each overlapping pixels is added)</p></li>
<li><p>Local operations also include <strong>reclassification</strong> of values.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), <span class="fu">app</span>(prcp<span class="sc">$</span>ppt, sd), <span class="fu">min</span>(prcp<span class="sc">$</span>ppt), <span class="fu">max</span>(prcp<span class="sc">$</span>ppt)) <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"Mean"</span>, <span class="st">"StDev"</span>, <span class="st">"Min"</span>, <span class="st">"Max"</span>))</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>rasterVis<span class="sc">::</span><span class="fu">levelplot</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-102-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="focal" class="level2">
<h2 class="anchored" data-anchor-id="focal">Focal</h2>
<ul>
<li><p>Also referred to as ‚Äúneighborhood‚Äù operations.</p></li>
<li><p>Assigns summary values to the output cells based on the neighboring cells in the input raster.</p></li>
<li><p>For example, a cell output value can be the average of 9 neighboring input cells (including the center cell) - this acts as a smoothing function.</p></li>
</ul>
</section>
<section id="focal-1" class="level2">
<h2 class="anchored" data-anchor-id="focal-1">Focal</h2>
<ul>
<li><p>Focal operations require a window (also known as a kernel) to work over</p></li>
<li><p>Additionally a kernel also defines the weight each neighboring cell contributes to the summary statistic.</p></li>
<li><p>For example, all cells in a 3x3 neighbor could each contribute 1/9th of their value to the summarized value (i.e.&nbsp;equal weight).</p></li>
<li><p>The weight can take on a more complex form defined by a function; such weights are defined by a kernel function.</p></li>
<li><p>One popular function is a Gaussian weighted function which assigns greater weight to nearby cells than those further away (<a href="https://en.wikipedia.org/wiki/Tobler%27s_first_law_of_geography">Toblers first law</a>)</p></li>
</ul>
</section>
<section id="example-focal" class="level2">
<h2 class="anchored" data-anchor-id="example-focal">Example: Focal</h2>
<p>Lets apply a smoothing kernel to our Fort Collins elevation data over an 25x25 window, using the mean operator</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>foco <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">geocode</span>(<span class="st">"Fort Collins"</span>, <span class="at">bbox =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="fu">st_transform</span>(<span class="fu">crs</span>(r))</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>foco_elev <span class="ot">=</span> <span class="fu">crop</span>(r, foco)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">focal</span>(foco_elev, <span class="at">w=</span> <span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">25</span>), <span class="at">fun=</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results-1" class="level2">
<h2 class="anchored" data-anchor-id="results-1">Results</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(foco_elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-104-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-105-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="what-did-we-do" class="level2">
<h2 class="anchored" data-anchor-id="what-did-we-do">What did we do?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">25</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [24,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]</span></span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-49"><a href="#cb83-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-50"><a href="#cb83-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-51"><a href="#cb83-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-52"><a href="#cb83-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [24,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-53"><a href="#cb83-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(foco_elev[<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>][,<span class="dv">1</span>])</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1610.022</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(<span class="fu">values</span>(f1))[<span class="dv">1</span>]</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1610.022</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="zonal" class="level2">
<h2 class="anchored" data-anchor-id="zonal">Zonal</h2>
<ul>
<li><p>Zonal operations compute a summary values (such as the mean) from cells aggregated to some zonal unit.</p></li>
<li><p>Like focal operations, a zone and a mediating function must be defined</p></li>
<li><p>The most basis example of a zonal function is aggregation!</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(foco_elev, <span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-108-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="zonal-statisics-more-advanced" class="level2">
<h2 class="anchored" data-anchor-id="zonal-statisics-more-advanced">Zonal Statisics (More advanced)</h2>
<ul>
<li><p>For more complicated object zones, <a href="https://github.com/isciences/exactextractr">exactextractr</a> is a fast and effiecient R utility that binds the C++ <code>exactextract</code> tool.</p></li>
<li><p>What is the county level mean January rainfall in California?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>AOI <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"CO"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>AOI<span class="sc">$</span>janPTT <span class="ot">=</span> exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(prcp<span class="sc">$</span>ppt<span class="sc">$</span><span class="st">`</span><span class="at">ppt_2000-01-01_total</span><span class="st">`</span>, AOI, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(AOI[<span class="st">'janPTT'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-109-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-about-the-us" class="level2">
<h2 class="anchored" data-anchor-id="what-about-the-us">What about the US?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">&lt;-</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"conus"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>jan <span class="ot">&lt;-</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(counties, <span class="st">"ppt"</span>, <span class="at">startDate =</span> <span class="st">"2000-01-01"</span>) </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>counties<span class="sc">$</span>janPTT <span class="ot">&lt;-</span>  exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(jan<span class="sc">$</span>ppt, counties, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(counties[<span class="st">'janPTT'</span>], <span class="at">border =</span> <span class="cn">NA</span>, <span class="at">key.pos =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-111-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="global" class="level2">
<h2 class="anchored" data-anchor-id="global">Global</h2>
<ul>
<li><p>Global operations make use of <em>some</em> or <em>all</em> input cells when computing an output cell value.</p></li>
<li><p>They are a special case of zonal operations with the <em>entire</em> raster represents a single zone.</p></li>
<li><p>Examples include generating descriptive statistics for the entire raster dataset</p></li>
</ul>
</section>
<section id="summary-values" class="level2">
<h2 class="anchored" data-anchor-id="summary-values">Summary Values</h2>
<p><code>global</code>: computes statistics for the values of each layer in a Raster* object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>elev <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">'data/foco-elev.tif'</span>)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">global</span>(elev, mean)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;               mean</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foco-elev 1887.874</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">values</span>(elev), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1887.874</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="why-not-just-mean" class="level1">
<h1>Why not just <code>mean()</code></h1>
<p>In the terra package, functions like <code>max</code>, <code>min</code>, and <code>mean</code>, return a new SpatRast* object (with a value computed for each cell).</p>
<p>In contrast, <code>global</code> returns a single value, computed from the all the values of a layer.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">c</span>(elev, elev<span class="sc">^</span><span class="dv">2</span>, elev<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(s) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-113-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">global</span>(s, mean)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                     mean</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foco-elev      1887.8738</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foco-elev.1 3802035.3412</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; foco-elev.2     943.9369</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<section id="mean-monthly-rainfall-for-colorado" class="level2">
<h2 class="anchored" data-anchor-id="mean-monthly-rainfall-for-colorado">Mean Monthly Rainfall for Colorado</h2>
<div class="columns">
<div class="column" style="width:50%;">
<section id="global-1" class="level3">
<h3 class="anchored" data-anchor-id="global-1">global</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, max)<span class="sc">$</span>max, <span class="at">type =</span> <span class="st">"l"</span>, </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"rainfall"</span>, <span class="at">xlab =</span> <span class="st">"month since 2000-01"</span>)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, min)<span class="sc">$</span>min, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, mean)<span class="sc">$</span>mean, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"darkred"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-115-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="mean" class="level3">
<h3 class="anchored" data-anchor-id="mean">mean()</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), <span class="at">col =</span> blues9)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(AOI, <span class="at">add =</span><span class="cn">TRUE</span>, <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-116-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</div>
</div>
</section>
</section>
<section id="kmeans-over-to-raster-data" class="level1">
<h1>Kmeans over to Raster Data!</h1>
<ul>
<li>each layer of a SpatRaster is a layer</li>
<li>each layer is a vector of values</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(climateR)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">"ppt"</span>, <span class="st">"tmax"</span>, <span class="st">"tmin"</span>, <span class="st">"srad"</span>, <span class="st">"q"</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>AOI   <span class="ot">&lt;-</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"CO"</span>)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>co <span class="ot">&lt;-</span>  climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(AOI, params, <span class="at">startDate =</span> <span class="st">"2018-10-01"</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rast</span>() <span class="sc">|&gt;</span> </span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="colorado-october-2018-climate" class="level2">
<h2 class="anchored" data-anchor-id="colorado-october-2018-climate">Colorado October 2018 climate</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(co)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-118-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="raster-layers-are-vectors" class="level2">
<h2 class="anchored" data-anchor-id="raster-layers-are-vectors">Raster layers are vectors!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>values <span class="ot">=</span> <span class="fu">values</span>(co)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(values)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       ppt tmax  tmin srad    q</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] 37.8  1.9 125.1 12.1 -2.4</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,] 39.2  2.0 124.2 10.8 -2.8</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,] 39.2  2.0 124.3 10.6 -2.9</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,] 37.7  1.9 124.6 11.6 -2.4</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,] 36.3  1.8 125.0 12.2 -2.2</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,] 34.8  1.7 125.0 13.0 -2.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-prep" class="level2">
<h2 class="anchored" data-anchor-id="data-prep">Data Prep</h2>
<ul>
<li>Identify NA indices for latter reference</li>
<li>Remove NA values</li>
<li>Scale</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">apply</span>(<span class="fu">is.na</span>(values), <span class="dv">1</span>, any))</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>v   <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(values)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>vs  <span class="ot">&lt;-</span> <span class="fu">scale</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-10" class="level2">
<h2 class="anchored" data-anchor-id="section-10"></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>(E <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(vs, <span class="dv">5</span>, <span class="at">iter.max =</span> <span class="dv">100</span>))</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; K-means clustering with 5 clusters of sizes 542, 1471, 3619, 4677, 6521</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Cluster means:</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;          ppt       tmax       tmin       srad          q</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  3.2106644  4.8126020 -0.5710265 -1.7692979 -1.2335931</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1.7381744  0.2854842 -0.1759393 -0.3587139 -0.0132010</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 -0.2805363 -0.1935889  1.4262188  0.5651088  0.5636098</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  0.1069063 -0.1604128 -0.7891111 -1.0697441 -1.1933422</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 -0.5799378 -0.2419152 -0.1384006  0.6815967  0.6486097</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Clustering vector:</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     [1] 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [37] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [73] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [109] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [145] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [181] 5 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [217] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [253] 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [289] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [325] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [361] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [397] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5</span></span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [433] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [469] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [505] 5 5 5 5 5 5 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [541] 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-29"><a href="#cb98-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [577] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-30"><a href="#cb98-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [613] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-31"><a href="#cb98-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [649] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-32"><a href="#cb98-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [685] 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4</span></span>
<span id="cb98-33"><a href="#cb98-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [721] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-34"><a href="#cb98-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [757] 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-35"><a href="#cb98-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [793] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-36"><a href="#cb98-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [829] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 5 5 5 5 5 5</span></span>
<span id="cb98-37"><a href="#cb98-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [865] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-38"><a href="#cb98-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [901] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-39"><a href="#cb98-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [937] 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-40"><a href="#cb98-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [973] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-41"><a href="#cb98-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1009] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-42"><a href="#cb98-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1045] 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-43"><a href="#cb98-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1081] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-44"><a href="#cb98-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1117] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-45"><a href="#cb98-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1153] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-46"><a href="#cb98-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1189] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4</span></span>
<span id="cb98-47"><a href="#cb98-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1225] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-48"><a href="#cb98-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1261] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-49"><a href="#cb98-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1297] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-50"><a href="#cb98-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1333] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 5 5 5 5 5 5 5</span></span>
<span id="cb98-51"><a href="#cb98-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1369] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-52"><a href="#cb98-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1405] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-53"><a href="#cb98-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1441] 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-54"><a href="#cb98-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1477] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-55"><a href="#cb98-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1513] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-56"><a href="#cb98-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1549] 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-57"><a href="#cb98-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1585] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-58"><a href="#cb98-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1621] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-59"><a href="#cb98-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1657] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-60"><a href="#cb98-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1693] 5 5 5 5 5 5 5 5 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4</span></span>
<span id="cb98-61"><a href="#cb98-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1729] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-62"><a href="#cb98-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1765] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-63"><a href="#cb98-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1801] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-64"><a href="#cb98-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1837] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-65"><a href="#cb98-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1873] 5 5 5 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-66"><a href="#cb98-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1909] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-67"><a href="#cb98-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1945] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-68"><a href="#cb98-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1981] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-69"><a href="#cb98-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2017] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-70"><a href="#cb98-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2053] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-71"><a href="#cb98-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2089] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-72"><a href="#cb98-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2125] 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-73"><a href="#cb98-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2161] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-74"><a href="#cb98-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2197] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-75"><a href="#cb98-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2233] 5 4 4 4 4 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-76"><a href="#cb98-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2269] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-77"><a href="#cb98-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2305] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-78"><a href="#cb98-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2341] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-79"><a href="#cb98-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2377] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-80"><a href="#cb98-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2413] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-81"><a href="#cb98-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2449] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-82"><a href="#cb98-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2485] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-83"><a href="#cb98-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2521] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 5 5</span></span>
<span id="cb98-84"><a href="#cb98-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2557] 5 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-85"><a href="#cb98-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2593] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-86"><a href="#cb98-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2629] 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-87"><a href="#cb98-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2665] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-88"><a href="#cb98-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2701] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5</span></span>
<span id="cb98-89"><a href="#cb98-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2737] 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-90"><a href="#cb98-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2773] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-91"><a href="#cb98-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2809] 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-92"><a href="#cb98-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2845] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-93"><a href="#cb98-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2881] 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4</span></span>
<span id="cb98-94"><a href="#cb98-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2917] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-95"><a href="#cb98-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2953] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-96"><a href="#cb98-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2989] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-97"><a href="#cb98-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3025] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-98"><a href="#cb98-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3061] 5 5 5 5 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-99"><a href="#cb98-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3097] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-100"><a href="#cb98-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3133] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-101"><a href="#cb98-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3169] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-102"><a href="#cb98-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3205] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-103"><a href="#cb98-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3241] 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-104"><a href="#cb98-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3277] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-105"><a href="#cb98-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3313] 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-106"><a href="#cb98-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3349] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-107"><a href="#cb98-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3385] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-108"><a href="#cb98-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3421] 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-109"><a href="#cb98-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3457] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-110"><a href="#cb98-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3493] 5 5 3 5 5 5 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-111"><a href="#cb98-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3529] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-112"><a href="#cb98-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3565] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-113"><a href="#cb98-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3601] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-114"><a href="#cb98-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3637] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 3 3 3 3 3 3 3 3 5</span></span>
<span id="cb98-115"><a href="#cb98-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3673] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-116"><a href="#cb98-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3709] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-117"><a href="#cb98-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3745] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-118"><a href="#cb98-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3781] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-119"><a href="#cb98-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3817] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-120"><a href="#cb98-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3853] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-121"><a href="#cb98-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3889] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-122"><a href="#cb98-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3925] 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-123"><a href="#cb98-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3961] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-124"><a href="#cb98-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3997] 4 4 4 5 5 5 5 5 5 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-125"><a href="#cb98-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4033] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-126"><a href="#cb98-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4069] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4</span></span>
<span id="cb98-127"><a href="#cb98-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4105] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-128"><a href="#cb98-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4141] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 3 3</span></span>
<span id="cb98-129"><a href="#cb98-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4177] 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-130"><a href="#cb98-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4213] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-131"><a href="#cb98-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4249] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-132"><a href="#cb98-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4285] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-133"><a href="#cb98-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4321] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 3 3 3 3 3 3 3 3 3 5 5 5 5</span></span>
<span id="cb98-134"><a href="#cb98-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4357] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-135"><a href="#cb98-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4393] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-136"><a href="#cb98-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4429] 5 5 5 4 4 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-137"><a href="#cb98-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4465] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-138"><a href="#cb98-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4501] 4 4 4 4 4 4 4 4 4 4 5 5 5 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-139"><a href="#cb98-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4537] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-140"><a href="#cb98-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4573] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 5 5 5 5 5</span></span>
<span id="cb98-141"><a href="#cb98-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4609] 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-142"><a href="#cb98-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4645] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-143"><a href="#cb98-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4681] 5 5 5 5 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-144"><a href="#cb98-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4717] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-145"><a href="#cb98-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4753] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-146"><a href="#cb98-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4789] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-147"><a href="#cb98-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4825] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 3 3 3 3 3 3</span></span>
<span id="cb98-148"><a href="#cb98-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4861] 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-149"><a href="#cb98-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4897] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-150"><a href="#cb98-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4933] 5 5 5 5 5 5 5 5 5 5 4 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-151"><a href="#cb98-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4969] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-152"><a href="#cb98-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5005] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 3 3 3 3 3 3 3 3 3 3 5 5 3 5 5 5 5</span></span>
<span id="cb98-153"><a href="#cb98-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5041] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-154"><a href="#cb98-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5077] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-155"><a href="#cb98-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5113] 4 4 5 5 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-156"><a href="#cb98-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5149] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-157"><a href="#cb98-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5185] 4 4 4 4 4 4 4 5 5 3 3 3 3 3 3 3 3 3 3 3 5 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-158"><a href="#cb98-158" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5221] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-159"><a href="#cb98-159" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5257] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 5 4 4 4 4 4</span></span>
<span id="cb98-160"><a href="#cb98-160" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5293] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-161"><a href="#cb98-161" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5329] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-162"><a href="#cb98-162" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5365] 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-163"><a href="#cb98-163" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5401] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-164"><a href="#cb98-164" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5437] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-165"><a href="#cb98-165" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5473] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-166"><a href="#cb98-166" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5509] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-167"><a href="#cb98-167" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5545] 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-168"><a href="#cb98-168" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5581] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-169"><a href="#cb98-169" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5617] 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-170"><a href="#cb98-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5653] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-171"><a href="#cb98-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5689] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-172"><a href="#cb98-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5725] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-173"><a href="#cb98-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5761] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4</span></span>
<span id="cb98-174"><a href="#cb98-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5797] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-175"><a href="#cb98-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5833] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-176"><a href="#cb98-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5869] 4 4 4 4 5 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-177"><a href="#cb98-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5905] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-178"><a href="#cb98-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5941] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-179"><a href="#cb98-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5977] 4 4 4 4 5 5 5 4 4 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-180"><a href="#cb98-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6013] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 3 3 3 3</span></span>
<span id="cb98-181"><a href="#cb98-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6049] 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-182"><a href="#cb98-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6085] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-183"><a href="#cb98-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6121] 5 2 5 5 5 5 5 5 5 5 4 4 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5</span></span>
<span id="cb98-184"><a href="#cb98-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6157] 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-185"><a href="#cb98-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6193] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-186"><a href="#cb98-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6229] 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-187"><a href="#cb98-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6265] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-188"><a href="#cb98-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6301] 5 4 5 5 5 5 5 4 5 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-189"><a href="#cb98-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6337] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-190"><a href="#cb98-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6373] 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5</span></span>
<span id="cb98-191"><a href="#cb98-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6409] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-192"><a href="#cb98-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6445] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 5 5 5 5 5 5 4</span></span>
<span id="cb98-193"><a href="#cb98-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6481] 5 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-194"><a href="#cb98-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6517] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-195"><a href="#cb98-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6553] 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-196"><a href="#cb98-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6589] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-197"><a href="#cb98-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6625] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 5 5 5 5 5 5 4 5 5 5 5 4 4 4 4</span></span>
<span id="cb98-198"><a href="#cb98-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6661] 4 4 4 2 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-199"><a href="#cb98-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6697] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-200"><a href="#cb98-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6733] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-201"><a href="#cb98-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6769] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-202"><a href="#cb98-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6805] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-203"><a href="#cb98-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6841] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-204"><a href="#cb98-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6877] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-205"><a href="#cb98-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6913] 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-206"><a href="#cb98-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6949] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-207"><a href="#cb98-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6985] 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-208"><a href="#cb98-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7021] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-209"><a href="#cb98-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7057] 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 3 3 5 5</span></span>
<span id="cb98-210"><a href="#cb98-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7093] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-211"><a href="#cb98-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7129] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-212"><a href="#cb98-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7165] 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-213"><a href="#cb98-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7201] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4</span></span>
<span id="cb98-214"><a href="#cb98-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7237] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 3 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-215"><a href="#cb98-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7273] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-216"><a href="#cb98-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7309] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 4 4 4 4 4</span></span>
<span id="cb98-217"><a href="#cb98-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7345] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-218"><a href="#cb98-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7381] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4 4 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-219"><a href="#cb98-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7417] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-220"><a href="#cb98-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7453] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-221"><a href="#cb98-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7489] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-222"><a href="#cb98-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7525] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-223"><a href="#cb98-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7561] 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-224"><a href="#cb98-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7597] 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-225"><a href="#cb98-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7633] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-226"><a href="#cb98-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7669] 5 5 5 5 5 5 5 5 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-227"><a href="#cb98-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7705] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-228"><a href="#cb98-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7741] 3 3 3 3 3 3 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5</span></span>
<span id="cb98-229"><a href="#cb98-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7777] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-230"><a href="#cb98-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7813] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 4 4</span></span>
<span id="cb98-231"><a href="#cb98-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7849] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-232"><a href="#cb98-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7885] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 4 4 3 3 4 4 4 3</span></span>
<span id="cb98-233"><a href="#cb98-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7921] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 3 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-234"><a href="#cb98-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7957] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-235"><a href="#cb98-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7993] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-236"><a href="#cb98-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8029] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-237"><a href="#cb98-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8065] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 4 4 4 4 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-238"><a href="#cb98-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8101] 3 3 3 3 3 3 3 3 3 3 3 3 3 5 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-239"><a href="#cb98-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8137] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-240"><a href="#cb98-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8173] 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-241"><a href="#cb98-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8209] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-242"><a href="#cb98-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8245] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-243"><a href="#cb98-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8281] 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-244"><a href="#cb98-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8317] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4</span></span>
<span id="cb98-245"><a href="#cb98-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8353] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-246"><a href="#cb98-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8389] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-247"><a href="#cb98-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8425] 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5</span></span>
<span id="cb98-248"><a href="#cb98-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8461] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-249"><a href="#cb98-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8497] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-250"><a href="#cb98-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8533] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-251"><a href="#cb98-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8569] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3</span></span>
<span id="cb98-252"><a href="#cb98-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8605] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-253"><a href="#cb98-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8641] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-254"><a href="#cb98-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8677] 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 2 4 4 4 2 5 5 2 2 2 4 4 4 4 4 4 2 4 4 4 4</span></span>
<span id="cb98-255"><a href="#cb98-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8713] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-256"><a href="#cb98-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8749] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-257"><a href="#cb98-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8785] 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-258"><a href="#cb98-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8821] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 5 5 5 5</span></span>
<span id="cb98-259"><a href="#cb98-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8857] 5 5 5 5 5 2 2 2 2 5 5 5 5 5 5 5 4 4 2 2 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-260"><a href="#cb98-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8893] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-261"><a href="#cb98-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8929] 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-262"><a href="#cb98-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8965] 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-263"><a href="#cb98-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9001] 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-264"><a href="#cb98-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9037] 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-265"><a href="#cb98-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9073] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-266"><a href="#cb98-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9109] 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5</span></span>
<span id="cb98-267"><a href="#cb98-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9145] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-268"><a href="#cb98-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9181] 5 5 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-269"><a href="#cb98-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9217] 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-270"><a href="#cb98-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9253] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-271"><a href="#cb98-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9289] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-272"><a href="#cb98-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9325] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2</span></span>
<span id="cb98-273"><a href="#cb98-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9361] 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-274"><a href="#cb98-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9397] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-275"><a href="#cb98-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9433] 4 4 4 4 4 4 4 4 4 3 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-276"><a href="#cb98-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9469] 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-277"><a href="#cb98-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9505] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5</span></span>
<span id="cb98-278"><a href="#cb98-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9541] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-279"><a href="#cb98-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9577] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3</span></span>
<span id="cb98-280"><a href="#cb98-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9613] 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-281"><a href="#cb98-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9649] 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-282"><a href="#cb98-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9685] 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-283"><a href="#cb98-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9721] 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-284"><a href="#cb98-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9757] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4 4 4 4 4 4 4 3 3</span></span>
<span id="cb98-285"><a href="#cb98-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9793] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 3 5 5 5 5 5 5 5</span></span>
<span id="cb98-286"><a href="#cb98-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9829] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 5 5 5</span></span>
<span id="cb98-287"><a href="#cb98-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9865] 5 5 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-288"><a href="#cb98-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9901] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 4 4 4</span></span>
<span id="cb98-289"><a href="#cb98-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9937] 4 4 4 4 4 4 4 4 4 4 3 4 4 3 3 3 3 3 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-290"><a href="#cb98-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9973] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-291"><a href="#cb98-291" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10009] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 5 5 5 5 2 2 2 2 2 2 2</span></span>
<span id="cb98-292"><a href="#cb98-292" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10045] 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-293"><a href="#cb98-293" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10081] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-294"><a href="#cb98-294" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10117] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-295"><a href="#cb98-295" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10153] 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-296"><a href="#cb98-296" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10189] 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5</span></span>
<span id="cb98-297"><a href="#cb98-297" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10225] 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-298"><a href="#cb98-298" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10261] 4 4 4 4 4 4 4 4 4 4 4 4 5 3 3 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-299"><a href="#cb98-299" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10297] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-300"><a href="#cb98-300" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10333] 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-301"><a href="#cb98-301" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10369] 5 5 2 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 2 4</span></span>
<span id="cb98-302"><a href="#cb98-302" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10405] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-303"><a href="#cb98-303" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10441] 4 4 5 3 3 3 4 3 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-304"><a href="#cb98-304" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10477] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-305"><a href="#cb98-305" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10513] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 5 2 5 5 5 5</span></span>
<span id="cb98-306"><a href="#cb98-306" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10549] 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-307"><a href="#cb98-307" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10585] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 4</span></span>
<span id="cb98-308"><a href="#cb98-308" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10621] 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-309"><a href="#cb98-309" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10657] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-310"><a href="#cb98-310" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10693] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 5 5 5 5 5 5 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-311"><a href="#cb98-311" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10729] 2 2 2 2 2 2 2 5 5 5 5 5 5 5 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-312"><a href="#cb98-312" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10765] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-313"><a href="#cb98-313" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10801] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-314"><a href="#cb98-314" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10837] 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-315"><a href="#cb98-315" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10873] 5 5 5 5 5 5 5 5 2 2 5 5 2 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5</span></span>
<span id="cb98-316"><a href="#cb98-316" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10909] 5 5 5 5 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-317"><a href="#cb98-317" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10945] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-318"><a href="#cb98-318" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10981] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-319"><a href="#cb98-319" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11017] 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2</span></span>
<span id="cb98-320"><a href="#cb98-320" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11053] 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 2 2 4 4 4 4</span></span>
<span id="cb98-321"><a href="#cb98-321" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11089] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-322"><a href="#cb98-322" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11125] 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-323"><a href="#cb98-323" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11161] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-324"><a href="#cb98-324" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11197] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 5 5 5 5 2 5 5 5 5</span></span>
<span id="cb98-325"><a href="#cb98-325" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11233] 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-326"><a href="#cb98-326" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11269] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 3 3 3</span></span>
<span id="cb98-327"><a href="#cb98-327" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11305] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-328"><a href="#cb98-328" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11341] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-329"><a href="#cb98-329" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11377] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 5 5 2 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2</span></span>
<span id="cb98-330"><a href="#cb98-330" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11413] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 4 4 4 4</span></span>
<span id="cb98-331"><a href="#cb98-331" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11449] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-332"><a href="#cb98-332" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11485] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-333"><a href="#cb98-333" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11521] 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-334"><a href="#cb98-334" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11557] 5 5 5 5 2 5 5 5 5 2 2 2 2 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-335"><a href="#cb98-335" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11593] 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-336"><a href="#cb98-336" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11629] 4 4 4 4 4 4 4 3 3 4 4 1 4 4 4 3 3 3 3 3 3 3 3 3 4 4 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-337"><a href="#cb98-337" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11665] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5</span></span>
<span id="cb98-338"><a href="#cb98-338" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11701] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 5 5 5 2</span></span>
<span id="cb98-339"><a href="#cb98-339" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11737] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 2 4 4</span></span>
<span id="cb98-340"><a href="#cb98-340" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11773] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3</span></span>
<span id="cb98-341"><a href="#cb98-341" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11809] 4 4 1 4 4 4 3 3 3 3 3 3 3 3 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-342"><a href="#cb98-342" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11845] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-343"><a href="#cb98-343" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11881] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 5 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-344"><a href="#cb98-344" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11917] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 2 4 4 1 1 1 4 4 4 4 4</span></span>
<span id="cb98-345"><a href="#cb98-345" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11953] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 4 2 4 4 4 3 3 3 3</span></span>
<span id="cb98-346"><a href="#cb98-346" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11989] 3 3 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-347"><a href="#cb98-347" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12025] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-348"><a href="#cb98-348" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12061] 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-349"><a href="#cb98-349" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12097] 2 2 2 2 2 2 2 2 2 2 1 1 2 2 1 1 4 4 1 1 1 1 4 4 2 2 1 1 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-350"><a href="#cb98-350" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12133] 4 4 4 4 4 4 5 5 5 5 3 3 3 3 3 3 3 4 2 2 4 4 4 3 3 3 3 3 4 4 4 4 4 4 3 3</span></span>
<span id="cb98-351"><a href="#cb98-351" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12169] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-352"><a href="#cb98-352" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12205] 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-353"><a href="#cb98-353" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12241] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-354"><a href="#cb98-354" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12277] 1 1 2 1 1 1 4 4 1 1 1 4 4 4 1 1 1 1 1 2 2 2 2 4 4 4 4 4 4 4 4 4 4 3 3 3</span></span>
<span id="cb98-355"><a href="#cb98-355" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12313] 3 3 3 3 3 3 3 3 2 1 4 4 4 4 3 3 3 3 3 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-356"><a href="#cb98-356" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12349] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5</span></span>
<span id="cb98-357"><a href="#cb98-357" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12385] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-358"><a href="#cb98-358" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12421] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 2 2 1 1 2 1 1 1 2 4 1 1 1</span></span>
<span id="cb98-359"><a href="#cb98-359" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12457] 1 1 1 1 1 1 2 1 1 1 4 4 4 2 4 4 4 4 4 2 4 4 4 5 3 3 3 3 3 3 3 3 3 3 3 4</span></span>
<span id="cb98-360"><a href="#cb98-360" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12493] 1 4 4 4 3 3 3 3 3 3 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-361"><a href="#cb98-361" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12529] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-362"><a href="#cb98-362" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12565] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-363"><a href="#cb98-363" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12601] 2 2 2 2 2 2 2 2 2 1 1 1 1 1 2 1 2 2 1 1 1 1 2 2 1 1 1 1 1 1 1 2 2 1 1 1</span></span>
<span id="cb98-364"><a href="#cb98-364" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12637] 1 2 2 1 1 2 2 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 4 3 3 3 3 3</span></span>
<span id="cb98-365"><a href="#cb98-365" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12673] 3 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-366"><a href="#cb98-366" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12709] 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-367"><a href="#cb98-367" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12745] 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-368"><a href="#cb98-368" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12781] 2 1 1 1 1 1 2 2 1 1 1 1 4 1 1 1 1 2 2 1 1 1 1 2 1 1 1 1 1 1 1 1 2 4 4 2</span></span>
<span id="cb98-369"><a href="#cb98-369" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12817] 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 1 2 2 4 4 3 3 3 3 3 3 4 2 2 4 3 3 3 3</span></span>
<span id="cb98-370"><a href="#cb98-370" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12853] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-371"><a href="#cb98-371" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12889] 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2</span></span>
<span id="cb98-372"><a href="#cb98-372" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12925] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 2 1 1 1 2 1 2 2 1</span></span>
<span id="cb98-373"><a href="#cb98-373" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12961] 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 4 4 4 4 4 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-374"><a href="#cb98-374" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12997] 3 3 3 3 3 3 3 4 1 1 1 4 3 3 3 3 3 3 3 2 4 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-375"><a href="#cb98-375" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13033] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5</span></span>
<span id="cb98-376"><a href="#cb98-376" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13069] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-377"><a href="#cb98-377" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13105] 2 2 2 2 2 2 1 2 2 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 2 1 1 1</span></span>
<span id="cb98-378"><a href="#cb98-378" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13141] 4 4 2 1 1 1 1 1 1 1 1 1 1 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 1</span></span>
<span id="cb98-379"><a href="#cb98-379" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13177] 1 4 3 3 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-380"><a href="#cb98-380" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13213] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-381"><a href="#cb98-381" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13249] 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2</span></span>
<span id="cb98-382"><a href="#cb98-382" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13285] 2 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 2 2 4 2 1 1 4 4 4 4 2 1 1 1 1 1</span></span>
<span id="cb98-383"><a href="#cb98-383" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13321] 2 2 2 2 2 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-384"><a href="#cb98-384" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13357] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-385"><a href="#cb98-385" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13393] 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-386"><a href="#cb98-386" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13429] 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1</span></span>
<span id="cb98-387"><a href="#cb98-387" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13465] 1 1 2 2 1 1 1 2 1 2 2 2 4 4 2 2 2 1 1 2 2 2 1 1 1 1 2 4 2 2 4 3 3 3 3 3</span></span>
<span id="cb98-388"><a href="#cb98-388" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13501] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-389"><a href="#cb98-389" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13537] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5</span></span>
<span id="cb98-390"><a href="#cb98-390" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13573] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-391"><a href="#cb98-391" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13609] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 1 1 1 1 1 1 1 1 2 1 2 2 1 1 1 1 2 2</span></span>
<span id="cb98-392"><a href="#cb98-392" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13645] 2 2 1 2 4 4 2 1 1 2 2 1 4 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-393"><a href="#cb98-393" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13681] 3 3 3 3 3 3 2 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-394"><a href="#cb98-394" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13717] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-395"><a href="#cb98-395" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13753] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-396"><a href="#cb98-396" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13789] 2 2 2 2 2 2 2 2 1 2 1 1 2 2 1 1 2 1 2 1 1 1 1 1 1 1 1 1 1 1 2 4 2 1 1 2</span></span>
<span id="cb98-397"><a href="#cb98-397" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13825] 1 1 2 2 2 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 1 4 4 3</span></span>
<span id="cb98-398"><a href="#cb98-398" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13861] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-399"><a href="#cb98-399" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13897] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-400"><a href="#cb98-400" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13933] 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-401"><a href="#cb98-401" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13969] 2 2 2 2 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 1 1 1 1 1 1 1 2 2 2 2 2 2 4</span></span>
<span id="cb98-402"><a href="#cb98-402" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14005] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 1 2 2 2 4 2 4 3 3 3 3 3 3 3</span></span>
<span id="cb98-403"><a href="#cb98-403" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14041] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-404"><a href="#cb98-404" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14077] 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 2</span></span>
<span id="cb98-405"><a href="#cb98-405" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14113] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1</span></span>
<span id="cb98-406"><a href="#cb98-406" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14149] 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 2 2 2 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-407"><a href="#cb98-407" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14185] 3 3 3 3 3 3 3 3 3 3 3 1 2 2 1 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-408"><a href="#cb98-408" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14221] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5</span></span>
<span id="cb98-409"><a href="#cb98-409" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14257] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-410"><a href="#cb98-410" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14293] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 2 1 1 2 1 2 2 2 2 1 1</span></span>
<span id="cb98-411"><a href="#cb98-411" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14329] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-412"><a href="#cb98-412" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14365] 3 1 1 1 2 2 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-413"><a href="#cb98-413" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14401] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-414"><a href="#cb98-414" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14437] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-415"><a href="#cb98-415" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14473] 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 2 1 2 2 1 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-416"><a href="#cb98-416" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14509] 1 1 1 1 1 1 1 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 3 3 3 3 3 3</span></span>
<span id="cb98-417"><a href="#cb98-417" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14545] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-418"><a href="#cb98-418" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14581] 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-419"><a href="#cb98-419" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14617] 5 5 5 5 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-420"><a href="#cb98-420" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14653] 2 2 2 1 2 2 2 2 1 2 2 2 2 2 2 2 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2</span></span>
<span id="cb98-421"><a href="#cb98-421" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14689] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-422"><a href="#cb98-422" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14725] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-423"><a href="#cb98-423" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14761] 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3</span></span>
<span id="cb98-424"><a href="#cb98-424" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14797] 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-425"><a href="#cb98-425" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14833] 2 2 2 2 2 2 1 1 2 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-426"><a href="#cb98-426" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14869] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-427"><a href="#cb98-427" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14905] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-428"><a href="#cb98-428" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14941] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 3 2 2 2 3 3 2 2 2 2</span></span>
<span id="cb98-429"><a href="#cb98-429" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14977] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-430"><a href="#cb98-430" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15013] 2 2 2 1 1 1 1 1 1 1 1 1 1 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-431"><a href="#cb98-431" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15049] 3 3 3 2 2 2 2 3 3 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-432"><a href="#cb98-432" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15085] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-433"><a href="#cb98-433" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15121] 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-434"><a href="#cb98-434" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15157] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-435"><a href="#cb98-435" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15193] 1 1 1 1 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 1 2 3 2 2</span></span>
<span id="cb98-436"><a href="#cb98-436" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15229] 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-437"><a href="#cb98-437" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15265] 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-438"><a href="#cb98-438" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15301] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-439"><a href="#cb98-439" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15337] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 3 3 3 3</span></span>
<span id="cb98-440"><a href="#cb98-440" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15373] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-441"><a href="#cb98-441" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15409] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5</span></span>
<span id="cb98-442"><a href="#cb98-442" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15445] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 2 2 3 3</span></span>
<span id="cb98-443"><a href="#cb98-443" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15481] 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-444"><a href="#cb98-444" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15517] 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-445"><a href="#cb98-445" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15553] 3 3 3 3 3 3 3 3 2 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-446"><a href="#cb98-446" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15589] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-447"><a href="#cb98-447" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15625] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 2 2 3 3 3 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-448"><a href="#cb98-448" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15661] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-449"><a href="#cb98-449" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15697] 1 1 1 1 1 1 1 1 1 1 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2</span></span>
<span id="cb98-450"><a href="#cb98-450" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15733] 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-451"><a href="#cb98-451" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15769] 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-452"><a href="#cb98-452" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15805] 5 5 5 5 5 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-453"><a href="#cb98-453" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15841] 2 2 2 2 2 2 2 2 2 2 2 2 3 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-454"><a href="#cb98-454" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15877] 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 1 1 2 3 3 3 3 3 3</span></span>
<span id="cb98-455"><a href="#cb98-455" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15913] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-456"><a href="#cb98-456" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15949] 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3</span></span>
<span id="cb98-457"><a href="#cb98-457" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15985] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 3 3 3 3 3 3 3 3 3 2 2 2</span></span>
<span id="cb98-458"><a href="#cb98-458" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16021] 3 3 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 2 1 1 1 1 1 1 1 1 1 2 2 2 3 3 3 3 3 3</span></span>
<span id="cb98-459"><a href="#cb98-459" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16057] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 1 1 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-460"><a href="#cb98-460" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16093] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-461"><a href="#cb98-461" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16129] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-462"><a href="#cb98-462" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16165] 3 3 3 3 3 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 2 2 2 3 2 2 2 2 2 2 2 3 3</span></span>
<span id="cb98-463"><a href="#cb98-463" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16201] 2 2 2 2 2 1 1 2 1 1 1 1 1 1 1 1 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-464"><a href="#cb98-464" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16237] 3 3 3 3 3 2 1 2 1 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-465"><a href="#cb98-465" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16273] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-466"><a href="#cb98-466" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16309] 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-467"><a href="#cb98-467" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16345] 3 3 3 3 3 3 3 2 2 3 3 3 3 3 3 3 3 2 3 2 3 3 3 3 3 2 2 2 2 2 2 2 2 2 1 1</span></span>
<span id="cb98-468"><a href="#cb98-468" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16381] 1 1 1 1 1 1 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 1 1 1 2 2</span></span>
<span id="cb98-469"><a href="#cb98-469" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16417] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-470"><a href="#cb98-470" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16453] 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-471"><a href="#cb98-471" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16489] 5 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-472"><a href="#cb98-472" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16525] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 1 1 2 1 1 1 1 1 1 1 2 3</span></span>
<span id="cb98-473"><a href="#cb98-473" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16561] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-474"><a href="#cb98-474" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16597] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5</span></span>
<span id="cb98-475"><a href="#cb98-475" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16633] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-476"><a href="#cb98-476" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16669] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 3</span></span>
<span id="cb98-477"><a href="#cb98-477" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16705] 3 3 2 3 2 2 2 3 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 2 2 2 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-478"><a href="#cb98-478" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16741] 3 3 3 3 3 3 3 3 2 1 1 1 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-479"><a href="#cb98-479" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16777] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-480"><a href="#cb98-480" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16813] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-481"><a href="#cb98-481" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-482"><a href="#cb98-482" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Within cluster sum of squares by cluster:</span></span>
<span id="cb98-483"><a href="#cb98-483" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3785.104 3516.041 4545.222 7478.029 5524.327</span></span>
<span id="cb98-484"><a href="#cb98-484" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  (between_SS / total_SS =  70.5 %)</span></span>
<span id="cb98-485"><a href="#cb98-485" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-486"><a href="#cb98-486" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Available components:</span></span>
<span id="cb98-487"><a href="#cb98-487" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb98-488"><a href="#cb98-488" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"</span></span>
<span id="cb98-489"><a href="#cb98-489" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] "betweenss"    "size"         "iter"         "ifault"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="copying-a-raster-structure" class="level2">
<h2 class="anchored" data-anchor-id="copying-a-raster-structure">Copying a raster structure</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>clus_raster <span class="ot">&lt;-</span> co<span class="sc">$</span>tmax</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(clus_raster) <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assign-values" class="level2">
<h2 class="anchored" data-anchor-id="assign-values">Assign values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>clus_raster[idx] <span class="ot">&lt;-</span> E<span class="sc">$</span>cluster</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(clus_raster, <span class="at">col =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Spectral"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-123-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="merging-across-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="merging-across-data-sources">Merging across data sources</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get elevations data</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>elev <span class="ot">=</span> elevatr<span class="sc">::</span><span class="fu">get_elev_raster</span>(AOI, <span class="at">z =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">crop</span>(AOI) <span class="sc">|&gt;</span> </span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rast</span>()</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Align Raster extents and resolutions</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>elev <span class="ot">=</span> <span class="fu">project</span>(elev, co<span class="sc">$</span>ppt)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract Values</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>values <span class="ot">=</span> <span class="fu">c</span>(co<span class="sc">$</span>ppt, elev) <span class="sc">%&gt;%</span> <span class="fu">values</span>()</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Prep data</span></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">=</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">apply</span>(<span class="fu">is.na</span>(values), <span class="dv">1</span>, any))</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>v <span class="ot">=</span> <span class="fu">na.omit</span>(values)</span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>vs <span class="ot">=</span> <span class="fu">scale</span>(v)</span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Cluster</span></span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a>E <span class="ot">=</span> <span class="fu">kmeans</span>(vs, <span class="dv">5</span>, <span class="at">iter.max =</span> <span class="dv">100</span>)</span>
<span id="cb101-19"><a href="#cb101-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-20"><a href="#cb101-20" aria-hidden="true" tabindex="-1"></a>clus_raster <span class="ot">=</span> elev</span>
<span id="cb101-21"><a href="#cb101-21" aria-hidden="true" tabindex="-1"></a><span class="fu">values</span>(clus_raster) <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb101-22"><a href="#cb101-22" aria-hidden="true" tabindex="-1"></a>clus_raster[idx] <span class="ot">&lt;-</span> E<span class="sc">$</span>cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-11" class="level2">
<h2 class="anchored" data-anchor-id="section-11"></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(co<span class="sc">$</span>ppt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-125-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(clus_raster, <span class="at">col =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Spectral"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-126-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="clustering-at-larger-scales" class="level2">
<h2 class="anchored" data-anchor-id="clustering-at-larger-scales">Clustering at larger scales</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>counties <span class="ot">=</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"conus"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>params <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"tmax"</span>, <span class="st">"tmin"</span>, <span class="st">"ppt"</span>, <span class="st">"srad"</span>)</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(counties, params, <span class="at">startDate =</span> <span class="st">"2018-06-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">|&gt;</span> </span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rast</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(params) <span class="sc">|&gt;</span> </span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>  exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(counties, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">scale</span>(dat)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>counties<span class="sc">$</span>clust8 <span class="ot">=</span> <span class="fu">kmeans</span>(dat, <span class="dv">8</span>)<span class="sc">$</span>cluster</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">st_transform</span>(counties[<span class="st">"clust8"</span>], <span class="dv">5070</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="week-4_files/figure-revealjs/unnamed-chunk-128-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="extra-animating-rasters" class="level2">
<h2 class="anchored" data-anchor-id="extra-animating-rasters">Extra! Animating Rasters‚Ä¶</h2>
<p>Install and load the <code>gifski</code> package</p>
<ul>
<li><p><strong>save_gif</strong>: combines many individual plots</p></li>
<li><p>A <strong>for loop</strong> build the plots</p></li>
<li><p>The <strong>plot</strong> is what we have been doing all along (if you want a <code>ggplot</code> you must print the object!)</p></li>
<li><p><strong>gif_file</strong>: the path to save the image</p></li>
<li><p><strong>width/height</strong>: the image dimensions</p></li>
<li><p><strong>delay</strong>: the pause between frames</p></li>
<li><p><strong>loop</strong>: should the gif play over and over?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gifski)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">save_gif</span>(</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  {<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlyr</span>(prcp<span class="sc">$</span>ppt)) {</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plot</span>(prcp<span class="sc">$</span>ppt[[i]], <span class="at">col =</span> blues9, </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend =</span> <span class="cn">FALSE</span>, </span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">main =</span> <span class="fu">names</span>(prcp<span class="sc">$</span>ppt)[i])}</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>  }, </span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">gif_file =</span> <span class="st">"images/ppt.gif"</span>, </span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">width =</span> <span class="dv">800</span>, <span class="at">height =</span> <span class="dv">600</span>, <span class="at">delay =</span> .<span class="dv">33</span>, <span class="at">loop =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="result-1" class="level2">
<h2 class="anchored" data-anchor-id="result-1">Result</h2>
<p><img src="images/ppt.gif" class="img-fluid"></p>


</section>
</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>