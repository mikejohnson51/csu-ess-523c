<!DOCTYPE html>
<html lang="en"><head>
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>ESS 523c – Week 4</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-be8ed9a3cdcbe7a498a633334f8d1033.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
<script src="https://use.fontawesome.com/5235085b15.js"></script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#1E4D2B" class="quarto-title-block center">
  <h1 class="title">Week 4</h1>
  <p class="subtitle">Raster Data</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="recap-sf-and-spatial-concepts" class="slide level2">
<h2>Recap: sf and spatial concepts</h2>
<ul>
<li><p>Spatial phenomena can be thought of discrete <strong>objects</strong> with clear boundaries or as <strong>continuous</strong> phenomenon that can be observed everywhere, with <em>no</em> natural boundaries.</p></li>
<li><p>We have described these as <strong>objects</strong> and <strong>fields</strong> (Kuhn, 2012)</p></li>
<li><p>Objects are usually represented by vector data consisting of:</p>
<ul>
<li>a geometry (simple features (<code>sfc</code>, <code>sfg</code>))</li>
<li>some attribute information (<code>data.frame</code>)</li>
</ul></li>
<li><p>In R these are unified as a <code>sf</code> object</p></li>
<li><p>Field data is typically represented by raster data</p></li>
<li><p>For this, we will begin our discussions using the <code>terra</code> package</p></li>
</ul>
</section>
<section id="terra" class="slide level2">
<h2><code>terra</code></h2>
<ul>
<li><p>Like <code>sf</code>, <code>terra</code> is an implementation of <a href="https://gistbok.ucgis.org/bok-topics/raster-data-model">standard raster data model</a></p></li>
<li><p>The model is used by all GIS platforms</p></li>
<li><p>Represented continuous data either as continuous or categorical values as a regular set of cells in a grid (matrix)</p></li>
<li><p>cells have: (1) resolution, (2) infered cell coordinate (centroid) (3) the coordinate and value apply to the entire cell area</p></li>
</ul>
</section>
<section id="recap-r-data-structures" class="slide level2">
<h2>Recap: R data structures</h2>
<ul>
<li><p>Vector:</p>
<ul>
<li>A vector can have dimensions
<ul>
<li>A 1D vector in a collection of values</li>
<li>A 2D vector is a matrix</li>
<li>A 3D vector is an array</li>
</ul></li>
</ul></li>
<li><p>List: a collection of objects</p></li>
<li><p>data.frame: a list with requirement of equal length column (vectors)</p></li>
<li><p>data.frames and lists (sfc) defined our vector model</p></li>
<li><p>Arrays will define our raster model</p></li>
</ul>
</section>
<section id="spatial-extent" class="slide level2">
<h2>Spatial Extent</h2>
<p>One last topic with respect to vector data (that will carry us into raster) is the idea of an extent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>(ny <span class="ot">&lt;-</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"NY"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a></a>   <span class="fu">st_transform</span>(<span class="dv">5070</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a></a>   dplyr<span class="sc">::</span><span class="fu">select</span>(name))</span>
<span id="cb1-4"><a></a><span class="co">#&gt; Simple feature collection with 1 feature and 1 field</span></span>
<span id="cb1-5"><a></a><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span id="cb1-6"><a></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb1-7"><a></a><span class="co">#&gt; Bounding box:  xmin: 1319502 ymin: 2149150 xmax: 1997508 ymax: 2658543</span></span>
<span id="cb1-8"><a></a><span class="co">#&gt; Projected CRS: NAD83 / Conus Albers</span></span>
<span id="cb1-9"><a></a><span class="co">#&gt;       name                       geometry</span></span>
<span id="cb1-10"><a></a><span class="co">#&gt; 1 New York MULTIPOLYGON (((1661335 263...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In geometry, the minimum bounding box for a point set (stored as <code>POINT</code>, <code>POLYLINE</code>, <code>POLYGON</code>) in N dimensions is “…the box with the smallest measure within which all the points lie.”</p>
</section>
<section id="we-can-extract-bounding-box-coordinates-with-st_bbox" class="slide level2">
<h2>We can extract bounding box coordinates with <code>st_bbox</code></h2>
<ul>
<li>returns: an object of class <code>bbox</code> of length 4.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>(<span class="at">bb =</span> <span class="fu">st_bbox</span>(ny))</span>
<span id="cb2-2"><a></a><span class="co">#&gt;    xmin    ymin    xmax    ymax </span></span>
<span id="cb2-3"><a></a><span class="co">#&gt; 1319502 2149150 1997508 2658543</span></span>
<span id="cb2-4"><a></a></span>
<span id="cb2-5"><a></a><span class="fu">class</span>(bb)</span>
<span id="cb2-6"><a></a><span class="co">#&gt; [1] "bbox"</span></span>
<span id="cb2-7"><a></a></span>
<span id="cb2-8"><a></a><span class="fu">typeof</span>(bb)</span>
<span id="cb2-9"><a></a><span class="co">#&gt; [1] "double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="there-is-a-method-for-creating-an-sfc-form-a-bbox-object" class="slide level2">
<h2>There is a method for creating an sfc form a <code>bbox</code> object</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>(<span class="at">bb =</span> <span class="fu">st_as_sfc</span>(bb))</span>
<span id="cb3-2"><a></a><span class="co">#&gt; Geometry set for 1 feature </span></span>
<span id="cb3-3"><a></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb3-4"><a></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb3-5"><a></a><span class="co">#&gt; Bounding box:  xmin: 1319502 ymin: 2149150 xmax: 1997508 ymax: 2658543</span></span>
<span id="cb3-6"><a></a><span class="co">#&gt; Projected CRS: NAD83 / Conus Albers</span></span>
<span id="cb3-7"><a></a></span>
<span id="cb3-8"><a></a><span class="fu">class</span>(bb)</span>
<span id="cb3-9"><a></a><span class="co">#&gt; [1] "sfc_POLYGON" "sfc"</span></span>
<span id="cb3-10"><a></a></span>
<span id="cb3-11"><a></a><span class="fu">typeof</span>(bb)</span>
<span id="cb3-12"><a></a><span class="co">#&gt; [1] "list"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="result" class="slide level2">
<h2>Result:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">plot</span>(bb, <span class="at">border =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>))</span>
<span id="cb4-2"><a></a><span class="fu">plot</span>(ny, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, .<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-5-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="extents-can-be-discritized-in-a-number-of-ways" class="slide level2">
<h2>Extents can be discritized in a number of ways:</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>grid <span class="ot">=</span> <span class="fu">st_make_grid</span>(bb)</span>
<span id="cb5-2"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb5-3"><a></a><span class="fu">plot</span>(grid, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-6-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>grid1km <span class="ot">=</span> <span class="fu">st_make_grid</span>(bb, <span class="at">cellsize =</span> <span class="dv">10000</span>)</span>
<span id="cb6-2"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb6-3"><a></a><span class="fu">plot</span>(grid1km, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-7-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="what-makes-of-a-regular-tesselation" class="slide level2">
<h2>What makes of a regular tesselation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">length</span>(grid1km) <span class="co"># how many grid tiles</span></span>
<span id="cb7-2"><a></a><span class="co">#&gt; [1] 3468</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="co"># how many points?</span></span>
<span id="cb8-2"><a></a><span class="co">#&gt; [1] 17340</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">*</span> <span class="dv">2</span> <span class="co"># how many X and Y?</span></span>
<span id="cb9-2"><a></a><span class="co">#&gt; [1] 34680</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">/</span> <span class="fu">length</span>(grid) <span class="co"># how many points per tile?</span></span>
<span id="cb10-2"><a></a><span class="co">#&gt; [1] 173.4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">sqrt</span>(<span class="fu">st_area</span>(grid1km)[<span class="dv">1</span>]) <span class="co"># length of each tile?</span></span>
<span id="cb11-2"><a></a><span class="co">#&gt; 10000 [m]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">st_bbox</span>(grid1km) <span class="co"># extent of grid</span></span>
<span id="cb12-2"><a></a><span class="co">#&gt;    xmin    ymin    xmax    ymax </span></span>
<span id="cb12-3"><a></a><span class="co">#&gt; 1319502 2149150 1999502 2659150</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="alternative-representation" class="slide level2">
<h2>Alternative representation</h2>
<p>Regular grids can also be indexed by their centroids</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>cent <span class="ot">&lt;-</span> <span class="fu">st_centroid</span>(grid1km)</span>
<span id="cb13-2"><a></a></span>
<span id="cb13-3"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry)</span>
<span id="cb13-4"><a></a><span class="fu">plot</span>(cent, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-14-1.png" style="width:100.0%" class="r-stretch"><div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">length</span>(cent) <span class="co"># how many grid tiles</span></span>
<span id="cb14-2"><a></a><span class="co">#&gt; [1] 3468</span></span>
<span id="cb14-3"><a></a></span>
<span id="cb14-4"><a></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="co"># how many points?</span></span>
<span id="cb14-5"><a></a><span class="co">#&gt; [1] 17340</span></span>
<span id="cb14-6"><a></a></span>
<span id="cb14-7"><a></a>mapview<span class="sc">::</span><span class="fu">npts</span>(grid1km) <span class="sc">*</span> <span class="dv">2</span> <span class="co"># how many X and Y?</span></span>
<span id="cb14-8"><a></a><span class="co">#&gt; [1] 34680</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="equal-area-from-centroid" class="slide level2">
<h2>Equal area from centroid</h2>
<p>We can use our voroni diagram the show that the area closest to a cell centroid is the cell itself.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>vor <span class="ot">=</span> <span class="fu">st_union</span>(cent) <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a></a>  <span class="fu">st_voronoi</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a></a>  <span class="fu">st_cast</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a></a>  <span class="fu">st_intersection</span>(bb)</span>
<span id="cb15-5"><a></a></span>
<span id="cb15-6"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry); <span class="fu">plot</span>(vor, <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-16-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="raster-model" class="slide level2">
<h2>Raster Model</h2>
<ul>
<li><p>The raster model is one of the earliest and most widely used data models within geographic information systems (Tomlin, 1990; Goodchild, 1992, Maguire, 1992).</p></li>
<li><p>Typically used to record, analyze and visualize data with a continuous nature such as elevation, temperature (“GIS”), or reflected or emitted electromagnetic radiation (“Remote Sensing”)</p></li>
<li><p>Quotes are used because you’ll find from a data perspective these differences are artificial and a product of the ESRI/ENVI/ERDAS divide</p></li>
</ul>
<div class="fragment">
<ul>
<li><p>The term <code>raster</code> originated from the German word for screen, implying a series of orthogonality oriented parallel lines.</p></li>
<li><p>Digital raster objects most often take the form of a <em>regularly spaced</em>, <em>grid-like</em> pattern of rows and columns</p></li>
<li><p>Each element referred to as a cell, pixel, or grid point.</p></li>
</ul>
</div>
</section>
<section id="many-terms-mean-the-same-thing" class="slide level2">
<h2>Many terms mean the same thing …</h2>
<ul>
<li><p>The entire raster is sometimes referred to as an “image”, “array”, “surface”, “matrix”, or “lattice” (Wise, 2000).</p></li>
<li><p>The all mean the same thing…</p></li>
<li><p>Cells of the raster are most often square, but may be rectangular (with differing resolutions in x and y directions) or other shapes that can be tessellated such as triangles and hexagons (Figure below from Peuquet, 1984).</p></li>
</ul>

<img data-src="images/17-raster-tess.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="photos-and-computers" class="slide level2">
<h2>Photos and Computers …</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-pixel-resolution.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-what-is-a-pixel.jpg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="aerial-imagery-really-just-a-photo" class="slide level2">
<h2>Aerial Imagery (really just a photo 😄)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-boat-res1.jpg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-boat-res2.jpg" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="what-is-stored-in-these-cells" class="slide level2">
<h2>What is stored in these cells?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="categorical-values-integerfactor">Categorical Values (integer/factor)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-lc-pixels.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<h3 id="continuous-values-numeric">Continuous Values (numeric)</h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-raster-elev.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="spectral-values" class="slide level2">
<h2>Spectral Values</h2>
<ul>
<li>Either Color, or sensor</li>
</ul>

<img data-src="images/17-rgb.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="any-digital-image-contains-an-rbg-channel-for-color" class="slide level2">
<h2>Any digital image contains an RBG channel for color:</h2>
<ul>
<li><p>Red, green, and blue are the three additive colors (primary colors of light)</p></li>
<li><p>In R, colors can be defined using the RBG channels</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a>(<span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># red</span></span>
<span id="cb16-2"><a></a><span class="co">#&gt; [1] "#FF0000"</span></span>
<span id="cb16-3"><a></a>(<span class="fu">rgb</span>(<span class="dv">0</span>,.<span class="dv">54</span>,.<span class="dv">96</span>)) <span class="co"># UCSB navy</span></span>
<span id="cb16-4"><a></a><span class="co">#&gt; [1] "#008AF5"</span></span>
<span id="cb16-5"><a></a>(<span class="fu">rgb</span>(<span class="dv">254</span>,<span class="dv">188</span>,<span class="dv">17</span>, <span class="at">maxColorValue =</span> <span class="dv">255</span>)) <span class="co"># UCSB navy</span></span>
<span id="cb16-6"><a></a><span class="co">#&gt; [1] "#FEBC11"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pure-rbg" class="slide level2">
<h2>Pure RBG</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb17-2"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># red</span></span>
<span id="cb17-3"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="co"># green</span></span>
<span id="cb17-4"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry,   <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>)) <span class="co"># blue</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-26-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="rgb-and-bytesbits" class="slide level2">
<h2>RGB and bytes/bits</h2>
<ul>
<li><p>The <strong>red</strong>, <strong>green</strong> and <strong>blue</strong> use 8 bits each (1 byte), which each have integer values from 0 to 255.</p></li>
<li><p>This makes 256^3 = 16,777,216 possible colors.</p></li>
<li><p>See more <a href="https://www.rapidtables.com/web/color/RGB_Color.html">here</a></p></li>
<li><p>How does this relate to the selection of 256x256 pixel tiles in web maps?</p></li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p>The secondary colors in an RGB color wheel are cyan, magenta, and yellow because these are the three subtractive colors</p>
<p>Think of your printer and the CMYK ink cartridges! Where black, is the absence of color (0,0,0)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), <span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb18-2"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))  <span class="co"># cyan</span></span>
<span id="cb18-3"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)) <span class="co"># Magenta</span></span>
<span id="cb18-4"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="co"># Yellow</span></span>
<span id="cb18-5"><a></a><span class="fu">plot</span>(ny<span class="sc">$</span>geometry, <span class="at">col =</span> <span class="fu">rgb</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>)) <span class="co"># Key (black)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-27-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section>
<section id="why-do-we-care" class="title-slide slide level1 center">
<h1>Why do we care?</h1>
<ul>
<li><p>Pixels are the base unit of raster data and have a resolution</p></li>
<li><p>This is the X and the Y dimension of each cell in the units of the CRS</p></li>
</ul>

<img data-src="images/17-raster.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="resolution-drives-image-clarity-granulairty" class="slide level2">
<h2>Resolution drives image clarity (granulairty)</h2>
<ul>
<li>Higher resolution (smaller cells) = more detail, but bigger data!</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-raster-res.png" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/17-raster-res.gif" class="quarto-figure quarto-figure-center" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="raster-images-seek-to-discritize-the-real-world-into-cell-based-values" class="slide level2">
<h2>Raster images seek to discritize the real world into cell-based values</h2>
<ul>
<li>Again either integer (categorical), continuous, or signal</li>
</ul>

<img data-src="images/17-rasterize-world.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="all-rasters-have-an-extent" class="slide level2">
<h2>All rasters have an extent!</h2>
<ul>
<li>This is the same extent as a bounding box</li>
<li>Can be described as 4 values (xmin,ymin,xmax,ymax)</li>
</ul>

<img data-src="images/17-raster-extent.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="implicity-coordinates" class="slide level2">
<h2>Implicity Coordinates</h2>
<ul>
<li><p>Unlike vector data, the raster data model stores the coordinate of the grid cells indirectly</p></li>
<li><p>Coordinates are derived from the reference (Xmin,Ymin) the resolution, and the cell index (e.g.&nbsp;[100,150])</p></li>
<li><p>For example: If we want the coordinates of a value in the 3rd row and the 40th column of a raster matrix, we have to move from the origin (Xmin, Ymin) (3 x Xres) in x-direction and (40 x Yres) in y-direction</p></li>
</ul>

<img data-src="images/17-raster-extent.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="section-1" class="slide level2">
<h2></h2>
<ul>
<li><p>So, any image (.png, .tif, .gif) can be read as a raster…</p></li>
<li><p>The raster is defined by the extent and resolution of the cells</p></li>
<li><p>To be spatial, the extent (thus coordinates) must be grounded in an CRS</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>(<span class="at">img =</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">'images/17-raster-extent.png'</span>))</span>
<span id="cb19-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb19-3"><a></a><span class="co">#&gt; dimensions  : 788, 1067, 4  (nrow, ncol, nlyr)</span></span>
<span id="cb19-4"><a></a><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span id="cb19-5"><a></a><span class="co">#&gt; extent      : 0, 1067, 0, 788  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb19-6"><a></a><span class="co">#&gt; coord. ref. :  </span></span>
<span id="cb19-7"><a></a><span class="co">#&gt; source      : 17-raster-extent.png </span></span>
<span id="cb19-8"><a></a><span class="co">#&gt; names       : 17-rast~xtent_1, 17-rast~xtent_2, 17-rast~xtent_3, 17-rast~xtent_4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>terra<span class="sc">::</span><span class="fu">plotRGB</span>(img, <span class="at">r =</span> <span class="dv">1</span>, <span class="at">g =</span> <span class="dv">2</span>, <span class="at">b =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-35-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="raster-data-in-r" class="slide level2">
<h2>Raster Data in R</h2>
<p>A <code>SpatRast</code> represents single-layer (variable) raster data.</p>
<p>A <code>SpatRast</code> always stores the fundamental parameters that describe it. - The number of columns and rows, - The spatial extent - The Coordinate Reference System.</p>
<p>In addition, a <code>SpatRast</code> can store information about the file where raster values are stored (if there is such a file).</p>
<p>Here we construct an empty raster:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>(r <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="at">ncol=</span><span class="dv">20</span>, <span class="at">nrow=</span><span class="dv">20</span>, <span class="at">xmax=</span><span class="sc">-</span><span class="dv">80</span>, <span class="at">xmin=</span><span class="sc">-</span><span class="dv">120</span>, <span class="at">ymin=</span><span class="dv">20</span>, <span class="at">ymax=</span><span class="dv">60</span>))</span>
<span id="cb21-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb21-3"><a></a><span class="co">#&gt; dimensions  : 20, 20, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb21-4"><a></a><span class="co">#&gt; resolution  : 2, 2  (x, y)</span></span>
<span id="cb21-5"><a></a><span class="co">#&gt; extent      : -120, -80, 20, 60  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb21-6"><a></a><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h4 id="extract-diminisionality">Extract Diminisionality …</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">nrow</span>(r)</span>
<span id="cb22-2"><a></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb22-3"><a></a><span class="fu">ncol</span>(r)</span>
<span id="cb22-4"><a></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb22-5"><a></a><span class="fu">ncell</span>(r)</span>
<span id="cb22-6"><a></a><span class="co">#&gt; [1] 400</span></span>
<span id="cb22-7"><a></a><span class="fu">nlyr</span>(r)</span>
<span id="cb22-8"><a></a><span class="co">#&gt; [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="raster-values" class="slide level2">
<h2>Raster Values</h2>
<p>values can be extracted with <code>values()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb23-2"><a></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb23-3"><a></a><span class="co">#&gt; [1,]   NaN</span></span>
<span id="cb23-4"><a></a><span class="co">#&gt; [2,]   NaN</span></span>
<span id="cb23-5"><a></a><span class="co">#&gt; [3,]   NaN</span></span>
<span id="cb23-6"><a></a><span class="co">#&gt; [4,]   NaN</span></span>
<span id="cb23-7"><a></a><span class="co">#&gt; [5,]   NaN</span></span>
<span id="cb23-8"><a></a><span class="co">#&gt; [6,]   NaN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assigning-a-values-as-a-vector" class="slide level2">
<h2>Assigning a values as a vector</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="fu">values</span>(r) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncell</span>(r)</span>
<span id="cb24-2"><a></a></span>
<span id="cb24-3"><a></a>r</span>
<span id="cb24-4"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb24-5"><a></a><span class="co">#&gt; dimensions  : 20, 20, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb24-6"><a></a><span class="co">#&gt; resolution  : 2, 2  (x, y)</span></span>
<span id="cb24-7"><a></a><span class="co">#&gt; extent      : -120, -80, 20, 60  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb24-8"><a></a><span class="co">#&gt; coord. ref. : lon/lat WGS 84 (CRS84) (OGC:CRS84) </span></span>
<span id="cb24-9"><a></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb24-10"><a></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb24-11"><a></a><span class="co">#&gt; min value   :     1 </span></span>
<span id="cb24-12"><a></a><span class="co">#&gt; max value   :   400</span></span>
<span id="cb24-13"><a></a></span>
<span id="cb24-14"><a></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb24-15"><a></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb24-16"><a></a><span class="co">#&gt; [1,]     1</span></span>
<span id="cb24-17"><a></a><span class="co">#&gt; [2,]     2</span></span>
<span id="cb24-18"><a></a><span class="co">#&gt; [3,]     3</span></span>
<span id="cb24-19"><a></a><span class="co">#&gt; [4,]     4</span></span>
<span id="cb24-20"><a></a><span class="co">#&gt; [5,]     5</span></span>
<span id="cb24-21"><a></a><span class="co">#&gt; [6,]     6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="fu">plot</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-40-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="raster-is-s4" class="slide level2">
<h2>Raster is S4</h2>
<ul>
<li><p>Compared to S3, the S4 object system is much stricter, and much closer to other OO systems.</p></li>
<li><p>What does this mean for us?</p></li>
<li><p>Data is structured with a “representation”</p></li>
<li><p>which is a list of slot (or attributes), giving their names and classes, accessed with @</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">str</span>(r, <span class="at">max.level =</span> <span class="dv">2</span>)</span>
<span id="cb26-2"><a></a><span class="co">#&gt; S4 class 'SpatRaster' [package "terra"]</span></span>
<span id="cb26-3"><a></a>r<span class="sc">@</span>pntr</span>
<span id="cb26-4"><a></a><span class="co">#&gt; C++ object &lt;0x107b7ea70&gt; of class 'SpatRaster' &lt;0x113daf580&gt;</span></span>
<span id="cb26-5"><a></a>r<span class="sc">@</span>pntr<span class="sc">$</span>ncol</span>
<span id="cb26-6"><a></a><span class="co">#&gt; Class method definition for method ncol()</span></span>
<span id="cb26-7"><a></a><span class="co">#&gt; function () </span></span>
<span id="cb26-8"><a></a><span class="co">#&gt; {</span></span>
<span id="cb26-9"><a></a><span class="co">#&gt;     " unsigned long ncol()  \n   docstring : ncol"</span></span>
<span id="cb26-10"><a></a><span class="co">#&gt;     .External(list(name = "CppMethod__invoke_notvoid", address = &lt;pointer: 0x113e9d470&gt;, </span></span>
<span id="cb26-11"><a></a><span class="co">#&gt;         dll = list(name = "Rcpp", path = "/Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library/Rcpp/libs/Rcpp.so", </span></span>
<span id="cb26-12"><a></a><span class="co">#&gt;             dynamicLookup = TRUE, handle = &lt;pointer: 0x7aab93b0&gt;, </span></span>
<span id="cb26-13"><a></a><span class="co">#&gt;             info = &lt;pointer: 0x113ecbcf0&gt;, forceSymbols = FALSE), </span></span>
<span id="cb26-14"><a></a><span class="co">#&gt;         numParameters = -1L), &lt;pointer: 0x113daf580&gt;, &lt;pointer: 0x113f1ffb0&gt;, </span></span>
<span id="cb26-15"><a></a><span class="co">#&gt;         .pointer)</span></span>
<span id="cb26-16"><a></a><span class="co">#&gt; }</span></span>
<span id="cb26-17"><a></a><span class="co">#&gt; &lt;environment: 0x149b36048&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="access-via-function" class="slide level2">
<h2>Access via Function</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a><span class="fu">ext</span>(r)</span>
<span id="cb27-2"><a></a><span class="co">#&gt; SpatExtent : -120, -80, 20, 60 (xmin, xmax, ymin, ymax)</span></span>
<span id="cb27-3"><a></a><span class="fu">crs</span>(r)</span>
<span id="cb27-4"><a></a><span class="co">#&gt; [1] "GEOGCRS[\"WGS 84 (CRS84)\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"geodetic longitude (Lon)\",east,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"geodetic latitude (Lat)\",north,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    USAGE[\n        SCOPE[\"unknown\"],\n        AREA[\"World\"],\n        BBOX[-90,-180,90,180]],\n    ID[\"OGC\",\"CRS84\"]]"</span></span>
<span id="cb27-5"><a></a><span class="fu">nrow</span>(r)</span>
<span id="cb27-6"><a></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb27-7"><a></a><span class="fu">ncol</span>(r)</span>
<span id="cb27-8"><a></a><span class="co">#&gt; [1] 20</span></span>
<span id="cb27-9"><a></a><span class="fu">head</span>(<span class="fu">values</span>(r))</span>
<span id="cb27-10"><a></a><span class="co">#&gt;      lyr.1</span></span>
<span id="cb27-11"><a></a><span class="co">#&gt; [1,]     1</span></span>
<span id="cb27-12"><a></a><span class="co">#&gt; [2,]     2</span></span>
<span id="cb27-13"><a></a><span class="co">#&gt; [3,]     3</span></span>
<span id="cb27-14"><a></a><span class="co">#&gt; [4,]     4</span></span>
<span id="cb27-15"><a></a><span class="co">#&gt; [5,]     5</span></span>
<span id="cb27-16"><a></a><span class="co">#&gt; [6,]     6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="multi-layers" class="slide level2">
<h2>Multi-layers</h2>

<img data-src="images/17_multi-band.png" style="width:100.0%" class="r-stretch"><p>In many cases multi-variable raster data sets are used. Variables can related to time or measurements</p>
<p>A <code>SpatRaster</code> is a collection ofobjects with the same spatial <code>extent</code> and <code>resolution.</code></p>
<p>In essence it is a list of objects, or a 3D array.</p>
</section>
<section id="remember-our-array-data" class="slide level2">
<h2>Remember our Array data?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>(<span class="at">v =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">27</span>)</span>
<span id="cb28-2"><a></a><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</span></span>
<span id="cb28-3"><a></a><span class="co">#&gt; [26] 26 27</span></span>
<span id="cb28-4"><a></a>(<span class="at">arr =</span> <span class="fu">array</span>(v, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>)))</span>
<span id="cb28-5"><a></a><span class="co">#&gt; , , 1</span></span>
<span id="cb28-6"><a></a><span class="co">#&gt; </span></span>
<span id="cb28-7"><a></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-8"><a></a><span class="co">#&gt; [1,]    1    4    7</span></span>
<span id="cb28-9"><a></a><span class="co">#&gt; [2,]    2    5    8</span></span>
<span id="cb28-10"><a></a><span class="co">#&gt; [3,]    3    6    9</span></span>
<span id="cb28-11"><a></a><span class="co">#&gt; </span></span>
<span id="cb28-12"><a></a><span class="co">#&gt; , , 2</span></span>
<span id="cb28-13"><a></a><span class="co">#&gt; </span></span>
<span id="cb28-14"><a></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-15"><a></a><span class="co">#&gt; [1,]   10   13   16</span></span>
<span id="cb28-16"><a></a><span class="co">#&gt; [2,]   11   14   17</span></span>
<span id="cb28-17"><a></a><span class="co">#&gt; [3,]   12   15   18</span></span>
<span id="cb28-18"><a></a><span class="co">#&gt; </span></span>
<span id="cb28-19"><a></a><span class="co">#&gt; , , 3</span></span>
<span id="cb28-20"><a></a><span class="co">#&gt; </span></span>
<span id="cb28-21"><a></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb28-22"><a></a><span class="co">#&gt; [1,]   19   22   25</span></span>
<span id="cb28-23"><a></a><span class="co">#&gt; [2,]   20   23   26</span></span>
<span id="cb28-24"><a></a><span class="co">#&gt; [3,]   21   24   27</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="an-array-is-a-single-file-so-it-can-be-rasterized" class="slide level2">
<h2>An array is a single file so it can be “rasterized”</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>b <span class="ot">=</span> <span class="fu">rast</span>(arr)</span>
<span id="cb29-2"><a></a><span class="fu">plot</span>(b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-45-1.png" style="width:100.0%" class="r-stretch"></section></section>
<section>
<section id="core-raster-principles" class="title-slide slide level1 center">
<h1>Core Raster Principles</h1>

</section>
<section id="bounding-box-extents" class="slide level2">
<h2>1. Bounding Box / Extents</h2>
<p><strong>Geometries</strong> have extents that define the maximum and minimum coverage of the shape in a coordinate reference system</p>

<img data-src="images/18-geom-extent.png" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">Image Source: National Ecological Observatory Network (NEON)</p></section>
<section id="extent" class="slide level2">
<h2>2. Extent</h2>
<ul>
<li><p>When dealing with objects, the extent (or bbox) is derived from the coordinate set</p></li>
<li><p>When dealing with raster data, the extent is a fondational component of the raster data structure</p>
<ul>
<li>That is, we need to know the area the raster is covering!</li>
</ul></li>
</ul>

<img data-src="images/17-raster-extent.png" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">Image Source: National Ecological Observatory Network (NEON)</p></section>
<section id="discretization" class="slide level2">
<h2>3. Discretization</h2>
<p>Once we know the <strong>extent</strong>, we need to know <em>how</em> that space is split up</p>
<p>Two complimentary bit of information can tell us this:</p>
<ul>
<li>Resolution (res)</li>
<li>Number of row and number of columns (nrow/ncol)</li>
</ul>

<img data-src="images/17-raster-res.png" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">Image Source: National Ecological Observatory Network (NEON)</p></section>
<section id="so" class="slide level2">
<h2>So,</h2>
<p>A raster is made of an <strong>extent</strong>, and a <strong>resolution</strong> / row-column structure</p>
<ul>
<li><p>A vector of values fill that structure (same way a vector in R can have diminisons)</p>
<ul>
<li>These values are often scaled to integers to reduce file size</li>
</ul></li>
<li><p>Values are referenced in cartisian space, based on cell index</p></li>
<li><p>A CRS along with the extent, can provide spatial reference / coordinates</p></li>
</ul>
</section>
<section id="general-process" class="slide level2">
<h2>General Process</h2>
<p>Almost all remote sensing / image analysis begins with the same basic steps:</p>
<ol type="1">
<li><p>Identifying an area of interest (AOI)</p></li>
<li><p>Identifying and downloading the relevant images or products</p></li>
<li><p>Analyzing the raster products</p></li>
</ol>
<p>The definition of a AOI is critical because raster data in continuous, therefore we need to define the bounds of the study rather then the bounds of the objects</p>
<ul>
<li><strong>But</strong>, objects often (even typically) define our bounds</li>
</ul>
</section>
<section id="find-elevation-data-for-fort-collins" class="slide level2">
<h2>Find elevation data for Fort Collins:</h2>
<ol type="1">
<li>Define the AOI</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a>bb <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"../labs/data/uscities.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lng"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-3"><a></a>  <span class="fu">filter</span>(city <span class="sc">==</span> <span class="st">"Fort Collins"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a></a>  <span class="fu">st_transform</span>(<span class="dv">5070</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-5"><a></a>  <span class="fu">st_buffer</span>(<span class="dv">50000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a></a>  <span class="fu">st_bbox</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-7"><a></a>  <span class="fu">st_as_sfc</span>() <span class="sc">|&gt;</span> </span>
<span id="cb30-8"><a></a>  <span class="fu">st_as_sf</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Read data from elevation map tiles, for a specific zoom, and crop to the AOI</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>elev <span class="ot">=</span> elevatr<span class="sc">::</span><span class="fu">get_elev_raster</span>(bb, <span class="at">z =</span> <span class="dv">11</span>) <span class="sc">|&gt;</span> <span class="fu">crop</span>(bb)</span>
<span id="cb31-2"><a></a><span class="fu">writeRaster</span>(elev, <span class="at">filename =</span> <span class="st">"data/foco-elev.tif"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>The resulting raster …</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a>(<span class="at">elev =</span> <span class="fu">rast</span>(<span class="st">"data/foco-elev.tif"</span>))</span>
<span id="cb32-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb32-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb32-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb32-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb32-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb32-7"><a></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb32-8"><a></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb32-9"><a></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb32-10"><a></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="week-4_files/figure-revealjs/unnamed-chunk-52-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="raster-values-continuity" class="slide level2">
<h2>Raster Values Continuity</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>v <span class="ot">=</span> <span class="fu">values</span>(elev)</span>
<span id="cb33-2"><a></a><span class="fu">class</span>(v)</span>
<span id="cb33-3"><a></a><span class="co">#&gt; [1] "matrix" "array"</span></span>
<span id="cb33-4"><a></a><span class="fu">length</span>(v)</span>
<span id="cb33-5"><a></a><span class="co">#&gt; [1] 11902500</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>elev</span>
<span id="cb34-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb34-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb34-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb34-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb34-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb34-7"><a></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb34-8"><a></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb34-9"><a></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb34-10"><a></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="raster-values-1" class="slide level2">
<h2>Raster Values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="co"># The length of the vector is equal to the rows * columns</span></span>
<span id="cb35-2"><a></a><span class="fu">length</span>(v) <span class="sc">==</span> <span class="fu">nrow</span>(elev) <span class="sc">*</span> <span class="fu">ncol</span>(elev)</span>
<span id="cb35-3"><a></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb35-4"><a></a><span class="co"># The span of the x extent divided by the resolution equals the raster rows</span></span>
<span id="cb35-5"><a></a>((<span class="fu">xmax</span>(elev) <span class="sc">-</span> <span class="fu">xmin</span>(elev)) <span class="sc">/</span> <span class="fu">res</span>(elev)[<span class="dv">1</span>]) <span class="sc">==</span> <span class="fu">ncol</span>(elev) </span>
<span id="cb35-6"><a></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb35-7"><a></a><span class="co"># The span of the x extent divided by the number of rows equals the raster resolution</span></span>
<span id="cb35-8"><a></a>((<span class="fu">xmax</span>(elev) <span class="sc">-</span> <span class="fu">xmin</span>(elev)) <span class="sc">/</span> <span class="fu">ncol</span>(elev)) <span class="sc">==</span> <span class="fu">res</span>(elev)[<span class="dv">1</span>] </span>
<span id="cb35-9"><a></a><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="all-image-files-are-the-same" class="slide level2">
<h2>All image files are the same!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://a.tile.openstreetmap.org/18/43803/104352.png"</span>,</span>
<span id="cb36-2"><a></a>              <span class="at">destfile =</span> <span class="st">"data/104352.png"</span>)</span>
<span id="cb36-3"><a></a>img <span class="ot">=</span> png<span class="sc">::</span><span class="fu">readPNG</span>(<span class="st">"data/104352.png"</span>)</span>
<span id="cb36-4"><a></a><span class="fu">class</span>(img)</span>
<span id="cb36-5"><a></a><span class="co">#&gt; [1] "array"</span></span>
<span id="cb36-6"><a></a><span class="fu">typeof</span>(img)</span>
<span id="cb36-7"><a></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb36-8"><a></a><span class="fu">dim</span>(img)</span>
<span id="cb36-9"><a></a><span class="co">#&gt; [1] 256 256   3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>img[<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb37-2"><a></a><span class="co">#&gt; [1] 1.0000000 1.0000000 0.9333333</span></span>
<span id="cb37-3"><a></a><span class="fu">rgb</span>(<span class="fl">1.0000000</span>, <span class="fl">0.9607843</span>, <span class="fl">0.8980392</span>)</span>
<span id="cb37-4"><a></a><span class="co">#&gt; [1] "#FFF5E5"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="images/18-color-picker.png" style="width:50.0%" class="r-stretch quarto-figure-center"><p class="caption">Google Color Picker</p></section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="data/104352.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/18-color-picker.png"></p>
</div></div>
</section>
<section id="raster-algebra" class="slide level2">
<h2>Raster Algebra</h2>
<ul>
<li><p>So our raster <strong>data</strong> is stored as a large numeric array/vector</p></li>
<li><p>Many generic functions allow for simple algebra on Raster objects,</p></li>
<li><p>These include:</p>
<ul>
<li><p>normal algebraic operators such as <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code></p></li>
<li><p>logical operators such as <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>,<code>==</code>, <code>!</code></p></li>
<li><p>functions like <code>abs</code>, <code>round</code>, <code>ceiling</code>, <code>floor</code>, <code>trunc</code>, <code>sqrt</code>, <code>log</code>, <code>log10</code>, <code>exp</code>, <code>cos</code>, <code>sin</code>, <code>atan</code>, <code>tan</code>, <code>max</code>, <code>min</code>, <code>range</code>, <code>prod</code>, <code>sum</code>, <code>any</code>, <code>all</code></p></li>
</ul></li>
</ul>
</section>
<section id="raster-algebra-1" class="slide level2">
<h2>Raster Algebra</h2>
<ul>
<li><p>In these functions you can mix <code>SpatRast</code> objects with numbers, as long as the <em>first</em> argument is a raster object.</p></li>
<li><p>That means you can add 100 to a raster object but not a raster object to 100</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="co"># GOOD</span></span>
<span id="cb38-2"><a></a>raster <span class="sc">+</span> <span class="dv">100</span></span>
<span id="cb38-3"><a></a></span>
<span id="cb38-4"><a></a><span class="co"># BAD</span></span>
<span id="cb38-5"><a></a><span class="dv">100</span> <span class="sc">+</span> raster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<h3 id="for-example">For example:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a>elev <span class="sc">+</span> <span class="dv">100</span></span>
<span id="cb39-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb39-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb39-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb39-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb39-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb39-7"><a></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb39-8"><a></a><span class="co">#&gt; varname     : foco-elev </span></span>
<span id="cb39-9"><a></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb39-10"><a></a><span class="co">#&gt; min value   :      1482 </span></span>
<span id="cb39-11"><a></a><span class="co">#&gt; max value   :      4446</span></span>
<span id="cb39-12"><a></a><span class="fu">log10</span>(elev)</span>
<span id="cb39-13"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb39-14"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb39-15"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb39-16"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb39-17"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb39-18"><a></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb39-19"><a></a><span class="co">#&gt; varname     : foco-elev </span></span>
<span id="cb39-20"><a></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb39-21"><a></a><span class="co">#&gt; min value   :  3.140508 </span></span>
<span id="cb39-22"><a></a><span class="co">#&gt; max value   :  3.638090</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="replacement" class="slide level2">
<h2>Replacement</h2>
<ul>
<li>Raster values can be replaced on a conditional statements</li>
<li>Doing this changes the underlying data!</li>
<li>If you want to retain the original data, you must make a copy of the base layer</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="fu">plot</span>(elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-61-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>elev2 <span class="ot">=</span> elev <span class="co">#&lt;&lt;</span></span>
<span id="cb41-2"><a></a>elev2[elev2 <span class="sc">&lt;=</span> <span class="dv">1500</span>] <span class="ot">=</span> <span class="cn">NA</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb41-3"><a></a><span class="fu">plot</span>(elev2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-62-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="modifying-a-raster" class="slide level2">
<h2>Modifying a raster</h2>
<p>When we want to modify the <strong>extent</strong> of a raster we can <em>clip</em> it to a new bounds</p>
<p><code>crop</code>: lets you reduce the extent of a raster to the extent of another, overlapping object:</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a><span class="co">#remotes::install_github("mikejohnson51/AOI")</span></span>
<span id="cb42-2"><a></a>fc <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">geocode</span>(<span class="st">"Fort Collins"</span>, <span class="at">bbox =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb42-3"><a></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(elev))</span>
<span id="cb42-4"><a></a></span>
<span id="cb42-5"><a></a><span class="fu">plot</span>(elev)</span>
<span id="cb42-6"><a></a><span class="fu">plot</span>(fc, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-63-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>fc_elev <span class="ot">=</span> <span class="fu">crop</span>(elev, fc) <span class="co">#&lt;&lt;</span></span>
<span id="cb43-2"><a></a><span class="fu">plot</span>(fc_elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-64-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="modifying-the-underlying-data" class="slide level2">
<h2>Modifying the underlying data:</h2>
<p><code>mask</code>: mask takes an input object (sf, sp, or raster) and set anything not undelying the input to a new value (default = NA)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a><span class="fu">library</span>(osmdata)</span>
<span id="cb44-2"><a></a></span>
<span id="cb44-3"><a></a>osm <span class="ot">=</span> osmdata<span class="sc">::</span><span class="fu">opq</span>(<span class="fu">st_bbox</span>(<span class="fu">st_transform</span>(fc,<span class="dv">4326</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb44-4"><a></a>  <span class="fu">add_osm_feature</span>(<span class="st">"water"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb44-5"><a></a>  <span class="fu">osmdata_sf</span>()</span>
<span id="cb44-6"><a></a></span>
<span id="cb44-7"><a></a>(<span class="at">poly =</span> osm<span class="sc">$</span>osm_polygons <span class="sc">|&gt;</span> </span>
<span id="cb44-8"><a></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(elev)))</span>
<span id="cb44-9"><a></a><span class="co">#&gt; Simple feature collection with 181 features and 17 fields</span></span>
<span id="cb44-10"><a></a><span class="co">#&gt; Geometry type: POLYGON</span></span>
<span id="cb44-11"><a></a><span class="co">#&gt; Dimension:     XY</span></span>
<span id="cb44-12"><a></a><span class="co">#&gt; Bounding box:  xmin: -769181 ymin: 1977155 xmax: -753314.8 ymax: 2000444</span></span>
<span id="cb44-13"><a></a><span class="co">#&gt; Projected CRS: PROJCRS["unknown",</span></span>
<span id="cb44-14"><a></a><span class="co">#&gt;     BASEGEOGCRS["NAD83",</span></span>
<span id="cb44-15"><a></a><span class="co">#&gt;         DATUM["North American Datum 1983",</span></span>
<span id="cb44-16"><a></a><span class="co">#&gt;             ELLIPSOID["GRS 1980",6378137,298.257222101004,</span></span>
<span id="cb44-17"><a></a><span class="co">#&gt;                 LENGTHUNIT["metre",1]]],</span></span>
<span id="cb44-18"><a></a><span class="co">#&gt;         PRIMEM["Greenwich",0,</span></span>
<span id="cb44-19"><a></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span></span>
<span id="cb44-20"><a></a><span class="co">#&gt;         ID["EPSG",4269]],</span></span>
<span id="cb44-21"><a></a><span class="co">#&gt;     CONVERSION["Albers Equal Area",</span></span>
<span id="cb44-22"><a></a><span class="co">#&gt;         METHOD["Albers Equal Area",</span></span>
<span id="cb44-23"><a></a><span class="co">#&gt;             ID["EPSG",9822]],</span></span>
<span id="cb44-24"><a></a><span class="co">#&gt;         PARAMETER["Latitude of false origin",23,</span></span>
<span id="cb44-25"><a></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-26"><a></a><span class="co">#&gt;             ID["EPSG",8821]],</span></span>
<span id="cb44-27"><a></a><span class="co">#&gt;         PARAMETER["Longitude of false origin",-96,</span></span>
<span id="cb44-28"><a></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-29"><a></a><span class="co">#&gt;             ID["EPSG",8822]],</span></span>
<span id="cb44-30"><a></a><span class="co">#&gt;         PARAMETER["Latitude of 1st standard parallel",29.5,</span></span>
<span id="cb44-31"><a></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-32"><a></a><span class="co">#&gt;             ID["EPSG",8823]],</span></span>
<span id="cb44-33"><a></a><span class="co">#&gt;         PARAMETER["Latitude of 2nd standard parallel",45.5,</span></span>
<span id="cb44-34"><a></a><span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433],</span></span>
<span id="cb44-35"><a></a><span class="co">#&gt;             ID["EPSG",8824]],</span></span>
<span id="cb44-36"><a></a><span class="co">#&gt;         PARAMETER["Easting at false origin",0,</span></span>
<span id="cb44-37"><a></a><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span id="cb44-38"><a></a><span class="co">#&gt;             ID["EPSG",8826]],</span></span>
<span id="cb44-39"><a></a><span class="co">#&gt;         PARAMETER["Northing at false origin",0,</span></span>
<span id="cb44-40"><a></a><span class="co">#&gt;             LENGTHUNIT["metre",1],</span></span>
<span id="cb44-41"><a></a><span class="co">#&gt;             ID["EPSG",8827]]],</span></span>
<span id="cb44-42"><a></a><span class="co">#&gt;     CS[Cartesian,2],</span></span>
<span id="cb44-43"><a></a><span class="co">#&gt;         AXIS["easting",east,</span></span>
<span id="cb44-44"><a></a><span class="co">#&gt;             ORDER[1],</span></span>
<span id="cb44-45"><a></a><span class="co">#&gt;             LENGTHUNIT["metre",1,</span></span>
<span id="cb44-46"><a></a><span class="co">#&gt;                 ID["EPSG",9001]]],</span></span>
<span id="cb44-47"><a></a><span class="co">#&gt;         AXIS["northing",north,</span></span>
<span id="cb44-48"><a></a><span class="co">#&gt;             ORDER[2],</span></span>
<span id="cb44-49"><a></a><span class="co">#&gt;             LENGTHUNIT["metre",1,</span></span>
<span id="cb44-50"><a></a><span class="co">#&gt;                 ID["EPSG",9001]]]]</span></span>
<span id="cb44-51"><a></a><span class="co">#&gt; First 10 features:</span></span>
<span id="cb44-52"><a></a><span class="co">#&gt;            osm_id              name         alt_name area basin boat</span></span>
<span id="cb44-53"><a></a><span class="co">#&gt; 6051656   6051656              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-54"><a></a><span class="co">#&gt; 23598705 23598705          Lee Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-55"><a></a><span class="co">#&gt; 23598868 23598868              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-56"><a></a><span class="co">#&gt; 23598945 23598945      College Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-57"><a></a><span class="co">#&gt; 23599224 23599224       Warren Lake             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-58"><a></a><span class="co">#&gt; 23599227 23599227 Harmony Reservoir             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-59"><a></a><span class="co">#&gt; 23599320 23599320              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-60"><a></a><span class="co">#&gt; 23599327 23599327              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-61"><a></a><span class="co">#&gt; 44074911 44074911     Lake Sherwood Nelson Reservoir &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-62"><a></a><span class="co">#&gt; 47471957 47471957              &lt;NA&gt;             &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt; &lt;NA&gt;</span></span>
<span id="cb44-63"><a></a><span class="co">#&gt;          description  ele gnis:feature_id intermittent landuse layer natural</span></span>
<span id="cb44-64"><a></a><span class="co">#&gt; 6051656         &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb44-65"><a></a><span class="co">#&gt; 23598705        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-66"><a></a><span class="co">#&gt; 23598868        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;    &lt;NA&gt;</span></span>
<span id="cb44-67"><a></a><span class="co">#&gt; 23598945        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-68"><a></a><span class="co">#&gt; 23599224        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-69"><a></a><span class="co">#&gt; 23599227        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-70"><a></a><span class="co">#&gt; 23599320        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-71"><a></a><span class="co">#&gt; 23599327        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-72"><a></a><span class="co">#&gt; 44074911        &lt;NA&gt; 1512          201223         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-73"><a></a><span class="co">#&gt; 47471957        &lt;NA&gt; &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;    &lt;NA&gt;  &lt;NA&gt;   water</span></span>
<span id="cb44-74"><a></a><span class="co">#&gt;          place salt source     water                       geometry</span></span>
<span id="cb44-75"><a></a><span class="co">#&gt; 6051656   &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt; POLYGON ((-762901.7 1988981...</span></span>
<span id="cb44-76"><a></a><span class="co">#&gt; 23598705  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      lake POLYGON ((-765209.9 1991246...</span></span>
<span id="cb44-77"><a></a><span class="co">#&gt; 23598868  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      &lt;NA&gt; POLYGON ((-767955.5 1985345...</span></span>
<span id="cb44-78"><a></a><span class="co">#&gt; 23598945  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      lake POLYGON ((-766871.6 1989267...</span></span>
<span id="cb44-79"><a></a><span class="co">#&gt; 23599224  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-760465.5 1983486...</span></span>
<span id="cb44-80"><a></a><span class="co">#&gt; 23599227  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-760046.6 1982348...</span></span>
<span id="cb44-81"><a></a><span class="co">#&gt; 23599320  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      pond POLYGON ((-762458.2 1991222...</span></span>
<span id="cb44-82"><a></a><span class="co">#&gt; 23599327  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt;      pond POLYGON ((-763462.8 1992438...</span></span>
<span id="cb44-83"><a></a><span class="co">#&gt; 44074911  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-758628.3 1984729...</span></span>
<span id="cb44-84"><a></a><span class="co">#&gt; 47471957  &lt;NA&gt; &lt;NA&gt;   &lt;NA&gt; reservoir POLYGON ((-764440.4 1992962...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">plot</span>(fc_elev)</span>
<span id="cb45-2"><a></a><span class="fu">plot</span>(poly, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">add  =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-66-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a></a>ma <span class="ot">=</span>  <span class="fu">mask</span>(fc_elev, poly)</span>
<span id="cb46-2"><a></a>ma2 <span class="ot">=</span> <span class="fu">mask</span>(fc_elev, poly, <span class="at">inverse =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-3"><a></a><span class="fu">plot</span>(<span class="fu">c</span>(fc_elev, ma, ma2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-67-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="what-is-mask-doing" class="slide level2">
<h2>What is <code>mask</code> doing?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="cn">NA</span> <span class="sc">*</span> <span class="dv">7</span></span>
<span id="cb47-2"><a></a><span class="co">#&gt; [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a></a>mask_r <span class="ot">=</span> <span class="fu">rasterize</span>(poly, fc_elev, <span class="at">background =</span> <span class="cn">NA</span>)</span>
<span id="cb48-2"><a></a><span class="fu">plot</span>(mask_r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-69-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>base_mask <span class="ot">=</span> mask_r <span class="sc">*</span> fc_elev</span>
<span id="cb49-2"><a></a><span class="fu">plot</span>(base_mask)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-70-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="crop-orand-mask" class="slide level2">
<h2>Crop or/and mask</h2>
<ul>
<li>Crop is more efficient then mask</li>
<li>Often you will want to mask and crop a raster</li>
<li>The correct way to do this is crop <em>then</em> mask</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a></a>cm <span class="ot">=</span> <span class="fu">crop</span>(fc_elev, poly) <span class="sc">|&gt;</span>  </span>
<span id="cb50-2"><a></a>  <span class="fu">mask</span>(poly)</span>
<span id="cb50-3"><a></a></span>
<span id="cb50-4"><a></a><span class="fu">plot</span>(cm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-71-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="aggregate-and-disaggregate" class="slide level2">
<h2>Aggregate and disaggregate</h2>
<ul>
<li><p><code>aggregate</code> and <code>disaggregate</code> allow for changing the <em>resolution</em> of a Raster object.</p></li>
<li><p>This is similar to the zoom scaling on a web map except the scale factor is not set to 2</p></li>
<li><p>For aggregate, you need to specify a function determining what to do with the grouped cell values (default = mean).</p></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a><span class="fu">plot</span>(fc_elev)</span>
<span id="cb51-2"><a></a><span class="fu">plot</span>(rpoly, <span class="at">add =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-73-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a>agg <span class="ot">=</span> <span class="fu">aggregate</span>(fc_elev, <span class="dv">10</span>, <span class="at">fun =</span> max) <span class="co">#&lt;&lt;</span></span>
<span id="cb52-2"><a></a><span class="fu">plot</span>(agg)</span>
<span id="cb52-3"><a></a><span class="fu">plot</span>(rpoly, <span class="at">add =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-74-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="app" class="slide level2">
<h2><code>app</code></h2>
<p>Just like a vector, we can apply functions over a raster with <code>app</code></p>
<p>These types of formulas are very useful for thresholding analysis</p>
<p><em>Question: separate Fort Collins into the higher and lower elevations</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a>FUN <span class="ot">=</span> <span class="cf">function</span>(x){ <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> <span class="fu">mean</span>(x), <span class="dv">1</span>, <span class="dv">2</span>) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a></a>elev3 <span class="ot">=</span> <span class="fu">app</span>(elev, FUN) <span class="co">#&lt;&lt;</span></span>
<span id="cb54-2"><a></a><span class="fu">plot</span>(elev3, <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-76-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="read-in-the-saved-raster-file" class="slide level2">
<h2>Read in the saved raster file</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a>(<span class="at">r =</span> <span class="fu">rast</span>(<span class="st">"data/foco-elev.tif"</span>))</span>
<span id="cb55-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb55-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb55-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb55-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb55-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb55-7"><a></a><span class="co">#&gt; source      : foco-elev.tif </span></span>
<span id="cb55-8"><a></a><span class="co">#&gt; name        : foco-elev </span></span>
<span id="cb55-9"><a></a><span class="co">#&gt; min value   :      1382 </span></span>
<span id="cb55-10"><a></a><span class="co">#&gt; max value   :      4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-conditional-threshold-mask" class="slide level2">
<h2>Create a conditional (threshold) mask</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a></a>threshold <span class="ot">=</span> <span class="cf">function</span>(x) {<span class="fu">ifelse</span>(x <span class="sc">&lt;=</span> <span class="dv">1520</span> , <span class="cn">NA</span>, <span class="dv">1</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a><span class="fu">threshold</span>(<span class="dv">1600</span>)</span>
<span id="cb57-2"><a></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb57-3"><a></a><span class="fu">threshold</span>(<span class="sc">-</span><span class="dv">100</span>)</span>
<span id="cb57-4"><a></a><span class="co">#&gt; [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a></a>(<span class="at">m =</span> <span class="fu">app</span>(r, threshold))</span>
<span id="cb58-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb58-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb58-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb58-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb58-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb58-7"><a></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb58-8"><a></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb58-9"><a></a><span class="co">#&gt; min value   :     1 </span></span>
<span id="cb58-10"><a></a><span class="co">#&gt; max value   :     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a><span class="fu">plot</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-81-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a></a><span class="fu">plot</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-82-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiply-cell-wise" class="slide level2">
<h2>Multiply cell-wise</h2>
<ul>
<li>algebraic, logical, and functional operations act on a raster cell-wise</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a>elev_cut <span class="ot">=</span> m <span class="sc">*</span> r</span>
<span id="cb61-2"><a></a><span class="fu">plot</span>(elev_cut, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">256</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-83-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="reclassify" class="slide level2">
<h2>Reclassify</h2>
<ul>
<li><p>Reclassify is a function that allows you to change the values of a raster based on a set of rules</p></li>
<li><p>The rules are defined in a data frame with three columns:</p>
<ul>
<li><code>min</code> = the minimum value of the range</li>
<li><code>max</code> = the maximum value of the range</li>
<li><code>lab</code> = the new value to assign to that range</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a></a>(<span class="at">rcl =</span> <span class="fu">data.frame</span>(<span class="at">min =</span> <span class="fu">seq</span>(<span class="dv">1500</span>,<span class="dv">1590</span>,<span class="dv">10</span>), <span class="at">max =</span>  <span class="fu">seq</span>(<span class="dv">1510</span>,<span class="dv">1600</span>,<span class="dv">10</span>), <span class="at">lab =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>)))</span>
<span id="cb62-2"><a></a><span class="co">#&gt;     min  max lab</span></span>
<span id="cb62-3"><a></a><span class="co">#&gt; 1  1500 1510   0</span></span>
<span id="cb62-4"><a></a><span class="co">#&gt; 2  1510 1520   1</span></span>
<span id="cb62-5"><a></a><span class="co">#&gt; 3  1520 1530   2</span></span>
<span id="cb62-6"><a></a><span class="co">#&gt; 4  1530 1540   3</span></span>
<span id="cb62-7"><a></a><span class="co">#&gt; 5  1540 1550   4</span></span>
<span id="cb62-8"><a></a><span class="co">#&gt; 6  1550 1560   5</span></span>
<span id="cb62-9"><a></a><span class="co">#&gt; 7  1560 1570   6</span></span>
<span id="cb62-10"><a></a><span class="co">#&gt; 8  1570 1580   7</span></span>
<span id="cb62-11"><a></a><span class="co">#&gt; 9  1580 1590   8</span></span>
<span id="cb62-12"><a></a><span class="co">#&gt; 10 1590 1600   9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a>(<span class="at">rc =</span> <span class="fu">classify</span>(elev_cut, rcl, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>))</span>
<span id="cb63-2"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb63-3"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb63-4"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb63-5"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb63-6"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb63-7"><a></a><span class="co">#&gt; source(s)   : memory</span></span>
<span id="cb63-8"><a></a><span class="co">#&gt; name        : lyr.1 </span></span>
<span id="cb63-9"><a></a><span class="co">#&gt; min value   :     2 </span></span>
<span id="cb63-10"><a></a><span class="co">#&gt; max value   :  4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a></a>(<span class="at">s =</span> <span class="fu">c</span>(r, m, elev_cut, rc) <span class="sc">|&gt;</span> </span>
<span id="cb64-2"><a></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"elevation"</span>, <span class="st">"elev-mask"</span>, <span class="st">"terrain"</span>, <span class="st">"topography"</span>)))</span>
<span id="cb64-3"><a></a><span class="co">#&gt; class       : SpatRaster </span></span>
<span id="cb64-4"><a></a><span class="co">#&gt; dimensions  : 3450, 3450, 4  (nrow, ncol, nlyr)</span></span>
<span id="cb64-5"><a></a><span class="co">#&gt; resolution  : 28.98965, 28.98965  (x, y)</span></span>
<span id="cb64-6"><a></a><span class="co">#&gt; extent      : -810156.6, -710142.3, 1934613, 2034627  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb64-7"><a></a><span class="co">#&gt; coord. ref. : +proj=aea +lat_0=23 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs </span></span>
<span id="cb64-8"><a></a><span class="co">#&gt; sources     : foco-elev.tif  </span></span>
<span id="cb64-9"><a></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-10"><a></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-11"><a></a><span class="co">#&gt;               memory  </span></span>
<span id="cb64-12"><a></a><span class="co">#&gt; names       : elevation, elev-mask, terrain, topography </span></span>
<span id="cb64-13"><a></a><span class="co">#&gt; min values  :      1382,         1,    1521,          2 </span></span>
<span id="cb64-14"><a></a><span class="co">#&gt; max values  :      4346,         1,    4346,       4346</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a><span class="fu">plot</span>(s, <span class="at">col =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">256</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-87-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="real-example-classify-rainfall-regions-of-colorado" class="slide level2">
<h2>Real Example: Classify Rainfall Regions of Colorado</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a></a><span class="co">#remotes::install_github("mikejohnson51/climateR")</span></span>
<span id="cb66-2"><a></a><span class="fu">library</span>(climateR)</span>
<span id="cb66-3"><a></a></span>
<span id="cb66-4"><a></a>AOI <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">'CO'</span>) </span>
<span id="cb66-5"><a></a></span>
<span id="cb66-6"><a></a><span class="fu">system.time</span>({ prcp <span class="ot">=</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(AOI, <span class="st">"ppt"</span>, </span>
<span id="cb66-7"><a></a>                                            <span class="at">startDate =</span> <span class="st">"2000-01-01"</span>, <span class="at">endDate =</span> <span class="st">'2005-12-31'</span>) })</span>
<span id="cb66-8"><a></a><span class="co">#&gt;    user  system elapsed </span></span>
<span id="cb66-9"><a></a><span class="co">#&gt;   0.253   0.050   3.255</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a><span class="co"># More on global below ...</span></span>
<span id="cb67-2"><a></a>quarts <span class="ot">=</span> <span class="fu">global</span>(prcp<span class="sc">$</span>ppt, fivenum)</span>
<span id="cb67-3"><a></a></span>
<span id="cb67-4"><a></a>(<span class="at">quarts =</span> <span class="fu">colMeans</span>(quarts))</span>
<span id="cb67-5"><a></a><span class="co">#&gt;         X1         X2         X3         X4         X5 </span></span>
<span id="cb67-6"><a></a><span class="co">#&gt;   6.271233  18.434247  27.995890  41.608219 105.642466</span></span>
<span id="cb67-7"><a></a></span>
<span id="cb67-8"><a></a>(<span class="at">rcl =</span> <span class="fu">data.frame</span>(quarts[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], quarts[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>], <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb67-9"><a></a><span class="co">#&gt;    quarts.1.4. quarts.2.5. X1.4</span></span>
<span id="cb67-10"><a></a><span class="co">#&gt; X1    6.271233    18.43425    1</span></span>
<span id="cb67-11"><a></a><span class="co">#&gt; X2   18.434247    27.99589    2</span></span>
<span id="cb67-12"><a></a><span class="co">#&gt; X3   27.995890    41.60822    3</span></span>
<span id="cb67-13"><a></a><span class="co">#&gt; X4   41.608219   105.64247    4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a></a>terra<span class="sc">::</span><span class="fu">classify</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), rcl, <span class="at">include.lowest=</span><span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a></a>   <span class="fu">plot</span>(<span class="at">col =</span> blues9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-90-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="objectfield-interaction" class="slide level2">
<h2>Object/Field Interaction</h2>
<p>For this example, we used OSM to extact the river data for the area of interest. We will talk more about OSM next week:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a></a>foco_rivers <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"data/foco-rivers-osm.gpkg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lets-find-the-longest-river-segment-in-our-extent" class="slide level2">
<h2>Lets find the longest river segment <em>IN</em> our extent</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a></a>river <span class="ot">=</span> foco_rivers <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a></a>  <span class="fu">st_transform</span>(<span class="fu">crs</span>(r)) <span class="sc">|&gt;</span> </span>
<span id="cb70-3"><a></a>  <span class="fu">st_intersection</span>(<span class="fu">st_as_sfc</span>(<span class="fu">st_bbox</span>(r))) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a></a>  <span class="fu">mutate</span>(<span class="at">length =</span> <span class="fu">st_length</span>(.)) <span class="sc">|&gt;</span> </span>
<span id="cb70-5"><a></a>  <span class="fu">slice_max</span>(length, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a><span class="fu">plot</span>(r)</span>
<span id="cb71-2"><a></a><span class="fu">plot</span>(river, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-93-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="value-extraction" class="slide level2">
<h2>Value Extraction</h2>
<ul>
<li><p>Often, we want to know the profile and sinousity of a river</p></li>
<li><p>To do this, we need to know the inlet and outlet as well as the straight line connector</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a></a>inlet  <span class="ot">=</span> <span class="fu">head</span>(<span class="fu">st_cast</span>(river, <span class="st">"POINT"</span>), <span class="dv">1</span>)</span>
<span id="cb72-2"><a></a>outlet <span class="ot">=</span> <span class="fu">tail</span>(<span class="fu">st_cast</span>(river, <span class="st">"POINT"</span>), <span class="dv">1</span>) </span>
<span id="cb72-3"><a></a>pts    <span class="ot">=</span> <span class="fu">bind_rows</span>(inlet, outlet) </span>
<span id="cb72-4"><a></a></span>
<span id="cb72-5"><a></a>line <span class="ot">=</span> <span class="fu">st_cast</span>(<span class="fu">st_union</span>(pts), <span class="st">"LINESTRING"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-9" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a></a><span class="fu">plot</span>(r)</span>
<span id="cb73-2"><a></a><span class="fu">plot</span>(river, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb73-3"><a></a><span class="fu">plot</span>(line, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb73-4"><a></a><span class="fu">plot</span>(outlet<span class="sc">$</span>geom, <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="st">"red"</span>)</span>
<span id="cb73-5"><a></a><span class="fu">plot</span>(inlet<span class="sc">$</span>geom,  <span class="at">add =</span> <span class="cn">TRUE</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">col =</span> <span class="st">"green"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-95-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="sinuosity" class="slide level2">
<h2>Sinuosity</h2>
<p>Channel <strong>sinuosity</strong> is calculated by dividing the length of the stream channel by the straight line distance between the end points of the selected channel reach.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a></a>(<span class="at">sin =</span> <span class="fu">st_length</span>(river) <span class="sc">/</span> <span class="fu">st_length</span>(line))</span>
<span id="cb74-2"><a></a><span class="co">#&gt; 1.400515 [1]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="images/19-sinuosity.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="river-slope" class="slide level2">
<h2>River Slope:</h2>
<p>The change in elevation between the inlet/outlet divided by the length (rise/run) give us the slope of the river:</p>
<p>To calculate this, we must extract elevation values at the inlet and outlet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a></a>(<span class="at">elev =</span> <span class="fu">extract</span>(r, pts))</span>
<span id="cb75-2"><a></a><span class="co">#&gt;   ID foco-elev</span></span>
<span id="cb75-3"><a></a><span class="co">#&gt; 1  1      1813</span></span>
<span id="cb75-4"><a></a><span class="co">#&gt; 2  2      1675</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a></a><span class="dv">100</span> <span class="sc">*</span> (elev<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span>[<span class="dv">1</span>] <span class="sc">-</span> elev<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span>[<span class="dv">2</span>]) <span class="sc">/</span> units<span class="sc">::</span><span class="fu">drop_units</span>(<span class="fu">st_length</span>(river))</span>
<span id="cb76-2"><a></a><span class="co">#&gt; [1] 0.600446</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="river-profile" class="slide level2">
<h2>River profile</h2>
<p>What does the elevation profile of the river look like?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a></a>profile <span class="ot">=</span> <span class="fu">extract</span>(r, river)<span class="sc">$</span><span class="st">`</span><span class="at">foco-elev</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a></a><span class="fu">plot</span>(profile, <span class="at">type =</span> <span class="st">"l"</span>)</span>
<span id="cb78-2"><a></a><span class="fu">lines</span>(zoo<span class="sc">::</span><span class="fu">rollmean</span>(profile,<span class="at">k =</span> <span class="dv">10</span>), </span>
<span id="cb78-3"><a></a>      <span class="at">col =</span> <span class="st">"darkred"</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-101-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="map-algebra" class="slide level2">
<h2>Map Algebra</h2>
<ul>
<li><p>Dana Tomlin (Tomlin 1990) defined a framework for the analyizing field data stored as grided values.</p></li>
<li><p>He called this framework map algebra.</p></li>
<li><p>Map algebra operations and functions are broken down into four types:</p>
<ul>
<li><p>local</p></li>
<li><p>focal</p></li>
<li><p>zonal</p></li>
<li><p>global</p></li>
</ul></li>
</ul>
</section>
<section id="local" class="slide level2">
<h2>Local</h2>
<ul>
<li><p>Local operations and functions are applied to <strong>each</strong> individual cell and only involve those cells sharing the same location.</p></li>
<li><p>More than one raster can be involved in a local operation.</p></li>
<li><p>For example, rasters can be <strong>summed</strong> ( each overlapping pixels is added)</p></li>
<li><p>Local operations also include <strong>reclassification</strong> of values.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a></a>s <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), <span class="fu">app</span>(prcp<span class="sc">$</span>ppt, sd), <span class="fu">min</span>(prcp<span class="sc">$</span>ppt), <span class="fu">max</span>(prcp<span class="sc">$</span>ppt)) <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"Mean"</span>, <span class="st">"StDev"</span>, <span class="st">"Min"</span>, <span class="st">"Max"</span>))</span>
<span id="cb79-3"><a></a></span>
<span id="cb79-4"><a></a>rasterVis<span class="sc">::</span><span class="fu">levelplot</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-102-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="focal" class="slide level2">
<h2>Focal</h2>
<ul>
<li><p>Also referred to as “neighborhood” operations.</p></li>
<li><p>Assigns summary values to the output cells based on the neighboring cells in the input raster.</p></li>
<li><p>For example, a cell output value can be the average of 9 neighboring input cells (including the center cell) - this acts as a smoothing function.</p></li>
</ul>
</section>
<section id="focal-1" class="slide level2">
<h2>Focal</h2>
<ul>
<li><p>Focal operations require a window (also known as a kernel) to work over</p></li>
<li><p>Additionally a kernel also defines the weight each neighboring cell contributes to the summary statistic.</p></li>
<li><p>For example, all cells in a 3x3 neighbor could each contribute 1/9th of their value to the summarized value (i.e.&nbsp;equal weight).</p></li>
<li><p>The weight can take on a more complex form defined by a function; such weights are defined by a kernel function.</p></li>
<li><p>One popular function is a Gaussian weighted function which assigns greater weight to nearby cells than those further away (<a href="https://en.wikipedia.org/wiki/Tobler%27s_first_law_of_geography">Toblers first law</a>)</p></li>
</ul>
</section>
<section id="example-focal" class="slide level2">
<h2>Example: Focal</h2>
<p>Lets apply a smoothing kernel to our Fort Collins elevation data over an 25x25 window, using the mean operator</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a></a>foco <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">geocode</span>(<span class="st">"Fort Collins"</span>, <span class="at">bbox =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="fu">st_transform</span>(<span class="fu">crs</span>(r))</span>
<span id="cb80-2"><a></a></span>
<span id="cb80-3"><a></a>foco_elev <span class="ot">=</span> <span class="fu">crop</span>(r, foco)</span>
<span id="cb80-4"><a></a>f1 <span class="ot">&lt;-</span> <span class="fu">focal</span>(foco_elev, <span class="at">w=</span> <span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">25</span>), <span class="at">fun=</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="results-1" class="slide level2">
<h2>Results</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a></a><span class="fu">plot</span>(foco_elev)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-104-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a></a><span class="fu">plot</span>(f1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-105-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="what-did-we-do" class="slide level2">
<h2>What did we do?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a></a><span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">25</span>,<span class="at">ncol=</span><span class="dv">25</span>)</span>
<span id="cb83-2"><a></a><span class="co">#&gt;       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]</span></span>
<span id="cb83-3"><a></a><span class="co">#&gt;  [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-4"><a></a><span class="co">#&gt;  [2,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-5"><a></a><span class="co">#&gt;  [3,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-6"><a></a><span class="co">#&gt;  [4,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-7"><a></a><span class="co">#&gt;  [5,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-8"><a></a><span class="co">#&gt;  [6,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-9"><a></a><span class="co">#&gt;  [7,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-10"><a></a><span class="co">#&gt;  [8,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-11"><a></a><span class="co">#&gt;  [9,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-12"><a></a><span class="co">#&gt; [10,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-13"><a></a><span class="co">#&gt; [11,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-14"><a></a><span class="co">#&gt; [12,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-15"><a></a><span class="co">#&gt; [13,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-16"><a></a><span class="co">#&gt; [14,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-17"><a></a><span class="co">#&gt; [15,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-18"><a></a><span class="co">#&gt; [16,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-19"><a></a><span class="co">#&gt; [17,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-20"><a></a><span class="co">#&gt; [18,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-21"><a></a><span class="co">#&gt; [19,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-22"><a></a><span class="co">#&gt; [20,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-23"><a></a><span class="co">#&gt; [21,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-24"><a></a><span class="co">#&gt; [22,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-25"><a></a><span class="co">#&gt; [23,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-26"><a></a><span class="co">#&gt; [24,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-27"><a></a><span class="co">#&gt; [25,]    1    1    1    1    1    1    1    1    1     1     1     1     1</span></span>
<span id="cb83-28"><a></a><span class="co">#&gt;       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25]</span></span>
<span id="cb83-29"><a></a><span class="co">#&gt;  [1,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-30"><a></a><span class="co">#&gt;  [2,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-31"><a></a><span class="co">#&gt;  [3,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-32"><a></a><span class="co">#&gt;  [4,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-33"><a></a><span class="co">#&gt;  [5,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-34"><a></a><span class="co">#&gt;  [6,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-35"><a></a><span class="co">#&gt;  [7,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-36"><a></a><span class="co">#&gt;  [8,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-37"><a></a><span class="co">#&gt;  [9,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-38"><a></a><span class="co">#&gt; [10,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-39"><a></a><span class="co">#&gt; [11,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-40"><a></a><span class="co">#&gt; [12,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-41"><a></a><span class="co">#&gt; [13,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-42"><a></a><span class="co">#&gt; [14,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-43"><a></a><span class="co">#&gt; [15,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-44"><a></a><span class="co">#&gt; [16,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-45"><a></a><span class="co">#&gt; [17,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-46"><a></a><span class="co">#&gt; [18,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-47"><a></a><span class="co">#&gt; [19,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-48"><a></a><span class="co">#&gt; [20,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-49"><a></a><span class="co">#&gt; [21,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-50"><a></a><span class="co">#&gt; [22,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-51"><a></a><span class="co">#&gt; [23,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-52"><a></a><span class="co">#&gt; [24,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span>
<span id="cb83-53"><a></a><span class="co">#&gt; [25,]     1     1     1     1     1     1     1     1     1     1     1     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a></a><span class="fu">mean</span>(foco_elev[<span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">25</span>][,<span class="dv">1</span>])</span>
<span id="cb84-2"><a></a><span class="co">#&gt; [1] 1610.022</span></span>
<span id="cb84-3"><a></a></span>
<span id="cb84-4"><a></a><span class="fu">na.omit</span>(<span class="fu">values</span>(f1))[<span class="dv">1</span>]</span>
<span id="cb84-5"><a></a><span class="co">#&gt; [1] 1610.022</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="zonal" class="slide level2">
<h2>Zonal</h2>
<ul>
<li><p>Zonal operations compute a summary values (such as the mean) from cells aggregated to some zonal unit.</p></li>
<li><p>Like focal operations, a zone and a mediating function must be defined</p></li>
<li><p>The most basis example of a zonal function is aggregation!</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a></a><span class="fu">aggregate</span>(foco_elev, <span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-108-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="zonal-statisics-more-advanced" class="slide level2">
<h2>Zonal Statisics (More advanced)</h2>
<ul>
<li><p>For more complicated object zones, <a href="https://github.com/isciences/exactextractr">exactextractr</a> is a fast and effiecient R utility that binds the C++ <code>exactextract</code> tool.</p></li>
<li><p>What is the county level mean January rainfall in California?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a></a>AOI <span class="ot">=</span> AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"CO"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb86-2"><a></a>AOI<span class="sc">$</span>janPTT <span class="ot">=</span> exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(prcp<span class="sc">$</span>ppt<span class="sc">$</span><span class="st">`</span><span class="at">ppt_2000-01-01_total</span><span class="st">`</span>, AOI, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span>
<span id="cb86-3"><a></a><span class="fu">plot</span>(AOI[<span class="st">'janPTT'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-109-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="what-about-the-us" class="slide level2">
<h2>What about the US?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a></a>counties <span class="ot">&lt;-</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"conus"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb87-2"><a></a>  </span>
<span id="cb87-3"><a></a>jan <span class="ot">&lt;-</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(counties, <span class="st">"ppt"</span>, <span class="at">startDate =</span> <span class="st">"2000-01-01"</span>) </span>
<span id="cb87-4"><a></a>  </span>
<span id="cb87-5"><a></a>counties<span class="sc">$</span>janPTT <span class="ot">&lt;-</span>  exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(jan<span class="sc">$</span>ppt, counties, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a></a><span class="fu">plot</span>(counties[<span class="st">'janPTT'</span>], <span class="at">border =</span> <span class="cn">NA</span>, <span class="at">key.pos =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-111-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="global" class="slide level2">
<h2>Global</h2>
<ul>
<li><p>Global operations make use of <em>some</em> or <em>all</em> input cells when computing an output cell value.</p></li>
<li><p>They are a special case of zonal operations with the <em>entire</em> raster represents a single zone.</p></li>
<li><p>Examples include generating descriptive statistics for the entire raster dataset</p></li>
</ul>
</section>
<section id="summary-values" class="slide level2">
<h2>Summary Values</h2>
<p><code>global</code>: computes statistics for the values of each layer in a Raster* object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a></a>elev <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">'data/foco-elev.tif'</span>)</span>
<span id="cb89-2"><a></a><span class="fu">global</span>(elev, mean)</span>
<span id="cb89-3"><a></a><span class="co">#&gt;               mean</span></span>
<span id="cb89-4"><a></a><span class="co">#&gt; foco-elev 1887.874</span></span>
<span id="cb89-5"><a></a><span class="fu">mean</span>(<span class="fu">values</span>(elev), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb89-6"><a></a><span class="co">#&gt; [1] 1887.874</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="why-not-just-mean" class="title-slide slide level1 center">
<h1>Why not just <code>mean()</code></h1>
<p>In the terra package, functions like <code>max</code>, <code>min</code>, and <code>mean</code>, return a new SpatRast* object (with a value computed for each cell).</p>
<p>In contrast, <code>global</code> returns a single value, computed from the all the values of a layer.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a></a>s <span class="ot">=</span> <span class="fu">c</span>(elev, elev<span class="sc">^</span><span class="dv">2</span>, elev<span class="sc">*</span>.<span class="dv">5</span>)</span>
<span id="cb90-2"><a></a><span class="fu">mean</span>(s) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-113-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a></a><span class="fu">global</span>(s, mean)</span>
<span id="cb91-2"><a></a><span class="co">#&gt;                     mean</span></span>
<span id="cb91-3"><a></a><span class="co">#&gt; foco-elev      1887.8738</span></span>
<span id="cb91-4"><a></a><span class="co">#&gt; foco-elev.1 3802035.3412</span></span>
<span id="cb91-5"><a></a><span class="co">#&gt; foco-elev.2     943.9369</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="mean-monthly-rainfall-for-colorado" class="slide level2">
<h2>Mean Monthly Rainfall for Colorado</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="global-1">global</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a></a><span class="fu">plot</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, max)<span class="sc">$</span>max, <span class="at">type =</span> <span class="st">"l"</span>, </span>
<span id="cb92-2"><a></a>     <span class="at">ylab =</span> <span class="st">"rainfall"</span>, <span class="at">xlab =</span> <span class="st">"month since 2000-01"</span>)</span>
<span id="cb92-3"><a></a><span class="fu">lines</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, min)<span class="sc">$</span>min, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"blue"</span>)</span>
<span id="cb92-4"><a></a><span class="fu">lines</span>(<span class="fu">global</span>(prcp<span class="sc">$</span>ppt, mean)<span class="sc">$</span>mean, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"darkred"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-115-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<h3 id="mean">mean()</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a></a><span class="fu">plot</span>(<span class="fu">mean</span>(prcp<span class="sc">$</span>ppt), <span class="at">col =</span> blues9)</span>
<span id="cb93-2"><a></a><span class="fu">plot</span>(AOI, <span class="at">add =</span><span class="cn">TRUE</span>, <span class="at">col =</span> <span class="cn">NA</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-116-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section></section>
<section>
<section id="kmeans-over-to-raster-data" class="title-slide slide level1 center">
<h1>Kmeans over to Raster Data!</h1>
<ul>
<li>each layer of a SpatRaster is a layer</li>
<li>each layer is a vector of values</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a></a><span class="fu">library</span>(climateR)</span>
<span id="cb94-2"><a></a>params <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="st">"ppt"</span>, <span class="st">"tmax"</span>, <span class="st">"tmin"</span>, <span class="st">"srad"</span>, <span class="st">"q"</span>)</span>
<span id="cb94-3"><a></a>AOI   <span class="ot">&lt;-</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"CO"</span>)</span>
<span id="cb94-4"><a></a></span>
<span id="cb94-5"><a></a>co <span class="ot">&lt;-</span>  climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(AOI, params, <span class="at">startDate =</span> <span class="st">"2018-10-01"</span>)  <span class="sc">%&gt;%</span> </span>
<span id="cb94-6"><a></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-7"><a></a>  <span class="fu">rast</span>() <span class="sc">|&gt;</span> </span>
<span id="cb94-8"><a></a>  <span class="fu">setNames</span>(params)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="colorado-october-2018-climate" class="slide level2">
<h2>Colorado October 2018 climate</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a></a><span class="fu">plot</span>(co)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-118-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="raster-layers-are-vectors" class="slide level2">
<h2>Raster layers are vectors!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a></a>values <span class="ot">=</span> <span class="fu">values</span>(co)</span>
<span id="cb96-2"><a></a><span class="fu">head</span>(values)</span>
<span id="cb96-3"><a></a><span class="co">#&gt;       ppt tmax  tmin srad    q</span></span>
<span id="cb96-4"><a></a><span class="co">#&gt; [1,] 37.8  1.9 125.1 12.1 -2.4</span></span>
<span id="cb96-5"><a></a><span class="co">#&gt; [2,] 39.2  2.0 124.2 10.8 -2.8</span></span>
<span id="cb96-6"><a></a><span class="co">#&gt; [3,] 39.2  2.0 124.3 10.6 -2.9</span></span>
<span id="cb96-7"><a></a><span class="co">#&gt; [4,] 37.7  1.9 124.6 11.6 -2.4</span></span>
<span id="cb96-8"><a></a><span class="co">#&gt; [5,] 36.3  1.8 125.0 12.2 -2.2</span></span>
<span id="cb96-9"><a></a><span class="co">#&gt; [6,] 34.8  1.7 125.0 13.0 -2.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-prep" class="slide level2">
<h2>Data Prep</h2>
<ul>
<li>Identify NA indices for latter reference</li>
<li>Remove NA values</li>
<li>Scale</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a></a>idx <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">apply</span>(<span class="fu">is.na</span>(values), <span class="dv">1</span>, any))</span>
<span id="cb97-2"><a></a>v   <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(values)</span>
<span id="cb97-3"><a></a>vs  <span class="ot">&lt;-</span> <span class="fu">scale</span>(v)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a></a>(E <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(vs, <span class="dv">5</span>, <span class="at">iter.max =</span> <span class="dv">100</span>))</span>
<span id="cb98-2"><a></a><span class="co">#&gt; K-means clustering with 5 clusters of sizes 587, 6760, 4443, 2461, 2579</span></span>
<span id="cb98-3"><a></a><span class="co">#&gt; </span></span>
<span id="cb98-4"><a></a><span class="co">#&gt; Cluster means:</span></span>
<span id="cb98-5"><a></a><span class="co">#&gt;          ppt        tmax       tmin       srad          q</span></span>
<span id="cb98-6"><a></a><span class="co">#&gt; 1  3.1809306  4.58719802 -0.5826831 -1.7484176 -1.2252186</span></span>
<span id="cb98-7"><a></a><span class="co">#&gt; 2 -0.5405504 -0.23556555 -0.1516672  0.6420750  0.6217347</span></span>
<span id="cb98-8"><a></a><span class="co">#&gt; 3  0.3880379 -0.09899023 -0.9985264 -1.0895267 -1.1524177</span></span>
<span id="cb98-9"><a></a><span class="co">#&gt; 4  0.3523365 -0.06032517  0.8319069 -0.3276054 -0.4019256</span></span>
<span id="cb98-10"><a></a><span class="co">#&gt; 5 -0.3118412 -0.19852202  1.4565472  0.9045748  1.0180718</span></span>
<span id="cb98-11"><a></a><span class="co">#&gt; </span></span>
<span id="cb98-12"><a></a><span class="co">#&gt; Clustering vector:</span></span>
<span id="cb98-13"><a></a><span class="co">#&gt;     [1] 4 3 3 4 4 4 4 4 4 4 4 4 4 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-14"><a></a><span class="co">#&gt;    [37] 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-15"><a></a><span class="co">#&gt;    [73] 3 3 3 4 4 4 4 4 4 4 3 3 4 4 3 4 4 4 4 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-16"><a></a><span class="co">#&gt;   [109] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-17"><a></a><span class="co">#&gt;   [145] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 3 3 4 4 4 4 2 4 4</span></span>
<span id="cb98-18"><a></a><span class="co">#&gt;   [181] 2 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3</span></span>
<span id="cb98-19"><a></a><span class="co">#&gt;   [217] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 3 3</span></span>
<span id="cb98-20"><a></a><span class="co">#&gt;   [253] 3 3 3 3 4 4 4 4 4 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-21"><a></a><span class="co">#&gt;   [289] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-22"><a></a><span class="co">#&gt;   [325] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-23"><a></a><span class="co">#&gt;   [361] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-24"><a></a><span class="co">#&gt;   [397] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4</span></span>
<span id="cb98-25"><a></a><span class="co">#&gt;   [433] 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-26"><a></a><span class="co">#&gt;   [469] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-27"><a></a><span class="co">#&gt;   [505] 2 2 2 2 2 2 4 3 3 3 3 3 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-28"><a></a><span class="co">#&gt;   [541] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-29"><a></a><span class="co">#&gt;   [577] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-30"><a></a><span class="co">#&gt;   [613] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-31"><a></a><span class="co">#&gt;   [649] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-32"><a></a><span class="co">#&gt;   [685] 3 3 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3</span></span>
<span id="cb98-33"><a></a><span class="co">#&gt;   [721] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-34"><a></a><span class="co">#&gt;   [757] 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-35"><a></a><span class="co">#&gt;   [793] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-36"><a></a><span class="co">#&gt;   [829] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 2 2 2 2 2</span></span>
<span id="cb98-37"><a></a><span class="co">#&gt;   [865] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-38"><a></a><span class="co">#&gt;   [901] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4</span></span>
<span id="cb98-39"><a></a><span class="co">#&gt;   [937] 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-40"><a></a><span class="co">#&gt;   [973] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-41"><a></a><span class="co">#&gt;  [1009] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-42"><a></a><span class="co">#&gt;  [1045] 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-43"><a></a><span class="co">#&gt;  [1081] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2</span></span>
<span id="cb98-44"><a></a><span class="co">#&gt;  [1117] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-45"><a></a><span class="co">#&gt;  [1153] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-46"><a></a><span class="co">#&gt;  [1189] 2 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-47"><a></a><span class="co">#&gt;  [1225] 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-48"><a></a><span class="co">#&gt;  [1261] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-49"><a></a><span class="co">#&gt;  [1297] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-50"><a></a><span class="co">#&gt;  [1333] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2</span></span>
<span id="cb98-51"><a></a><span class="co">#&gt;  [1369] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-52"><a></a><span class="co">#&gt;  [1405] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-53"><a></a><span class="co">#&gt;  [1441] 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-54"><a></a><span class="co">#&gt;  [1477] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-55"><a></a><span class="co">#&gt;  [1513] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-56"><a></a><span class="co">#&gt;  [1549] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-57"><a></a><span class="co">#&gt;  [1585] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2</span></span>
<span id="cb98-58"><a></a><span class="co">#&gt;  [1621] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-59"><a></a><span class="co">#&gt;  [1657] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-60"><a></a><span class="co">#&gt;  [1693] 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-61"><a></a><span class="co">#&gt;  [1729] 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-62"><a></a><span class="co">#&gt;  [1765] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-63"><a></a><span class="co">#&gt;  [1801] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-64"><a></a><span class="co">#&gt;  [1837] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-65"><a></a><span class="co">#&gt;  [1873] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3</span></span>
<span id="cb98-66"><a></a><span class="co">#&gt;  [1909] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-67"><a></a><span class="co">#&gt;  [1945] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-68"><a></a><span class="co">#&gt;  [1981] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-69"><a></a><span class="co">#&gt;  [2017] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-70"><a></a><span class="co">#&gt;  [2053] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-71"><a></a><span class="co">#&gt;  [2089] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-72"><a></a><span class="co">#&gt;  [2125] 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-73"><a></a><span class="co">#&gt;  [2161] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-74"><a></a><span class="co">#&gt;  [2197] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-75"><a></a><span class="co">#&gt;  [2233] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-76"><a></a><span class="co">#&gt;  [2269] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 2 2 2</span></span>
<span id="cb98-77"><a></a><span class="co">#&gt;  [2305] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-78"><a></a><span class="co">#&gt;  [2341] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-79"><a></a><span class="co">#&gt;  [2377] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3</span></span>
<span id="cb98-80"><a></a><span class="co">#&gt;  [2413] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-81"><a></a><span class="co">#&gt;  [2449] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-82"><a></a><span class="co">#&gt;  [2485] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-83"><a></a><span class="co">#&gt;  [2521] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 2 2 2 2</span></span>
<span id="cb98-84"><a></a><span class="co">#&gt;  [2557] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-85"><a></a><span class="co">#&gt;  [2593] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-86"><a></a><span class="co">#&gt;  [2629] 3 3 3 3 3 3 3 4 4 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-87"><a></a><span class="co">#&gt;  [2665] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-88"><a></a><span class="co">#&gt;  [2701] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 3 2 2 2 3 3 3 3 2 2 2 2 2 2 2</span></span>
<span id="cb98-89"><a></a><span class="co">#&gt;  [2737] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-90"><a></a><span class="co">#&gt;  [2773] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4</span></span>
<span id="cb98-91"><a></a><span class="co">#&gt;  [2809] 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-92"><a></a><span class="co">#&gt;  [2845] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-93"><a></a><span class="co">#&gt;  [2881] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3</span></span>
<span id="cb98-94"><a></a><span class="co">#&gt;  [2917] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-95"><a></a><span class="co">#&gt;  [2953] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 2 2 2 2 2 2 2</span></span>
<span id="cb98-96"><a></a><span class="co">#&gt;  [2989] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-97"><a></a><span class="co">#&gt;  [3025] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-98"><a></a><span class="co">#&gt;  [3061] 2 2 2 2 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-99"><a></a><span class="co">#&gt;  [3097] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-100"><a></a><span class="co">#&gt;  [3133] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-101"><a></a><span class="co">#&gt;  [3169] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-102"><a></a><span class="co">#&gt;  [3205] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-103"><a></a><span class="co">#&gt;  [3241] 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-104"><a></a><span class="co">#&gt;  [3277] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-105"><a></a><span class="co">#&gt;  [3313] 3 3 3 3 3 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-106"><a></a><span class="co">#&gt;  [3349] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-107"><a></a><span class="co">#&gt;  [3385] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-108"><a></a><span class="co">#&gt;  [3421] 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-109"><a></a><span class="co">#&gt;  [3457] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 2 2</span></span>
<span id="cb98-110"><a></a><span class="co">#&gt;  [3493] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-111"><a></a><span class="co">#&gt;  [3529] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-112"><a></a><span class="co">#&gt;  [3565] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-113"><a></a><span class="co">#&gt;  [3601] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-114"><a></a><span class="co">#&gt;  [3637] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-115"><a></a><span class="co">#&gt;  [3673] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-116"><a></a><span class="co">#&gt;  [3709] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-117"><a></a><span class="co">#&gt;  [3745] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-118"><a></a><span class="co">#&gt;  [3781] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-119"><a></a><span class="co">#&gt;  [3817] 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-120"><a></a><span class="co">#&gt;  [3853] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-121"><a></a><span class="co">#&gt;  [3889] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-122"><a></a><span class="co">#&gt;  [3925] 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-123"><a></a><span class="co">#&gt;  [3961] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-124"><a></a><span class="co">#&gt;  [3997] 3 4 4 4 2 2 2 2 2 2 2 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-125"><a></a><span class="co">#&gt;  [4033] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-126"><a></a><span class="co">#&gt;  [4069] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-127"><a></a><span class="co">#&gt;  [4105] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-128"><a></a><span class="co">#&gt;  [4141] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 2 2 2 2 2 2</span></span>
<span id="cb98-129"><a></a><span class="co">#&gt;  [4177] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-130"><a></a><span class="co">#&gt;  [4213] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-131"><a></a><span class="co">#&gt;  [4249] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-132"><a></a><span class="co">#&gt;  [4285] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-133"><a></a><span class="co">#&gt;  [4321] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 2 2 5 5 2 2 2 5 5 2 2 2 2 2</span></span>
<span id="cb98-134"><a></a><span class="co">#&gt;  [4357] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-135"><a></a><span class="co">#&gt;  [4393] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-136"><a></a><span class="co">#&gt;  [4429] 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-137"><a></a><span class="co">#&gt;  [4465] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-138"><a></a><span class="co">#&gt;  [4501] 3 3 3 3 3 3 4 4 4 4 4 2 2 2 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-139"><a></a><span class="co">#&gt;  [4537] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-140"><a></a><span class="co">#&gt;  [4573] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 2 2 2 2</span></span>
<span id="cb98-141"><a></a><span class="co">#&gt;  [4609] 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-142"><a></a><span class="co">#&gt;  [4645] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4</span></span>
<span id="cb98-143"><a></a><span class="co">#&gt;  [4681] 4 2 2 2 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-144"><a></a><span class="co">#&gt;  [4717] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-145"><a></a><span class="co">#&gt;  [4753] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-146"><a></a><span class="co">#&gt;  [4789] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-147"><a></a><span class="co">#&gt;  [4825] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 5 5 5 5 5 5</span></span>
<span id="cb98-148"><a></a><span class="co">#&gt;  [4861] 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-149"><a></a><span class="co">#&gt;  [4897] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-150"><a></a><span class="co">#&gt;  [4933] 2 2 2 2 2 2 2 2 2 2 3 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-151"><a></a><span class="co">#&gt;  [4969] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-152"><a></a><span class="co">#&gt;  [5005] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 2 2 5 5 5 5 5 5 5 5 2 2 2 5 2 2 2 2</span></span>
<span id="cb98-153"><a></a><span class="co">#&gt;  [5041] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-154"><a></a><span class="co">#&gt;  [5077] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-155"><a></a><span class="co">#&gt;  [5113] 3 3 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-156"><a></a><span class="co">#&gt;  [5149] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-157"><a></a><span class="co">#&gt;  [5185] 3 4 4 3 4 4 4 4 2 2 5 5 5 5 5 5 5 5 5 2 2 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-158"><a></a><span class="co">#&gt;  [5221] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-159"><a></a><span class="co">#&gt;  [5257] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 2 3 3 3 3 3</span></span>
<span id="cb98-160"><a></a><span class="co">#&gt;  [5293] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-161"><a></a><span class="co">#&gt;  [5329] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 2 2</span></span>
<span id="cb98-162"><a></a><span class="co">#&gt;  [5365] 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-163"><a></a><span class="co">#&gt;  [5401] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-164"><a></a><span class="co">#&gt;  [5437] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-165"><a></a><span class="co">#&gt;  [5473] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-166"><a></a><span class="co">#&gt;  [5509] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 2 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-167"><a></a><span class="co">#&gt;  [5545] 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-168"><a></a><span class="co">#&gt;  [5581] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-169"><a></a><span class="co">#&gt;  [5617] 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-170"><a></a><span class="co">#&gt;  [5653] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-171"><a></a><span class="co">#&gt;  [5689] 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 2 2 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-172"><a></a><span class="co">#&gt;  [5725] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-173"><a></a><span class="co">#&gt;  [5761] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3</span></span>
<span id="cb98-174"><a></a><span class="co">#&gt;  [5797] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-175"><a></a><span class="co">#&gt;  [5833] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4</span></span>
<span id="cb98-176"><a></a><span class="co">#&gt;  [5869] 4 4 4 4 4 2 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-177"><a></a><span class="co">#&gt;  [5905] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-178"><a></a><span class="co">#&gt;  [5941] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-179"><a></a><span class="co">#&gt;  [5977] 3 3 3 3 2 2 2 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-180"><a></a><span class="co">#&gt;  [6013] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 2 5 5 5</span></span>
<span id="cb98-181"><a></a><span class="co">#&gt;  [6049] 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-182"><a></a><span class="co">#&gt;  [6085] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-183"><a></a><span class="co">#&gt;  [6121] 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2</span></span>
<span id="cb98-184"><a></a><span class="co">#&gt;  [6157] 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-185"><a></a><span class="co">#&gt;  [6193] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-186"><a></a><span class="co">#&gt;  [6229] 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-187"><a></a><span class="co">#&gt;  [6265] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-188"><a></a><span class="co">#&gt;  [6301] 2 3 2 2 2 2 2 3 2 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-189"><a></a><span class="co">#&gt;  [6337] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-190"><a></a><span class="co">#&gt;  [6373] 3 3 3 3 3 3 3 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-191"><a></a><span class="co">#&gt;  [6409] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-192"><a></a><span class="co">#&gt;  [6445] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 2 2 2 2 2 3</span></span>
<span id="cb98-193"><a></a><span class="co">#&gt;  [6481] 2 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-194"><a></a><span class="co">#&gt;  [6517] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4</span></span>
<span id="cb98-195"><a></a><span class="co">#&gt;  [6553] 4 4 4 4 5 5 5 5 5 5 5 5 5 5 2 2 5 5 2 2 2 2 5 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-196"><a></a><span class="co">#&gt;  [6589] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-197"><a></a><span class="co">#&gt;  [6625] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 2 2 3 3 3 3</span></span>
<span id="cb98-198"><a></a><span class="co">#&gt;  [6661] 3 3 3 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-199"><a></a><span class="co">#&gt;  [6697] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5</span></span>
<span id="cb98-200"><a></a><span class="co">#&gt;  [6733] 5 5 5 5 2 5 2 2 2 2 2 2 2 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-201"><a></a><span class="co">#&gt;  [6769] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-202"><a></a><span class="co">#&gt;  [6805] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-203"><a></a><span class="co">#&gt;  [6841] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-204"><a></a><span class="co">#&gt;  [6877] 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 2 2 2 2 2 2</span></span>
<span id="cb98-205"><a></a><span class="co">#&gt;  [6913] 2 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-206"><a></a><span class="co">#&gt;  [6949] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-207"><a></a><span class="co">#&gt;  [6985] 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-208"><a></a><span class="co">#&gt;  [7021] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-209"><a></a><span class="co">#&gt;  [7057] 3 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 4 5 5 5 2 5 2 2 2 2 5 5 5 2 2 2 2 2 2 2</span></span>
<span id="cb98-210"><a></a><span class="co">#&gt;  [7093] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-211"><a></a><span class="co">#&gt;  [7129] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-212"><a></a><span class="co">#&gt;  [7165] 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-213"><a></a><span class="co">#&gt;  [7201] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-214"><a></a><span class="co">#&gt;  [7237] 4 4 5 4 4 4 4 4 4 4 4 2 2 2 2 2 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-215"><a></a><span class="co">#&gt;  [7273] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-216"><a></a><span class="co">#&gt;  [7309] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3</span></span>
<span id="cb98-217"><a></a><span class="co">#&gt;  [7345] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-218"><a></a><span class="co">#&gt;  [7381] 3 3 3 3 3 3 3 3 3 3 3 4 4 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-219"><a></a><span class="co">#&gt;  [7417] 4 4 4 2 2 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-220"><a></a><span class="co">#&gt;  [7453] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-221"><a></a><span class="co">#&gt;  [7489] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-222"><a></a><span class="co">#&gt;  [7525] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-223"><a></a><span class="co">#&gt;  [7561] 3 4 4 4 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5</span></span>
<span id="cb98-224"><a></a><span class="co">#&gt;  [7597] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-225"><a></a><span class="co">#&gt;  [7633] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-226"><a></a><span class="co">#&gt;  [7669] 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-227"><a></a><span class="co">#&gt;  [7705] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 3 3 4 3 3 4 4</span></span>
<span id="cb98-228"><a></a><span class="co">#&gt;  [7741] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-229"><a></a><span class="co">#&gt;  [7777] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-230"><a></a><span class="co">#&gt;  [7813] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3</span></span>
<span id="cb98-231"><a></a><span class="co">#&gt;  [7849] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-232"><a></a><span class="co">#&gt;  [7885] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 3 4 4 3 3 3 4 4 3 3 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-233"><a></a><span class="co">#&gt;  [7921] 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-234"><a></a><span class="co">#&gt;  [7957] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-235"><a></a><span class="co">#&gt;  [7993] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-236"><a></a><span class="co">#&gt;  [8029] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-237"><a></a><span class="co">#&gt;  [8065] 3 3 3 4 4 4 4 4 4 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-238"><a></a><span class="co">#&gt;  [8101] 4 4 4 5 5 2 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-239"><a></a><span class="co">#&gt;  [8137] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-240"><a></a><span class="co">#&gt;  [8173] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-241"><a></a><span class="co">#&gt;  [8209] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4</span></span>
<span id="cb98-242"><a></a><span class="co">#&gt;  [8245] 4 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 2 2 2 2</span></span>
<span id="cb98-243"><a></a><span class="co">#&gt;  [8281] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-244"><a></a><span class="co">#&gt;  [8317] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3</span></span>
<span id="cb98-245"><a></a><span class="co">#&gt;  [8353] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-246"><a></a><span class="co">#&gt;  [8389] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-247"><a></a><span class="co">#&gt;  [8425] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-248"><a></a><span class="co">#&gt;  [8461] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-249"><a></a><span class="co">#&gt;  [8497] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-250"><a></a><span class="co">#&gt;  [8533] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-251"><a></a><span class="co">#&gt;  [8569] 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-252"><a></a><span class="co">#&gt;  [8605] 4 4 4 4 4 4 4 5 5 4 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-253"><a></a><span class="co">#&gt;  [8641] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-254"><a></a><span class="co">#&gt;  [8677] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-255"><a></a><span class="co">#&gt;  [8713] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4</span></span>
<span id="cb98-256"><a></a><span class="co">#&gt;  [8749] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 4 4 4 4 4 5 5 5 5 5</span></span>
<span id="cb98-257"><a></a><span class="co">#&gt;  [8785] 5 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-258"><a></a><span class="co">#&gt;  [8821] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 2 2 2 2 2</span></span>
<span id="cb98-259"><a></a><span class="co">#&gt;  [8857] 2 2 2 2 2 3 3 3 2 2 2 2 2 2 2 2 3 3 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-260"><a></a><span class="co">#&gt;  [8893] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-261"><a></a><span class="co">#&gt;  [8929] 4 4 4 4 4 4 4 4 3 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-262"><a></a><span class="co">#&gt;  [8965] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-263"><a></a><span class="co">#&gt;  [9001] 2 2 2 2 2 2 2 2 2 2 2 2 4 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-264"><a></a><span class="co">#&gt;  [9037] 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-265"><a></a><span class="co">#&gt;  [9073] 3 3 3 3 3 3 3 4 4 4 4 3 3 3 3 3 4 4 4 4 4 3 3 4 4 4 4 4 4 4 4 4 4 3 3 3</span></span>
<span id="cb98-266"><a></a><span class="co">#&gt;  [9109] 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-267"><a></a><span class="co">#&gt;  [9145] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-268"><a></a><span class="co">#&gt;  [9181] 2 2 2 2 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-269"><a></a><span class="co">#&gt;  [9217] 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4</span></span>
<span id="cb98-270"><a></a><span class="co">#&gt;  [9253] 4 3 3 3 3 3 4 4 4 3 3 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4 4 4 5 5 5 5 5 5 5</span></span>
<span id="cb98-271"><a></a><span class="co">#&gt;  [9289] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-272"><a></a><span class="co">#&gt;  [9325] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-273"><a></a><span class="co">#&gt;  [9361] 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-274"><a></a><span class="co">#&gt;  [9397] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 3 3 3 3 4 4 3 3</span></span>
<span id="cb98-275"><a></a><span class="co">#&gt;  [9433] 3 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-276"><a></a><span class="co">#&gt;  [9469] 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-277"><a></a><span class="co">#&gt;  [9505] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-278"><a></a><span class="co">#&gt;  [9541] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-279"><a></a><span class="co">#&gt;  [9577] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 3 3 3 4 4 3 3 3 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-280"><a></a><span class="co">#&gt;  [9613] 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-281"><a></a><span class="co">#&gt;  [9649] 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-282"><a></a><span class="co">#&gt;  [9685] 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-283"><a></a><span class="co">#&gt;  [9721] 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-284"><a></a><span class="co">#&gt;  [9757] 3 3 3 3 3 4 4 4 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-285"><a></a><span class="co">#&gt;  [9793] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2</span></span>
<span id="cb98-286"><a></a><span class="co">#&gt;  [9829] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-287"><a></a><span class="co">#&gt;  [9865] 2 2 2 2 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-288"><a></a><span class="co">#&gt;  [9901] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 3</span></span>
<span id="cb98-289"><a></a><span class="co">#&gt;  [9937] 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-290"><a></a><span class="co">#&gt;  [9973] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-291"><a></a><span class="co">#&gt; [10009] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 3 3 3 3 3</span></span>
<span id="cb98-292"><a></a><span class="co">#&gt; [10045] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-293"><a></a><span class="co">#&gt; [10081] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 3 4 4 4 3 3 3 4 4 4</span></span>
<span id="cb98-294"><a></a><span class="co">#&gt; [10117] 4 4 4 4 4 4 5 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-295"><a></a><span class="co">#&gt; [10153] 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-296"><a></a><span class="co">#&gt; [10189] 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-297"><a></a><span class="co">#&gt; [10225] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-298"><a></a><span class="co">#&gt; [10261] 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 3 4 4 3 3 4 4 4 4 4 4 4 4 4 4 5 5 5 4 4</span></span>
<span id="cb98-299"><a></a><span class="co">#&gt; [10297] 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-300"><a></a><span class="co">#&gt; [10333] 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-301"><a></a><span class="co">#&gt; [10369] 2 2 4 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3</span></span>
<span id="cb98-302"><a></a><span class="co">#&gt; [10405] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-303"><a></a><span class="co">#&gt; [10441] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-304"><a></a><span class="co">#&gt; [10477] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2</span></span>
<span id="cb98-305"><a></a><span class="co">#&gt; [10513] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2</span></span>
<span id="cb98-306"><a></a><span class="co">#&gt; [10549] 2 2 2 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-307"><a></a><span class="co">#&gt; [10585] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-308"><a></a><span class="co">#&gt; [10621] 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-309"><a></a><span class="co">#&gt; [10657] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-310"><a></a><span class="co">#&gt; [10693] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3</span></span>
<span id="cb98-311"><a></a><span class="co">#&gt; [10729] 3 3 3 3 3 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-312"><a></a><span class="co">#&gt; [10765] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5</span></span>
<span id="cb98-313"><a></a><span class="co">#&gt; [10801] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-314"><a></a><span class="co">#&gt; [10837] 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-315"><a></a><span class="co">#&gt; [10873] 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 2 2 2</span></span>
<span id="cb98-316"><a></a><span class="co">#&gt; [10909] 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-317"><a></a><span class="co">#&gt; [10945] 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-318"><a></a><span class="co">#&gt; [10981] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-319"><a></a><span class="co">#&gt; [11017] 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2</span></span>
<span id="cb98-320"><a></a><span class="co">#&gt; [11053] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 2 2 3 3 3 3 3</span></span>
<span id="cb98-321"><a></a><span class="co">#&gt; [11089] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4</span></span>
<span id="cb98-322"><a></a><span class="co">#&gt; [11125] 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-323"><a></a><span class="co">#&gt; [11161] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2</span></span>
<span id="cb98-324"><a></a><span class="co">#&gt; [11197] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-325"><a></a><span class="co">#&gt; [11233] 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-326"><a></a><span class="co">#&gt; [11269] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 1 3 4 4 4 3 3 4 4 4 4 4 4</span></span>
<span id="cb98-327"><a></a><span class="co">#&gt; [11305] 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-328"><a></a><span class="co">#&gt; [11341] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-329"><a></a><span class="co">#&gt; [11377] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3</span></span>
<span id="cb98-330"><a></a><span class="co">#&gt; [11413] 3 3 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-331"><a></a><span class="co">#&gt; [11449] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-332"><a></a><span class="co">#&gt; [11485] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-333"><a></a><span class="co">#&gt; [11521] 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-334"><a></a><span class="co">#&gt; [11557] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 2</span></span>
<span id="cb98-335"><a></a><span class="co">#&gt; [11593] 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-336"><a></a><span class="co">#&gt; [11629] 3 3 3 3 4 4 4 4 4 4 3 1 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-337"><a></a><span class="co">#&gt; [11665] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-338"><a></a><span class="co">#&gt; [11701] 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-339"><a></a><span class="co">#&gt; [11737] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-340"><a></a><span class="co">#&gt; [11773] 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 3 3 3 3 4 4 4 4 4 4</span></span>
<span id="cb98-341"><a></a><span class="co">#&gt; [11809] 4 3 1 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-342"><a></a><span class="co">#&gt; [11845] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2</span></span>
<span id="cb98-343"><a></a><span class="co">#&gt; [11881] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-344"><a></a><span class="co">#&gt; [11917] 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 1 1 1 3 3 3 1 1 1 3 3 3 3 3</span></span>
<span id="cb98-345"><a></a><span class="co">#&gt; [11953] 3 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 4 4 4 4 4</span></span>
<span id="cb98-346"><a></a><span class="co">#&gt; [11989] 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-347"><a></a><span class="co">#&gt; [12025] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-348"><a></a><span class="co">#&gt; [12061] 2 2 2 2 2 2 2 2 2 2 4 4 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 3 3 3 3 3</span></span>
<span id="cb98-349"><a></a><span class="co">#&gt; [12097] 3 3 3 3 3 3 3 3 3 3 1 1 3 3 1 1 3 3 1 1 1 1 3 3 1 3 1 1 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-350"><a></a><span class="co">#&gt; [12133] 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-351"><a></a><span class="co">#&gt; [12169] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-352"><a></a><span class="co">#&gt; [12205] 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-353"><a></a><span class="co">#&gt; [12241] 4 4 4 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-354"><a></a><span class="co">#&gt; [12277] 1 1 3 1 1 1 3 3 1 1 1 3 3 3 1 1 1 1 1 1 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4</span></span>
<span id="cb98-355"><a></a><span class="co">#&gt; [12313] 4 4 4 4 4 4 4 4 4 1 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-356"><a></a><span class="co">#&gt; [12349] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-357"><a></a><span class="co">#&gt; [12385] 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 2 2 2 2 2 2</span></span>
<span id="cb98-358"><a></a><span class="co">#&gt; [12421] 2 2 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 1 1 1 1 1 3 3 1 1 1 1 1 1 3 3 1 1 1</span></span>
<span id="cb98-359"><a></a><span class="co">#&gt; [12457] 1 1 1 1 1 1 3 1 1 1 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-360"><a></a><span class="co">#&gt; [12493] 1 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-361"><a></a><span class="co">#&gt; [12529] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2</span></span>
<span id="cb98-362"><a></a><span class="co">#&gt; [12565] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 2 2 2 2 2 4 4 4 4 3 4 4 3</span></span>
<span id="cb98-363"><a></a><span class="co">#&gt; [12601] 3 3 3 3 3 3 3 3 3 1 1 1 1 1 1 1 3 1 1 1 1 1 1 3 1 1 1 1 1 1 1 3 3 1 1 1</span></span>
<span id="cb98-364"><a></a><span class="co">#&gt; [12637] 1 3 3 1 1 3 1 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 1 4 4 4 4 4 4</span></span>
<span id="cb98-365"><a></a><span class="co">#&gt; [12673] 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-366"><a></a><span class="co">#&gt; [12709] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-367"><a></a><span class="co">#&gt; [12745] 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 2 2 2 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-368"><a></a><span class="co">#&gt; [12781] 3 1 1 1 1 1 3 3 1 1 1 1 3 1 1 1 1 3 3 1 1 1 1 3 1 1 1 1 1 1 1 1 3 3 3 3</span></span>
<span id="cb98-369"><a></a><span class="co">#&gt; [12817] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5</span></span>
<span id="cb98-370"><a></a><span class="co">#&gt; [12853] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-371"><a></a><span class="co">#&gt; [12889] 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4</span></span>
<span id="cb98-372"><a></a><span class="co">#&gt; [12925] 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 1 1 3 3 3 3 3 3 3 3 1 1 3 1 1 1 3 1 3 1 1</span></span>
<span id="cb98-373"><a></a><span class="co">#&gt; [12961] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3 3 3 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-374"><a></a><span class="co">#&gt; [12997] 4 4 4 4 4 4 4 4 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-375"><a></a><span class="co">#&gt; [13033] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2</span></span>
<span id="cb98-376"><a></a><span class="co">#&gt; [13069] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-377"><a></a><span class="co">#&gt; [13105] 4 4 4 4 3 3 1 1 1 1 1 1 1 1 3 1 1 1 1 1 1 1 1 1 3 3 1 1 1 1 1 1 3 1 1 1</span></span>
<span id="cb98-378"><a></a><span class="co">#&gt; [13141] 3 3 3 1 1 1 1 1 1 1 1 1 1 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1</span></span>
<span id="cb98-379"><a></a><span class="co">#&gt; [13177] 1 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-380"><a></a><span class="co">#&gt; [13213] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-381"><a></a><span class="co">#&gt; [13249] 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 1 1 3 3</span></span>
<span id="cb98-382"><a></a><span class="co">#&gt; [13285] 3 1 1 1 1 1 1 1 1 1 1 1 1 3 3 3 1 1 1 1 1 3 3 3 1 1 3 3 3 3 3 1 1 1 1 1</span></span>
<span id="cb98-383"><a></a><span class="co">#&gt; [13321] 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5</span></span>
<span id="cb98-384"><a></a><span class="co">#&gt; [13357] 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-385"><a></a><span class="co">#&gt; [13393] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-386"><a></a><span class="co">#&gt; [13429] 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 1 1 1 1 1 1 1</span></span>
<span id="cb98-387"><a></a><span class="co">#&gt; [13465] 1 1 1 1 1 1 1 3 1 1 3 3 3 3 3 3 3 1 1 3 3 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-388"><a></a><span class="co">#&gt; [13501] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-389"><a></a><span class="co">#&gt; [13537] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-390"><a></a><span class="co">#&gt; [13573] 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-391"><a></a><span class="co">#&gt; [13609] 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 1 3 1 1 1 1 1 1 1 1 3 1 3 3 1 1 1 1 3 3</span></span>
<span id="cb98-392"><a></a><span class="co">#&gt; [13645] 3 3 1 3 3 3 3 1 1 3 3 1 3 3 3 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-393"><a></a><span class="co">#&gt; [13681] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-394"><a></a><span class="co">#&gt; [13717] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2</span></span>
<span id="cb98-395"><a></a><span class="co">#&gt; [13753] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-396"><a></a><span class="co">#&gt; [13789] 3 3 3 3 3 1 1 3 1 3 1 1 1 3 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 3 3 1 1 1 1</span></span>
<span id="cb98-397"><a></a><span class="co">#&gt; [13825] 1 1 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4</span></span>
<span id="cb98-398"><a></a><span class="co">#&gt; [13861] 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-399"><a></a><span class="co">#&gt; [13897] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-400"><a></a><span class="co">#&gt; [13933] 2 2 2 2 2 2 2 2 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3</span></span>
<span id="cb98-401"><a></a><span class="co">#&gt; [13969] 3 3 3 3 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 1 4 4 4</span></span>
<span id="cb98-402"><a></a><span class="co">#&gt; [14005] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-403"><a></a><span class="co">#&gt; [14041] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-404"><a></a><span class="co">#&gt; [14077] 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5</span></span>
<span id="cb98-405"><a></a><span class="co">#&gt; [14113] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 3 3 3 1 1 1 1 1</span></span>
<span id="cb98-406"><a></a><span class="co">#&gt; [14149] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3 4 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-407"><a></a><span class="co">#&gt; [14185] 4 4 4 4 4 4 4 4 4 4 4 1 3 3 1 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-408"><a></a><span class="co">#&gt; [14221] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-409"><a></a><span class="co">#&gt; [14257] 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-410"><a></a><span class="co">#&gt; [14293] 4 4 4 4 4 4 4 4 4 4 3 3 3 3 3 3 3 3 3 3 1 1 1 1 1 3 1 1 3 1 3 3 3 3 1 1</span></span>
<span id="cb98-411"><a></a><span class="co">#&gt; [14329] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-412"><a></a><span class="co">#&gt; [14365] 4 1 1 1 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-413"><a></a><span class="co">#&gt; [14401] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-414"><a></a><span class="co">#&gt; [14437] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3</span></span>
<span id="cb98-415"><a></a><span class="co">#&gt; [14473] 3 3 3 3 3 4 3 3 4 4 3 1 1 1 1 3 1 3 3 1 3 3 3 3 3 1 1 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-416"><a></a><span class="co">#&gt; [14509] 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-417"><a></a><span class="co">#&gt; [14545] 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-418"><a></a><span class="co">#&gt; [14581] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-419"><a></a><span class="co">#&gt; [14617] 2 2 2 2 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 3 3 1 3 3 4 4 4 4</span></span>
<span id="cb98-420"><a></a><span class="co">#&gt; [14653] 3 3 1 1 3 3 3 3 1 3 3 3 3 3 3 3 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4</span></span>
<span id="cb98-421"><a></a><span class="co">#&gt; [14689] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 4 5 5 5 5</span></span>
<span id="cb98-422"><a></a><span class="co">#&gt; [14725] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-423"><a></a><span class="co">#&gt; [14761] 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5</span></span>
<span id="cb98-424"><a></a><span class="co">#&gt; [14797] 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 3 1 1 1 3 3 4 4 4 4 3 3 3 3 3 4 3 3 3 3</span></span>
<span id="cb98-425"><a></a><span class="co">#&gt; [14833] 3 3 4 4 4 3 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-426"><a></a><span class="co">#&gt; [14869] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-427"><a></a><span class="co">#&gt; [14905] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2</span></span>
<span id="cb98-428"><a></a><span class="co">#&gt; [14941] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4</span></span>
<span id="cb98-429"><a></a><span class="co">#&gt; [14977] 4 4 4 4 4 4 3 3 3 1 3 4 4 4 4 4 3 4 4 4 4 4 3 3 3 3 3 4 4 4 4 4 3 3 3 3</span></span>
<span id="cb98-430"><a></a><span class="co">#&gt; [15013] 4 4 4 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-431"><a></a><span class="co">#&gt; [15049] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-432"><a></a><span class="co">#&gt; [15085] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-433"><a></a><span class="co">#&gt; [15121] 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-434"><a></a><span class="co">#&gt; [15157] 4 4 4 4 4 4 4 4 4 4 4 4 4 3 4 4 4 3 4 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-435"><a></a><span class="co">#&gt; [15193] 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4 4 4 4</span></span>
<span id="cb98-436"><a></a><span class="co">#&gt; [15229] 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-437"><a></a><span class="co">#&gt; [15265] 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-438"><a></a><span class="co">#&gt; [15301] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-439"><a></a><span class="co">#&gt; [15337] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4</span></span>
<span id="cb98-440"><a></a><span class="co">#&gt; [15373] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 4 4 4 4 4 4 4 5 5 5 5 5 5</span></span>
<span id="cb98-441"><a></a><span class="co">#&gt; [15409] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-442"><a></a><span class="co">#&gt; [15445] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 4 4 5 5</span></span>
<span id="cb98-443"><a></a><span class="co">#&gt; [15481] 5 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-444"><a></a><span class="co">#&gt; [15517] 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-445"><a></a><span class="co">#&gt; [15553] 4 4 4 4 4 4 4 4 4 1 1 1 1 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-446"><a></a><span class="co">#&gt; [15589] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-447"><a></a><span class="co">#&gt; [15625] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 4 5 5 5 5 5 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-448"><a></a><span class="co">#&gt; [15661] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 4</span></span>
<span id="cb98-449"><a></a><span class="co">#&gt; [15697] 1 1 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-450"><a></a><span class="co">#&gt; [15733] 1 1 3 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-451"><a></a><span class="co">#&gt; [15769] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-452"><a></a><span class="co">#&gt; [15805] 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-453"><a></a><span class="co">#&gt; [15841] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1 1 1</span></span>
<span id="cb98-454"><a></a><span class="co">#&gt; [15877] 1 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 4 4 4 4 4 4 4 4 4 4 4 1 1 4 4 4 4 4 5 5</span></span>
<span id="cb98-455"><a></a><span class="co">#&gt; [15913] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-456"><a></a><span class="co">#&gt; [15949] 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5</span></span>
<span id="cb98-457"><a></a><span class="co">#&gt; [15985] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 5 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-458"><a></a><span class="co">#&gt; [16021] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 4 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-459"><a></a><span class="co">#&gt; [16057] 4 4 4 5 5 5 4 4 4 4 4 4 4 4 4 4 1 1 1 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-460"><a></a><span class="co">#&gt; [16093] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2</span></span>
<span id="cb98-461"><a></a><span class="co">#&gt; [16129] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-462"><a></a><span class="co">#&gt; [16165] 5 5 5 5 5 5 5 5 5 5 5 5 4 5 5 5 4 4 4 4 4 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4</span></span>
<span id="cb98-463"><a></a><span class="co">#&gt; [16201] 4 4 4 4 4 1 1 4 1 1 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 4 4 4 4</span></span>
<span id="cb98-464"><a></a><span class="co">#&gt; [16237] 4 4 4 4 4 4 1 3 1 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 4 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-465"><a></a><span class="co">#&gt; [16273] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-466"><a></a><span class="co">#&gt; [16309] 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-467"><a></a><span class="co">#&gt; [16345] 5 5 5 5 5 5 4 4 4 4 5 5 5 5 4 4 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1</span></span>
<span id="cb98-468"><a></a><span class="co">#&gt; [16381] 1 1 1 1 1 1 1 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 4 4 4 4 4 4 4 1 1 1 4 4</span></span>
<span id="cb98-469"><a></a><span class="co">#&gt; [16417] 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-470"><a></a><span class="co">#&gt; [16453] 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-471"><a></a><span class="co">#&gt; [16489] 2 2 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4</span></span>
<span id="cb98-472"><a></a><span class="co">#&gt; [16525] 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 1 1 1 1 1 1 1 4 4</span></span>
<span id="cb98-473"><a></a><span class="co">#&gt; [16561] 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 4 4 4 4 4 1 1 1 4 4 4 4 4 4 4 4 4 5 5 5 5</span></span>
<span id="cb98-474"><a></a><span class="co">#&gt; [16597] 5 5 5 5 5 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-475"><a></a><span class="co">#&gt; [16633] 5 5 5 5 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 5 5 5 5 5 5 5 5</span></span>
<span id="cb98-476"><a></a><span class="co">#&gt; [16669] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 4 4 4</span></span>
<span id="cb98-477"><a></a><span class="co">#&gt; [16705] 5 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 1 1 1 1 1 4 4 4 4 4 4 4 4 5 5 5 5 5</span></span>
<span id="cb98-478"><a></a><span class="co">#&gt; [16741] 5 5 5 5 5 4 4 4 4 1 1 1 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 4 4 4 4 4</span></span>
<span id="cb98-479"><a></a><span class="co">#&gt; [16777] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 2 2 2 2 2 2</span></span>
<span id="cb98-480"><a></a><span class="co">#&gt; [16813] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span></span>
<span id="cb98-481"><a></a><span class="co">#&gt; </span></span>
<span id="cb98-482"><a></a><span class="co">#&gt; Within cluster sum of squares by cluster:</span></span>
<span id="cb98-483"><a></a><span class="co">#&gt; [1] 4217.707 6204.350 8408.896 4629.343 2008.882</span></span>
<span id="cb98-484"><a></a><span class="co">#&gt;  (between_SS / total_SS =  69.7 %)</span></span>
<span id="cb98-485"><a></a><span class="co">#&gt; </span></span>
<span id="cb98-486"><a></a><span class="co">#&gt; Available components:</span></span>
<span id="cb98-487"><a></a><span class="co">#&gt; </span></span>
<span id="cb98-488"><a></a><span class="co">#&gt; [1] "cluster"      "centers"      "totss"        "withinss"     "tot.withinss"</span></span>
<span id="cb98-489"><a></a><span class="co">#&gt; [6] "betweenss"    "size"         "iter"         "ifault"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="copying-a-raster-structure" class="slide level2">
<h2>Copying a raster structure</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a></a>clus_raster <span class="ot">&lt;-</span> co<span class="sc">$</span>tmax</span>
<span id="cb99-2"><a></a><span class="fu">values</span>(clus_raster) <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assign-values" class="slide level2">
<h2>Assign values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a></a>clus_raster[idx] <span class="ot">&lt;-</span> E<span class="sc">$</span>cluster</span>
<span id="cb100-2"><a></a><span class="fu">plot</span>(clus_raster, <span class="at">col =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Spectral"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-123-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="merging-across-data-sources" class="slide level2">
<h2>Merging across data sources</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a></a><span class="co"># Get elevations data</span></span>
<span id="cb101-2"><a></a>elev <span class="ot">=</span> elevatr<span class="sc">::</span><span class="fu">get_elev_raster</span>(AOI, <span class="at">z =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a></a>  <span class="fu">crop</span>(AOI) <span class="sc">|&gt;</span> </span>
<span id="cb101-4"><a></a>  <span class="fu">rast</span>()</span>
<span id="cb101-5"><a></a></span>
<span id="cb101-6"><a></a><span class="co"># Align Raster extents and resolutions</span></span>
<span id="cb101-7"><a></a>elev <span class="ot">=</span> <span class="fu">project</span>(elev, co<span class="sc">$</span>ppt)</span>
<span id="cb101-8"><a></a></span>
<span id="cb101-9"><a></a><span class="co"># Extract Values</span></span>
<span id="cb101-10"><a></a>values <span class="ot">=</span> <span class="fu">c</span>(co<span class="sc">$</span>ppt, elev) <span class="sc">%&gt;%</span> <span class="fu">values</span>()</span>
<span id="cb101-11"><a></a></span>
<span id="cb101-12"><a></a><span class="co"># Prep data</span></span>
<span id="cb101-13"><a></a>idx <span class="ot">=</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">apply</span>(<span class="fu">is.na</span>(values), <span class="dv">1</span>, any))</span>
<span id="cb101-14"><a></a>v <span class="ot">=</span> <span class="fu">na.omit</span>(values)</span>
<span id="cb101-15"><a></a>vs <span class="ot">=</span> <span class="fu">scale</span>(v)</span>
<span id="cb101-16"><a></a></span>
<span id="cb101-17"><a></a><span class="co"># Cluster</span></span>
<span id="cb101-18"><a></a>E <span class="ot">=</span> <span class="fu">kmeans</span>(vs, <span class="dv">5</span>, <span class="at">iter.max =</span> <span class="dv">100</span>)</span>
<span id="cb101-19"><a></a></span>
<span id="cb101-20"><a></a>clus_raster <span class="ot">=</span> elev</span>
<span id="cb101-21"><a></a><span class="fu">values</span>(clus_raster) <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb101-22"><a></a>clus_raster[idx] <span class="ot">&lt;-</span> E<span class="sc">$</span>cluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb102-2"><a></a><span class="fu">plot</span>(elev)</span>
<span id="cb102-3"><a></a><span class="fu">plot</span>(co<span class="sc">$</span>ppt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-125-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a></a><span class="fu">plot</span>(clus_raster, <span class="at">col =</span> RColorBrewer<span class="sc">::</span><span class="fu">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Spectral"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="week-4_files/figure-revealjs/unnamed-chunk-126-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="clustering-at-larger-scales" class="slide level2">
<h2>Clustering at larger scales</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a></a>counties <span class="ot">=</span>  AOI<span class="sc">::</span><span class="fu">aoi_get</span>(<span class="at">state =</span> <span class="st">"conus"</span>, <span class="at">county =</span> <span class="st">"all"</span>)</span>
<span id="cb104-2"><a></a>params <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"tmax"</span>, <span class="st">"tmin"</span>, <span class="st">"ppt"</span>, <span class="st">"srad"</span>)</span>
<span id="cb104-3"><a></a></span>
<span id="cb104-4"><a></a>dat <span class="ot">=</span> climateR<span class="sc">::</span><span class="fu">getTerraClim</span>(counties, params, <span class="at">startDate =</span> <span class="st">"2018-06-01"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-5"><a></a>  <span class="fu">unlist</span>() <span class="sc">|&gt;</span> </span>
<span id="cb104-6"><a></a>  <span class="fu">rast</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb104-7"><a></a>  <span class="fu">setNames</span>(params) <span class="sc">|&gt;</span> </span>
<span id="cb104-8"><a></a>  exactextractr<span class="sc">::</span><span class="fu">exact_extract</span>(counties, <span class="st">"mean"</span>, <span class="at">progress =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a></a>dat <span class="ot">=</span> <span class="fu">scale</span>(dat)</span>
<span id="cb105-2"><a></a></span>
<span id="cb105-3"><a></a>counties<span class="sc">$</span>clust8 <span class="ot">=</span> <span class="fu">kmeans</span>(dat, <span class="dv">8</span>)<span class="sc">$</span>cluster</span>
<span id="cb105-4"><a></a></span>
<span id="cb105-5"><a></a><span class="fu">plot</span>(<span class="fu">st_transform</span>(counties[<span class="st">"clust8"</span>], <span class="dv">5070</span>), <span class="at">border =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="week-4_files/figure-revealjs/unnamed-chunk-128-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="extra-animating-rasters" class="slide level2">
<h2>Extra! Animating Rasters…</h2>
<p>Install and load the <code>gifski</code> package</p>
<ul>
<li><p><strong>save_gif</strong>: combines many individual plots</p></li>
<li><p>A <strong>for loop</strong> build the plots</p></li>
<li><p>The <strong>plot</strong> is what we have been doing all along (if you want a <code>ggplot</code> you must print the object!)</p></li>
<li><p><strong>gif_file</strong>: the path to save the image</p></li>
<li><p><strong>width/height</strong>: the image dimensions</p></li>
<li><p><strong>delay</strong>: the pause between frames</p></li>
<li><p><strong>loop</strong>: should the gif play over and over?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a></a><span class="fu">library</span>(gifski)</span>
<span id="cb106-2"><a></a></span>
<span id="cb106-3"><a></a><span class="fu">save_gif</span>(</span>
<span id="cb106-4"><a></a>  {<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nlyr</span>(prcp<span class="sc">$</span>ppt)) {</span>
<span id="cb106-5"><a></a>      <span class="fu">plot</span>(prcp<span class="sc">$</span>ppt[[i]], <span class="at">col =</span> blues9, </span>
<span id="cb106-6"><a></a>           <span class="at">legend =</span> <span class="cn">FALSE</span>, </span>
<span id="cb106-7"><a></a>           <span class="at">main =</span> <span class="fu">names</span>(prcp<span class="sc">$</span>ppt)[i])}</span>
<span id="cb106-8"><a></a>  }, </span>
<span id="cb106-9"><a></a>  <span class="at">gif_file =</span> <span class="st">"images/ppt.gif"</span>, </span>
<span id="cb106-10"><a></a>  <span class="at">width =</span> <span class="dv">800</span>, <span class="at">height =</span> <span class="dv">600</span>, <span class="at">delay =</span> .<span class="dv">33</span>, <span class="at">loop =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="result-1" class="slide level2">
<h2>Result</h2>



<img data-src="images/ppt.gif" class="r-stretch"></section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../csu-rams-logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://github.com/mikejohnson51/csu-ess-523c/">ESS 523c: Environmental Data Science Applications: Water Resources</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 1000,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script>
      Reveal.addEventListener( 'slidechanged', function( event ) {
        console.log("hello")
        
        slide_id = event.currentSlide.id
        link = "annotations" + ".html#" + slide_id
        
        var annotation_div = document.createElement('div')
        annotation_div.setAttribute("class", "annotation-link")
        
        var notes_link = document.createElement('a')
        notes_link.setAttribute("href", link)
        notes_link.setAttribute("target", "_blank")
        
        var iii = document.createElement('i')
        iii.setAttribute("class", "fa fa-info")
        notes_link.appendChild(iii)
        
        annotation_div.appendChild(notes_link)
        
        var tmp = event.currentTarget.getElementsByClassName("annotation-link")
        if (tmp.length === 1) {
          tmp[0].remove()
        }
        
        if (event.currentSlide.classList.contains("annotation")) {
          event.currentTarget.append(annotation_div)
        }
      } );

    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>